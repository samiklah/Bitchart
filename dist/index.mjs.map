{"version":3,"file":"index.mjs","sources":["../src/helpers/utils.ts","../src/scales.ts","../src/interactions.ts","../src/drawing/footprint.ts","../src/drawing/grid.ts","../src/drawing/crosshair.ts","../src/drawing/measure.ts","../src/drawing.ts","../src/aggregator.ts","../src/chart.ts","../src/api/volume-footprint-series-api.ts","../src/api/time-scale-api.ts","../src/api/price-scale-api.ts","../src/api/chart-api.ts","../src/api/create-chart.ts","../src/dom/dom-renderer.ts","../src/dom/dom.ts"],"sourcesContent":["/**\n * Utility functions and helpers for the Volume Footprint Chart library.\n * Contains reusable calculations for volume analysis, color mapping, and number formatting.\n */\n\n/**\n * Creates color mapping functions for buy and sell volumes based on opacity scaling.\n * @param sideMax Maximum volume on either buy or sell side\n * @param buyBase Base opacity for buy volumes\n * @param sellBase Base opacity for sell volumes\n * @returns Object with buyRGBA and sellRGBA functions\n */\nexport function createVolumeColorMappers(sideMax: number, buyBase: number = 0.15, sellBase: number = 0.15) {\n  const buyRGBA = (v: number) => `rgba(0,255,0,${buyBase + 0.55 * (v / sideMax)})`;\n  const sellRGBA = (v: number) => `rgba(255,0,0,${sellBase + 0.55 * (v / sideMax)})`;\n  return { buyRGBA, sellRGBA };\n}\n\n/**\n * Formats a number with K/M/T suffixes for large values.\n * @param v The number to format\n * @returns Formatted string\n */\nexport function formatNumber(v: number): string {\n  const a = Math.abs(v);\n  if (a >= 1e12) return (v / 1e12).toFixed(2) + \"T\";\n  if (a >= 1e6) return (v / 1e6).toFixed(2) + \"M\";\n  if (a >= 1e3) return (v / 1e3).toFixed(2) + \"K\";\n  // For small numbers, show up to 2 decimal places if needed\n  if (Number.isInteger(v)) {\n    return v.toString();\n  }\n  return v.toFixed(2);\n}\n\n/**\n * Calculates the Point of Control (POC) and Value Area (VAH/VAL) for volume profile analysis.\n * @param rows Sorted footprint levels (high to low price)\n * @returns Object containing POC index, VAH/VAL indices and prices, and total volume\n */\nexport function computeVolumeArea(rows: any[]): { pocIdx: number, vahIdx: number, valIdx: number, VAH: number, VAL: number, totalVol: number } {\n  const levelVols = rows.map(r => r.buy + r.sell);\n  const totalVol = levelVols.reduce((a, b) => a + b, 0);\n  let pocIdx = 0;\n  for (let i = 1; i < levelVols.length; i++) {\n    if (levelVols[i] > levelVols[pocIdx]) pocIdx = i;\n  }\n\n  let included = new Set([pocIdx]);\n  const enableProfile = rows.length > 3;\n  if (enableProfile) {\n    let acc = levelVols[pocIdx];\n    let up = pocIdx - 1, down = pocIdx + 1;\n    while (acc < 0.7 * totalVol && (up >= 0 || down < rows.length)) {\n      const upVol = up >= 0 ? levelVols[up] : -1;\n      const downVol = down < rows.length ? levelVols[down] : -1;\n      if (upVol >= downVol) {\n        if (up >= 0) { included.add(up); acc += levelVols[up]; up--; }\n        else { included.add(down); acc += levelVols[down]; down++; }\n      } else {\n        if (down < rows.length) { included.add(down); acc += levelVols[down]; down++; }\n        else { included.add(up); acc += levelVols[up]; up--; }\n      }\n    }\n  }\n\n  const vahIdx = Math.min(...included);\n  const valIdx = Math.max(...included);\n  const VAH = rows[vahIdx]?.price;\n  const VAL = rows[valIdx]?.price;\n\n  return { pocIdx, vahIdx, valIdx, VAH, VAL, totalVol };\n}","/**\n * Provides coordinate transformation and scaling utilities for the chart.\n * Converts between screen pixels, data indices, and price values with zoom and pan support.\n */\n\nimport { CandleData } from './types';\nimport { formatNumber } from './helpers/utils';\n\n/**\n * Handles coordinate transformations and scaling calculations for the chart.\n * Provides methods to convert between screen coordinates, data indices, and price levels.\n */\nexport class Scales {\n  private data: CandleData[] = [];\n  private margin: { top: number; bottom: number; left: number; right: number };\n  private view: { zoomY: number; zoomX: number; offsetRows: number; offsetX: number };\n  private canvasWidth: number;\n  private canvasHeight: number;\n  private showVolumeFootprint: boolean;\n  private TICK: number;\n  private baseRowPx: number;\n  private TEXT_VIS: { minZoomX: number; minRowPx: number; minBoxPx: number };\n  private showCVD: boolean;\n  private cvdHeightRatio: number;\n  private deltaTableHeight: number;\n  private footprintStyle: 'bid_ask' | 'delta';\n  private showOI: boolean;\n  private oiHeightRatio: number;\n  private showFundingRate: boolean;\n  private fundingRateHeightRatio: number;\n\n  // Cached ladderTop to prevent recalculation on every access\n  private cachedLadderTop: number = 10000;\n  private ladderTopDirty: boolean = true;\n\n  /**\n   * Creates a Scales instance for coordinate transformations.\n   * @param data Array of candlestick data\n   * @param margin Chart margin configuration\n   * @param view Current view state\n   * @param canvasWidth Canvas width in pixels\n   * @param canvasHeight Canvas height in pixels\n   * @param showVolumeFootprint Whether volume footprint is displayed\n   * @param TICK Price tick size\n   * @param baseRowPx Base row height in pixels\n   * @param TEXT_VIS Text visibility thresholds\n   * @param showCVD Whether CVD indicator is shown\n   * @param cvdHeightRatio Ratio of total height used for CVD\n   * @param showOI Whether OI indicator is shown\n   * @param oiHeightRatio Ratio of total height used for OI\n   * @param showFundingRate Whether funding rate indicator is shown\n   * @param fundingRateHeightRatio Ratio of total height used for funding rate\n   */\n  constructor(\n    data: CandleData[],\n    margin: { top: number; bottom: number; left: number; right: number },\n    view: { zoomY: number; zoomX: number; offsetRows: number; offsetX: number },\n    canvasWidth: number,\n    canvasHeight: number,\n    showVolumeFootprint: boolean,\n    TICK: number,\n    baseRowPx: number,\n    TEXT_VIS: { minZoomX: number; minRowPx: number; minBoxPx: number },\n    showCVD: boolean = false,\n    cvdHeightRatio: number = 0.2,\n    deltaTableHeight: number = 0,\n    footprintStyle: 'bid_ask' | 'delta' = 'bid_ask',\n    showOI: boolean = false,\n    oiHeightRatio: number = 0.15,\n    showFundingRate: boolean = false,\n    fundingRateHeightRatio: number = 0.1\n  ) {\n    this.data = data;\n    this.margin = margin;\n    this.view = view;\n    this.canvasWidth = canvasWidth;\n    this.canvasHeight = canvasHeight;\n    this.showVolumeFootprint = showVolumeFootprint;\n    this.TICK = TICK;\n    this.baseRowPx = baseRowPx;\n    this.TEXT_VIS = TEXT_VIS;\n    this.showCVD = showCVD;\n    this.cvdHeightRatio = cvdHeightRatio;\n    this.deltaTableHeight = deltaTableHeight;\n    this.footprintStyle = footprintStyle;\n    this.showOI = showOI;\n    this.oiHeightRatio = oiHeightRatio;\n    this.showFundingRate = showFundingRate;\n    this.fundingRateHeightRatio = fundingRateHeightRatio;\n  }\n\n  /** Returns the height of the main price chart area in pixels (excluding margins and indicators). */\n  chartHeight(): number {\n    const totalHeight = this.canvasHeight - this.margin.top - this.margin.bottom - this.deltaTableHeight;\n    const indicatorsRatio = this.indicatorsPaneHeight();\n    if (indicatorsRatio === 0) {\n      return totalHeight;\n    }\n    // Reserve ratio for all indicators, plus gaps\n    const numIndicators = (this.showCVD ? 1 : 0) + (this.showOI ? 1 : 0) + (this.showFundingRate ? 1 : 0);\n    return totalHeight * (1 - indicatorsRatio) - numIndicators * 2; // 2px gap per indicator\n  }\n\n  /** Returns the height of the CVD pane. */\n  cvdHeight(): number {\n    if (!this.showCVD) return 0;\n    const totalHeight = this.canvasHeight - this.margin.top - this.margin.bottom - this.deltaTableHeight;\n    return totalHeight * this.cvdHeightRatio;\n  }\n\n  /** Returns the height of the delta table. */\n  getDeltaTableHeight(): number {\n    return this.deltaTableHeight;\n  }\n\n  /** Returns the Y coordinate where the CVD pane starts. */\n  cvdOriginY(): number {\n    return this.margin.top + this.chartHeight() + 2; // + 2px gap\n  }\n\n  /** Returns the height of the OI pane. */\n  oiHeight(): number {\n    if (!this.showOI) return 0;\n    const totalHeight = this.canvasHeight - this.margin.top - this.margin.bottom - this.deltaTableHeight;\n    return totalHeight * this.oiHeightRatio;\n  }\n\n  /** Returns the Y coordinate where the OI pane starts. */\n  oiOriginY(): number {\n    return this.cvdOriginY() + this.cvdHeight() + (this.showCVD ? 2 : 0);\n  }\n\n  /** Returns the height of the Funding Rate pane. */\n  fundingRateHeight(): number {\n    if (!this.showFundingRate) return 0;\n    const totalHeight = this.canvasHeight - this.margin.top - this.margin.bottom - this.deltaTableHeight;\n    return totalHeight * this.fundingRateHeightRatio;\n  }\n\n  /** Returns the Y coordinate where the Funding Rate pane starts. */\n  fundingRateOriginY(): number {\n    return this.oiOriginY() + this.oiHeight() + (this.showOI ? 2 : 0);\n  }\n\n  /** Returns the total height reserved for all indicator panes. */\n  private indicatorsPaneHeight(): number {\n    let total = 0;\n    if (this.showCVD) total += this.cvdHeightRatio;\n    if (this.showOI) total += this.oiHeightRatio;\n    if (this.showFundingRate) total += this.fundingRateHeightRatio;\n    return total;\n  }\n\n  /** Maps a CVD value to a Y coordinate within the CVD pane. */\n  cvdToY(value: number, min: number, max: number): number {\n    if (min === max) return this.cvdOriginY() + this.cvdHeight() / 2;\n    const h = this.cvdHeight();\n    const range = max - min;\n    const ratio = (value - min) / range;\n    // Invert Y because canvas Y increases downwards\n    return this.cvdOriginY() + h - ratio * h;\n  }\n\n  /** Returns the margin configuration. */\n  getMargin(): { top: number; bottom: number; left: number; right: number } {\n    return this.margin;\n  }\n\n  /** Returns the current row height in pixels, adjusted for zoom. */\n  rowHeightPx(): number {\n    return this.baseRowPx * this.view.zoomY;\n  }\n\n  /** Returns the scaled spacing between candles, depending on volume footprint mode. */\n  scaledSpacing(): number {\n    if (!this.showVolumeFootprint) {\n      return (10 + 1) * this.view.zoomX; // Candle width + 1px gap when volume footprint is off\n    }\n    if (this.footprintStyle === 'delta') {\n      // Reduced spacing for delta mode (only right-side bars)\n      // BASE_CANDLE (15) + BASE_BOX (55) + GAP (~5-10)\n      return 75 * this.view.zoomX;\n    }\n    return 132 * this.view.zoomX; // Standard spacing (Candle + 2 * Box + gaps)\n  }\n\n  scaledCandle(): number {\n    return 10 * this.view.zoomX; // BASE_CANDLE * zoomX\n  }\n\n  scaledBox(): number {\n    return 55 * this.view.zoomX; // BASE_BOX * zoomX\n  }\n\n  scaledImb(): number {\n    return 3 * this.view.zoomX; // Thinner imbalance boxes\n  }\n\n  shouldShowCellText(): boolean {\n    return (\n      this.view.zoomX >= this.TEXT_VIS.minZoomX &&\n      this.rowHeightPx() >= this.TEXT_VIS.minRowPx &&\n      this.scaledBox() >= this.TEXT_VIS.minBoxPx\n    );\n  }\n\n  priceToRowIndex(price: number): number {\n    return (this.ladderTop - price) / this.TICK + this.view.offsetRows;\n  }\n\n  rowIndexToPrice(row: number): number {\n    return this.ladderTop - (row - this.view.offsetRows) * this.TICK;\n  }\n\n  rowToY(row: number): number {\n    return this.margin.top + row * this.rowHeightPx();\n  }\n\n  priceToY(price: number): number {\n    return this.rowToY(this.priceToRowIndex(price));\n  }\n\n  /** Returns the offset of the candle wick (center) from the start of the candle's slot. */\n  private wickOffset(): number {\n    if (this.footprintStyle === 'delta') {\n      // Shift left: half candle width + small gap\n      return this.scaledCandle() / 2 + 2;\n    }\n    // Centered in slot\n    return this.scaledSpacing() / 2;\n  }\n\n  indexToX(i: number, startIndex: number): number {\n    const s = this.scaledSpacing();\n    return this.margin.left + (i - startIndex) * s + this.wickOffset() - this.xShift;\n  }\n\n  /** Returns the geometric center of the column/slot. ideal for text alignment. */\n  getSlotCenter(i: number, startIndex: number): number {\n    const s = this.scaledSpacing();\n    return this.margin.left + (i - startIndex) * s + s / 2 - this.xShift;\n  }\n\n  getVisibleRange(): { startIndex: number; endIndex: number } {\n    const s = this.scaledSpacing();\n    const pixelOffset = this.view.offsetX;\n    const startFloat = pixelOffset / s;\n    const startIndex = Math.max(0, Math.floor(startFloat));\n    const contentW = this.canvasWidth - this.margin.left - this.margin.right;\n    const visibleCount = Math.ceil(contentW / s) + 2;\n    const endIndex = Math.min(this.data.length, startIndex + visibleCount);\n    return { startIndex, endIndex };\n  }\n\n  computePriceBarLabels(): Array<{ price: number; y: number }> {\n    const pixelSpacing = 28;\n    const chartHeightPx = this.chartHeight();\n    const maxLabels = 7;\n    const numLabels = Math.min(maxLabels, Math.floor(chartHeightPx / pixelSpacing));\n\n    const pTop = this.rowIndexToPrice(0);\n    const pBot = this.rowIndexToPrice(Math.floor(chartHeightPx / this.rowHeightPx()));\n    const pMin = Math.min(pTop, pBot);\n    const pMax = Math.max(pTop, pBot);\n    const priceRange = pMax - pMin;\n\n    const stepPrice = Math.max(this.TICK, priceRange / Math.max(1, numLabels - 1));\n\n    let start = Math.ceil(pMin / stepPrice) * stepPrice;\n    const out = [];\n    for (let price = start; price <= pMax + 1e-6; price += stepPrice) {\n      out.push({ price: Math.round(price), y: this.priceToY(price) });\n    }\n    return out;\n  }\n\n  formatK(v: number): string {\n    return formatNumber(v);\n  }\n\n  private get xShift(): number {\n    const s = this.scaledSpacing();\n    const pixelOffset = this.view.offsetX;\n    const startFloat = pixelOffset / s;\n    const startIndex = Math.max(0, Math.floor(startFloat));\n    const shift = pixelOffset - startIndex * s;\n    return shift < 0 ? shift + s : shift;\n  }\n\n  screenXToDataIndex(screenX: number): number {\n    const vr = this.getVisibleRange();\n    const s = this.scaledSpacing();\n    // Reverse the calculation: x = margin + relative_i * s + wickOffset - xShift\n    // relative_i * s = x - margin - wickOffset + xShift\n    const relativeX = screenX - this.margin.left + this.xShift - this.wickOffset();\n    return vr.startIndex + Math.floor(relativeX / s);\n  }\n\n  // Exact fractional data index for precise drawing coordinates\n  screenXToExactDataIndex(screenX: number): number {\n    const vr = this.getVisibleRange();\n    const s = this.scaledSpacing();\n    const relativeX = screenX - this.margin.left + this.xShift - this.wickOffset();\n    return vr.startIndex + relativeX / s;\n  }\n\n  screenYToPrice(screenY: number): number {\n    // Use the exact same calculation as the crosshair\n    return this.rowIndexToPrice(\n      (screenY - this.margin.top) / this.rowHeightPx() + this.view.offsetRows\n    );\n  }\n\n  private get ladderTop(): number {\n    if (this.ladderTopDirty) {\n      this.cachedLadderTop = this.calculateLadderTop();\n      this.ladderTopDirty = false;\n    }\n    return this.cachedLadderTop;\n  }\n\n  private calculateLadderTop(): number {\n    if (this.data.length === 0) return 10000;\n\n    // Collect all footprint prices\n    const allPrices = new Set<number>();\n    for (const candle of this.data) {\n      for (const level of candle.footprint) {\n        allPrices.add(level.price);\n      }\n      // Include OHLC\n      allPrices.add(candle.open);\n      allPrices.add(candle.high);\n      allPrices.add(candle.low);\n      allPrices.add(candle.close);\n    }\n\n    if (allPrices.size === 0) {\n      return Math.ceil(Math.max(...this.data.map(c => c.high)) / this.TICK) * this.TICK + 10 * this.TICK;\n    }\n\n    const prices = Array.from(allPrices).sort((a, b) => b - a);\n    const maxPrice = prices[0];\n    const minPrice = prices[prices.length - 1];\n    const range = maxPrice - minPrice;\n\n    // Add padding: minimum 2 ticks or 10% of range\n    const padding = Math.max(this.TICK * 2, range * 0.1);\n    return maxPrice + padding;\n  }\n\n  public invalidateLadderTop(): void {\n    this.ladderTopDirty = true;\n  }\n}","/**\n * Manages user interactions and input handling for the Volume Footprint Chart.\n * Processes mouse/touch events, wheel zooming, panning, and measurement tools.\n */\n\nimport { VFCEvents, MeasureRectangle } from './types';\nimport { Scales } from './scales';\n\n/**\n * Handles user interactions with the chart, including mouse/touch events, zooming, panning, and measuring.\n * Manages crosshair positioning, momentum scrolling, and measurement tools.\n */\nexport class Interactions {\n  private canvas: HTMLCanvasElement;\n  private margin: { top: number; bottom: number; left: number; right: number };\n  private view: { zoomY: number; zoomX: number; offsetRows: number; offsetX: number };\n  private events: VFCEvents & { onCvdResize?: (ratio: number) => void };\n  private crosshair: { x: number; y: number; visible: boolean };\n  private momentum = { raf: 0, vx: 0, lastTs: 0, active: false };\n  private readonly PAN_INVERT = { x: true, y: false };\n  private scales: Scales;\n\n  // CVD resize state\n  private isDraggingCvdDivider = false;\n  private cvdDividerHitZone = 6; // pixels around the divider that are draggable\n\n  // Table resize state\n  private isDraggingTableDivider = false;\n\n  // Measure state\n  private isMeasureMode = false;\n  private measureRectangle: MeasureRectangle | null = null;\n\n  /**\n   * Creates an Interactions instance to handle user input for the chart.\n   * @param canvas The HTML canvas element\n   * @param margin Chart margin configuration\n   * @param view Current view state (zoom and offset)\n   * @param events Event callbacks\n   * @param crosshair Crosshair position state\n   * @param scales Scales instance for coordinate conversions\n   */\n  constructor(\n    canvas: HTMLCanvasElement,\n    margin: { top: number; bottom: number; left: number; right: number },\n    view: { zoomY: number; zoomX: number; offsetRows: number; offsetX: number },\n    events: VFCEvents & { onCvdResize?: (ratio: number) => void },\n    crosshair: { x: number; y: number; visible: boolean },\n    scales: Scales\n  ) {\n    this.canvas = canvas;\n    this.margin = margin;\n    this.view = view;\n    this.events = events;\n    this.crosshair = crosshair;\n    this.scales = scales;\n    this.setupMouseTracking();\n  }\n\n  /**\n   * Handles mouse wheel events for zooming different chart areas.\n   * Zooms price axis when over price bar, time axis when over timeline, both when over chart body.\n   * @param e The wheel event\n   */\n  handleWheel(e: WheelEvent): void {\n    e.preventDefault();\n    const rect = this.canvas.getBoundingClientRect();\n    const mx = e.clientX - rect.left;\n    const my = e.clientY - rect.top;\n    const chartRight = this.canvas.clientWidth - this.margin.right;\n    const canvasHeight = this.canvas.height / window.devicePixelRatio;\n    const yBottom = canvasHeight - this.margin.bottom;\n\n    const overPriceBar = mx > chartRight;\n    const overTimeline = my > yBottom;\n    const overChartBody = !overPriceBar && !overTimeline;\n\n    if (overPriceBar) {\n      this.view.zoomY *= (e.deltaY < 0 ? 1.1 : 0.9);\n      this.view.zoomY = Math.max(0.1, Math.min(8, this.view.zoomY));\n      this.events.onZoom?.(this.view.zoomX, this.view.zoomY);\n      this.clearMeasureRectangle();\n    } else if (overChartBody) {\n      const prev = this.view.zoomX;\n      const factor = (e.deltaY < 0 ? 1.1 : 0.9);\n      const next = Math.max(0.1, Math.min(8, prev * factor));\n      this.view.zoomX = next;\n      // Reduce price axis zoom sensitivity for smoother transitions\n      this.view.zoomY *= Math.pow(factor, 0.7);\n      this.view.zoomY = Math.max(0.1, Math.min(8, this.view.zoomY));\n      // Adjust offsetX to keep the same startIndex (prevent scrolling)\n      this.view.offsetX *= (next / prev);\n      this.events.onZoom?.(this.view.zoomX, this.view.zoomY);\n      this.clearMeasureRectangle();\n    } else if (overTimeline) {\n      // Timeline zoom: same mechanism as chart but only affects X axis\n      const prev = this.view.zoomX;\n      const factor = (e.deltaY < 0 ? 1.1 : 0.9);\n      const next = Math.max(0.1, Math.min(8, prev * factor));\n      this.view.zoomX = next;\n      this.view.offsetX *= (next / prev);\n      this.events.onZoom?.(this.view.zoomX, this.view.zoomY);\n      this.clearMeasureRectangle();\n    }\n  }\n\n  handlePointerDown(e: PointerEvent): void {\n    const rect = this.canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    // Check if clicking on CVD divider (the border between main chart and CVD pane)\n    const cvdHeight = this.scales.cvdHeight();\n    const cvdOriginY = this.scales.cvdOriginY();\n    if (cvdHeight > 0 && Math.abs(y - cvdOriginY) <= this.cvdDividerHitZone) {\n      this.handleCvdDividerDrag(e, rect);\n      return;\n    }\n\n    // Check if clicking on Table divider (top edge of delta table)\n    const tableHeight = this.scales.getDeltaTableHeight();\n    const canvasHeight = this.canvas.height / window.devicePixelRatio;\n    const tableY = canvasHeight - this.margin.bottom - tableHeight;\n    if (tableHeight > 0 && Math.abs(y - tableY) <= this.cvdDividerHitZone) {\n      this.handleTableDividerDrag(e, rect);\n      return;\n    }\n\n    // Check if we're in measure mode\n    if (this.isMeasureMode) {\n      this.handleMeasurePointerDown(e, x, y);\n      return;\n    }\n\n    // Normal pan mode\n    this.canvas.setPointerCapture(e.pointerId);\n    let lastX = e.clientX;\n    let lastY = e.clientY;\n    let velX = 0;\n    let lastT = performance.now();\n\n    const onMove = (ev: PointerEvent) => {\n      const now = performance.now();\n      const dt = Math.max(1, now - lastT);\n      const dx = ev.clientX - lastX;\n      const dy = ev.clientY - lastY;\n      lastX = ev.clientX;\n      lastY = ev.clientY;\n      lastT = now;\n\n      // Use proper rowHeightPx() method instead of hardcoded 22\n      this.view.offsetX += (this.PAN_INVERT.x ? -dx : dx);\n      this.view.offsetRows += (this.PAN_INVERT.y ? -dy : dy) / this.scales.rowHeightPx();\n      velX = (this.PAN_INVERT.x ? -dx : dx) / dt;\n      this.events.onPan?.(this.view.offsetX, this.view.offsetRows);\n      this.clearMeasureRectangle();\n    };\n\n    const onUp = () => {\n      this.canvas.releasePointerCapture(e.pointerId);\n      this.canvas.removeEventListener('pointermove', onMove);\n      this.canvas.removeEventListener('pointerup', onUp);\n      this.canvas.removeEventListener('pointercancel', onUp);\n      // Removed momentum to stop chart from continuing to move after mouse release\n    };\n\n    this.canvas.addEventListener('pointermove', onMove);\n    this.canvas.addEventListener('pointerup', onUp);\n    this.canvas.addEventListener('pointercancel', onUp);\n  }\n\n\n  private handleMeasurePointerDown(e: PointerEvent, x: number, y: number): void {\n    // Check if we're over the chart area\n    const chartRight = this.canvas.clientWidth - this.margin.right;\n    const canvasHeight = this.canvas.height / window.devicePixelRatio;\n    const yBottom = canvasHeight - this.margin.bottom;\n\n    const overChartBody = x >= this.margin.left && x <= chartRight &&\n      y >= this.margin.top && y <= yBottom;\n\n    if (!overChartBody) return;\n\n    this.canvas.setPointerCapture(e.pointerId);\n\n    // Start measuring from this point - store screen coordinates directly\n    this.measureRectangle = {\n      startX: x,\n      startY: y,\n      endX: x,\n      endY: y\n    };\n\n    const onMove = (ev: PointerEvent) => {\n      const rect = this.canvas.getBoundingClientRect();\n      const currentX = ev.clientX - rect.left;\n      const currentY = ev.clientY - rect.top;\n\n      // Update the end point of the measure rectangle\n      if (this.measureRectangle) {\n        this.measureRectangle.endX = currentX;\n        this.measureRectangle.endY = currentY;\n      }\n\n      // Trigger redraw\n      this.events.onMouseMove?.(currentX, currentY, true);\n    };\n\n    const onUp = () => {\n      this.canvas.releasePointerCapture(e.pointerId);\n      this.canvas.removeEventListener('pointermove', onMove);\n      this.canvas.removeEventListener('pointerup', onUp);\n      this.canvas.removeEventListener('pointercancel', onUp);\n    };\n\n    this.canvas.addEventListener('pointermove', onMove);\n    this.canvas.addEventListener('pointerup', onUp);\n    this.canvas.addEventListener('pointercancel', onUp);\n  }\n\n\n\n\n\n  // Public methods for controlling measure mode\n  setMeasureMode(enabled: boolean): void {\n    this.isMeasureMode = enabled;\n    if (!enabled) {\n      this.measureRectangle = null;\n    }\n  }\n\n  getMeasureMode(): boolean {\n    return this.isMeasureMode;\n  }\n\n  getMeasureRectangle(): MeasureRectangle | null {\n    return this.measureRectangle;\n  }\n\n  clearMeasureRectangle(): void {\n    this.measureRectangle = null;\n  }\n\n  /** Updates the scales reference when options change */\n  setScales(scales: Scales): void {\n    this.scales = scales;\n  }\n\n  private handleCvdDividerDrag(e: PointerEvent, rect: DOMRect): void {\n    this.isDraggingCvdDivider = true;\n    this.canvas.setPointerCapture(e.pointerId);\n    this.canvas.style.cursor = 'ns-resize';\n\n    const canvasHeight = this.canvas.height / window.devicePixelRatio;\n    const availableHeight = canvasHeight - this.margin.top - this.margin.bottom;\n\n    const onMove = (ev: PointerEvent) => {\n      const y = ev.clientY - rect.top;\n      // Calculate new ratio based on where the divider is dragged\n      // CVD is at the bottom, so we calculate how much space is below the drag point\n      const cvdHeight = canvasHeight - this.margin.bottom - y;\n      let newRatio = cvdHeight / availableHeight;\n      // Clamp the ratio between 0.1 and 0.6\n      newRatio = Math.max(0.1, Math.min(0.6, newRatio));\n      this.events.onCvdResize?.(newRatio);\n    };\n\n    const onUp = () => {\n      this.isDraggingCvdDivider = false;\n      this.canvas.releasePointerCapture(e.pointerId);\n      this.canvas.style.cursor = '';\n      this.canvas.removeEventListener('pointermove', onMove);\n      this.canvas.removeEventListener('pointerup', onUp);\n      this.canvas.removeEventListener('pointercancel', onUp);\n    };\n\n    this.canvas.addEventListener('pointermove', onMove);\n    this.canvas.addEventListener('pointerup', onUp);\n    this.canvas.addEventListener('pointercancel', onUp);\n  }\n\n  private handleTableDividerDrag(e: PointerEvent, rect: DOMRect): void {\n    this.isDraggingTableDivider = true;\n    this.canvas.setPointerCapture(e.pointerId);\n    this.canvas.style.cursor = 'ns-resize';\n\n    const canvasHeight = this.canvas.height / window.devicePixelRatio;\n\n    const onMove = (ev: PointerEvent) => {\n      const y = ev.clientY - rect.top;\n      // Calculate new table height\n      // Table bottom is fixed at canvasHeight - margin.bottom\n      // Table top is dragging point y\n      const tableBottom = canvasHeight - this.margin.bottom;\n      let newHeight = tableBottom - y;\n\n      // Enforce minimum height (e.g. 10px) and max height\n      newHeight = Math.max(10, Math.min(canvasHeight * 0.8, newHeight));\n\n      this.events.onTableResize?.(newHeight);\n    };\n\n    const onUp = () => {\n      this.isDraggingTableDivider = false;\n      this.canvas.releasePointerCapture(e.pointerId);\n      this.canvas.style.cursor = '';\n      this.canvas.removeEventListener('pointermove', onMove);\n      this.canvas.removeEventListener('pointerup', onUp);\n      this.canvas.removeEventListener('pointercancel', onUp);\n    };\n\n    this.canvas.addEventListener('pointermove', onMove);\n    this.canvas.addEventListener('pointerup', onUp);\n    this.canvas.addEventListener('pointercancel', onUp);\n  }\n\n  private cancelMomentum(): void {\n    if (this.momentum.raf) {\n      cancelAnimationFrame(this.momentum.raf);\n      this.momentum.raf = 0;\n    }\n    this.momentum.active = false;\n  }\n\n  private startMomentum(vx: number): void {\n    this.momentum.vx = vx;\n    this.momentum.lastTs = 0;\n    this.momentum.active = true;\n    if (!this.momentum.raf) {\n      this.momentum.raf = requestAnimationFrame(this.stepMomentum.bind(this));\n    }\n  }\n\n  private stepMomentum(ts: number): void {\n    if (!this.momentum.active) {\n      this.momentum.raf = 0;\n      return;\n    }\n    if (!this.momentum.lastTs) this.momentum.lastTs = ts;\n    const dt = ts - this.momentum.lastTs;\n    this.momentum.lastTs = ts;\n    this.view.offsetX += this.momentum.vx * dt;\n    this.momentum.vx *= 0.98;\n    if (Math.abs(this.momentum.vx) < 0.001) {\n      this.cancelMomentum();\n    }\n  }\n\n  private setupMouseTracking(): void {\n    this.canvas.addEventListener('mousemove', this.handleMouseMove.bind(this));\n    this.canvas.addEventListener('mouseleave', this.handleMouseLeave.bind(this));\n  }\n\n  private handleMouseMove(e: MouseEvent): void {\n    const rect = this.canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    // Check if mouse is over CVD divider\n    const cvdHeight = this.scales.cvdHeight();\n    const cvdOriginY = this.scales.cvdOriginY();\n\n    // Check if mouse is over Table divider\n    const tableHeight = this.scales.getDeltaTableHeight();\n    const canvasHeight = this.canvas.height / window.devicePixelRatio;\n    const tableY = canvasHeight - this.margin.bottom - tableHeight;\n\n    if (cvdHeight > 0 && Math.abs(y - cvdOriginY) <= this.cvdDividerHitZone) {\n      this.canvas.style.cursor = 'ns-resize';\n    } else if (tableHeight > 0 && Math.abs(y - tableY) <= this.cvdDividerHitZone) {\n      this.canvas.style.cursor = 'ns-resize';\n    } else if (!this.isDraggingCvdDivider && !this.isDraggingTableDivider) {\n      this.canvas.style.cursor = '';\n    }\n\n    // Check if mouse is over the chart area\n    const chartRight = this.canvas.clientWidth - this.margin.right;\n    const yBottom = canvasHeight - this.margin.bottom;\n\n    const overChartBody = x >= this.margin.left && x <= chartRight &&\n      y >= this.margin.top && y <= yBottom;\n\n    const wasVisible = this.crosshair.visible;\n    if (overChartBody) {\n      this.crosshair.x = x;\n      this.crosshair.y = y;\n      this.crosshair.visible = true;\n    } else {\n      this.crosshair.visible = false;\n    }\n\n    // Only trigger redraw when crosshair state changes to avoid excessive redraws\n    if (this.crosshair.visible !== wasVisible || this.crosshair.visible) {\n      this.events.onMouseMove?.(x, y, this.crosshair.visible);\n    }\n  }\n\n  private handleMouseLeave(): void {\n    this.crosshair.visible = false;\n    this.events.onMouseMove?.(-1, -1, false);\n  }\n}","/**\n * Footprint-specific drawing functions for the Volume Footprint Chart.\n * Handles rendering of volume profiles, imbalance markers, and related visualizations.\n */\n\nimport { CandleData } from '../types';\nimport { Scales } from '../scales';\nimport { createVolumeColorMappers, computeVolumeArea } from '../helpers/utils';\n\n/**\n * Draws the footprint volume boxes for buy and sell volumes at each price level.\n */\nexport function drawFootprintBoxes(\n  ctx: CanvasRenderingContext2D,\n  rows: any[],\n  pocIdx: number,\n  enableProfile: boolean,\n  leftX: number,\n  rightX: number,\n  scales: Scales,\n  theme: any\n): { minRow: number, maxRow: number, totBuy: number, totSell: number } {\n  const sideMax = Math.max(...rows.map(f => Math.max(f.buy, f.sell)), 1);\n  const buyBase = theme.volumeBuyBase ?? 0.15;\n  const sellBase = theme.volumeSellBase ?? 0.15;\n  const { buyRGBA, sellRGBA } = createVolumeColorMappers(sideMax, buyBase, sellBase);\n\n  let minRow = Infinity, maxRow = -Infinity;\n  let totBuy = 0, totSell = 0;\n\n  for (let r = 0; r < rows.length; r++) {\n    const f = rows[r];\n    const row = scales.priceToRowIndex(f.price);\n    const yTop = scales.rowToY(row - 0.5);\n    const yBot = scales.rowToY(row + 0.5);\n    const h = Math.max(1, yBot - yTop);\n    minRow = Math.min(minRow, row - 0.5);\n    maxRow = Math.max(maxRow, row + 0.5);\n    totBuy += f.buy;\n    totSell += f.sell;\n\n    const isPOC = enableProfile && (r === pocIdx);\n    // Only draw if the row is visible (within chart bounds)\n    const margin = scales.getMargin();\n    const chartBottom = margin.top + scales.chartHeight();\n    if (yTop >= margin.top && yBot <= chartBottom) {\n      ctx.fillStyle = isPOC ? (theme.pocColor || '#808080') : sellRGBA(f.sell);\n      ctx.fillRect(leftX, yTop, scales.scaledBox(), h);\n      ctx.fillStyle = isPOC ? (theme.pocColor || '#808080') : buyRGBA(f.buy);\n      ctx.fillRect(rightX, yTop, scales.scaledBox(), h);\n    }\n  }\n\n  return { minRow, maxRow, totBuy, totSell };\n}\n\n/**\n * Draws the footprint with delta bars (Delta Volume mode).\n */\nexport function drawDeltaFootprintBoxes(\n  ctx: CanvasRenderingContext2D,\n  rows: any[],\n  leftX: number,\n  rightX: number,\n  scales: Scales,\n  theme: any,\n  zoomX: number\n): { minRow: number, maxRow: number, totBuy: number, totSell: number } {\n  const maxTotalVol = Math.max(...rows.map(f => f.buy + f.sell), 1);\n  // Calculate max abs delta for color intensity\n  const maxAbsDelta = Math.max(...rows.map(f => Math.abs(f.buy - f.sell)), 1);\n\n  // Available width for the bar (right side of candle)\n  const barMaxWidth = scales.scaledBox(); // Use the standard box width as max width\n\n  let minRow = Infinity, maxRow = -Infinity;\n  let totBuy = 0, totSell = 0;\n\n  for (let r = 0; r < rows.length; r++) {\n    const f = rows[r];\n    const row = scales.priceToRowIndex(f.price);\n    const yTop = scales.rowToY(row - 0.5);\n    const yBot = scales.rowToY(row + 0.5);\n    const h = Math.max(1, yBot - yTop);\n    minRow = Math.min(minRow, row - 0.5);\n    maxRow = Math.max(maxRow, row + 0.5);\n    totBuy += f.buy;\n    totSell += f.sell;\n\n    const total = f.buy + f.sell;\n    const delta = f.buy - f.sell;\n\n    // Only draw if visible\n    const margin = scales.getMargin();\n    const chartBottom = margin.top + scales.chartHeight();\n\n    if (yTop >= margin.top && yBot <= chartBottom) {\n      // Calculate bar width based on Total Volume relative to max in this candle\n      // Available width is effectively the whole slot minus margin/wick\n      // But scaledBox() returns the width of ONE SIDE (approx 55px).\n      // We want to use the full available width on the right of the wick.\n      // Wick is at leftX + scaledCandle()/2.\n      // Space extends to leftX + scaledCandle()/2 + scaledBox().\n      const barWidth = (total / maxTotalVol) * barMaxWidth;\n\n      // Color based on Delta\n      const isPos = delta >= 0;\n      const color = isPos ? (theme.deltaPositive || '#16a34a') : (theme.deltaNegative || '#dc2626');\n\n      // Opacity based on Delta magnitude relative to max delta\n      // Base opacity 0.3, max 1.0\n      const opacity = 0.3 + 0.7 * (Math.abs(delta) / maxAbsDelta);\n\n      ctx.fillStyle = color;\n      ctx.globalAlpha = opacity;\n\n      // Draw main bar on the right side\n      // rightX is the right edge of the candle body\n      ctx.fillRect(rightX, yTop, barWidth, h);\n\n      ctx.globalAlpha = 1.0; // Reset alpha\n\n      // Draw Delta Value Text\n      if (scales.shouldShowCellText()) {\n        const fontSize = Math.max(8, Math.min(16, 11 * zoomX));\n        ctx.font = `${fontSize}px system-ui`;\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'middle';\n        ctx.fillStyle = theme.textColorBright || '#ddd';\n\n        // Draw text slightly inside or outside depending on width? \n        // Request said: \"show only the delta on the right side of each candle, with bars\"\n        // Let's put text just to the right of the bar start, or centered in bar if wide enough?\n        // Standard approach: Text overlaying the bar\n        if (barWidth > 20) {\n          ctx.fillText(scales.formatK(delta), rightX + 2, yTop + h / 2);\n        } else {\n          // If bar is too small, maybe draw outside? Or just draw anyway?\n          // Let's draw it anyway, usually fine.\n          ctx.fillText(scales.formatK(delta), rightX + 2, yTop + h / 2);\n        }\n      }\n    }\n  }\n\n  return { minRow, maxRow, totBuy, totSell };\n}\n\n/**\n * Draws imbalance markers for levels where buy or sell volume significantly exceeds adjacent levels.\n */\nexport function drawImbalanceMarkers(\n  ctx: CanvasRenderingContext2D,\n  rows: any[],\n  leftX: number,\n  rightX: number,\n  scales: Scales,\n  theme: any\n): void {\n  for (let r = 0; r < rows.length; r++) {\n    const f = rows[r];\n    const prev = rows[r - 1];\n    const next = rows[r + 1];\n    const row = scales.priceToRowIndex(f.price);\n    const yTop = scales.rowToY(row - 0.5);\n    const yBot = scales.rowToY(row + 0.5);\n    const h = Math.max(1, yBot - yTop);\n    if (prev && f.sell >= 3 * Math.max(1, prev.buy)) {\n      ctx.fillStyle = theme.imbalanceSell || '#dc2626';\n      ctx.fillRect(leftX - scales.scaledImb() - 1, yTop, scales.scaledImb(), h);\n    }\n    if (next && f.buy >= 3 * Math.max(1, next.sell)) {\n      ctx.fillStyle = theme.imbalanceBuy || '#16a34a';\n      ctx.fillRect(rightX + scales.scaledBox() + 1, yTop, scales.scaledImb(), h);\n    }\n  }\n}\n\n/**\n * Draws volume numbers inside the footprint boxes.\n */\nexport function drawVolumeNumbers(\n  ctx: CanvasRenderingContext2D,\n  rows: any[],\n  pocIdx: number,\n  enableProfile: boolean,\n  leftX: number,\n  rightX: number,\n  scales: Scales,\n  theme: any,\n  zoomX: number\n): void {\n  const fontSize = Math.max(8, Math.min(16, 11 * zoomX));\n  ctx.font = `${fontSize}px system-ui`;\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'middle';\n  for (let r = 0; r < rows.length; r++) {\n    const f = rows[r];\n    const row = scales.priceToRowIndex(f.price);\n    const y = scales.rowToY(row);\n    const isPOC = enableProfile && (r === pocIdx);\n    ctx.fillStyle = isPOC ? (theme.pocTextColor || theme.textColorBright || '#ffffff') : (theme.textColorBright || '#ddd');\n    ctx.fillText(scales.formatK(f.sell), leftX + scales.scaledBox() / 2, y);\n    ctx.fillText(scales.formatK(f.buy), rightX + scales.scaledBox() / 2, y);\n  }\n}\n\n/**\n * Draws the Value Area High (VAH) and Value Area Low (VAL) boundary lines and labels.\n */\nexport function drawValueAreaBoundaries(\n  ctx: CanvasRenderingContext2D,\n  cx: number,\n  half: number,\n  VAH: number,\n  VAL: number,\n  leftX: number,\n  rightX: number,\n  scales: Scales,\n  theme: any,\n  zoomX: number\n): void {\n  const rVah = scales.priceToRowIndex(VAH), rVal = scales.priceToRowIndex(VAL);\n  const yVah = scales.rowToY(rVah - 0.5);\n  const yVal = scales.rowToY(rVal + 0.5);\n  const rightEdge = rightX + scales.scaledBox();\n\n  ctx.save();\n  ctx.setLineDash([4, 2]);\n  ctx.strokeStyle = theme.vahValColor || '#9ca3af';\n  ctx.lineWidth = 3; // Make VAH/VAL lines thicker\n  ctx.beginPath();\n  ctx.moveTo(leftX, yVah);\n  ctx.lineTo(rightEdge, yVah);\n  ctx.stroke();\n  ctx.beginPath();\n  ctx.moveTo(leftX, yVal);\n  ctx.lineTo(rightEdge, yVal);\n  ctx.stroke();\n  ctx.setLineDash([]);\n  // ctx.lineWidth = 1; // Reset line width\n\n  const vahFontSize = Math.max(6, Math.min(12, 8 * zoomX));\n  ctx.fillStyle = theme.vahValLabelColor || '#cfd3d6';\n  ctx.font = `${vahFontSize}px monospace`;\n  ctx.textAlign = 'left';\n  ctx.textBaseline = 'middle';\n  const labelX = cx - half - scales.scaledBox() + 3;\n  ctx.fillText('VAH', labelX, yVah);\n  ctx.fillText('VAL', labelX, yVal);\n  ctx.restore();\n}\n\n/**\n * Draws the delta (buy - sell) and total volume labels below the footprint.\n */\nexport function drawDeltaTotalLabels(\n  ctx: CanvasRenderingContext2D,\n  cx: number,\n  maxRow: number,\n  totBuy: number,\n  totSell: number,\n  totalVol: number,\n  scales: Scales,\n  theme: any,\n  zoomX: number,\n  slotCenter?: number\n): void {\n  const yLowFootprint = scales.rowToY(maxRow) + 2;\n  const delta = totBuy - totSell;\n  const deltaPercent = totalVol > 0 ? (delta / totalVol) * 100 : 0;\n  const deltaFontSize = Math.max(8, Math.min(18, 12 * zoomX));\n  const xPos = slotCenter !== undefined ? slotCenter : cx;\n\n  ctx.textAlign = 'center';\n  ctx.font = `${deltaFontSize}px system-ui`;\n  ctx.fillStyle = delta >= 0 ? (theme.deltaPositive || '#16a34a') : (theme.deltaNegative || '#dc2626');\n  ctx.fillText(`Delta ${scales.formatK(delta)}`, xPos, yLowFootprint + 14);\n  ctx.fillText(`${deltaPercent >= 0 ? '+' : ''}${deltaPercent.toFixed(1)}%`, xPos, yLowFootprint + 28);\n  ctx.fillStyle = theme.totalColor || '#fff';\n  ctx.fillText(`Total ${scales.formatK(totalVol)}`, xPos, yLowFootprint + 46);\n}\n\n/**\n * Draws the traditional candlestick wick (high/low line) and body (open/close rectangle).\n */\nexport function drawCandleWickAndBody(\n  ctx: CanvasRenderingContext2D,\n  cx: number,\n  half: number,\n  candle: CandleData,\n  scales: Scales,\n  theme: any\n): void {\n  const yHigh = scales.priceToY(candle.high);\n  const yLow = scales.priceToY(candle.low);\n  const yOpen = scales.priceToY(candle.open);\n  const yClose = scales.priceToY(candle.close);\n  const bull = candle.close >= candle.open;\n  const color = bull ? (theme.candleBull || '#26a69a') : (theme.candleBear || '#ef5350');\n  ctx.strokeStyle = color;\n  ctx.beginPath();\n  ctx.moveTo(cx, yHigh);\n  ctx.lineTo(cx, yLow);\n  ctx.stroke();\n  ctx.fillStyle = color;\n  ctx.fillRect(cx - half, Math.min(yOpen, yClose), scales.scaledCandle(), Math.abs(yClose - yOpen));\n}\n\n/**\n * Main footprint drawing function that orchestrates all footprint-related rendering.\n */\nexport function drawFootprint(\n  ctx: CanvasRenderingContext2D,\n  candle: CandleData,\n  i: number,\n  startIndex: number,\n  scales: Scales,\n  theme: any,\n  view: any,\n  showVolumeFootprint: boolean,\n  showDeltaTable: boolean = false,\n  footprintStyle: 'bid_ask' | 'delta' = 'bid_ask'\n): void {\n  const cx = scales.indexToX(i, startIndex);\n  const half = scales.scaledCandle() / 2;\n\n  if (showVolumeFootprint) {\n    const rows = candle.footprint.slice().sort((a, b) => b.price - a.price);\n\n    // For delta style, we don't necessarily need profile logic (VAH/VAL/POC) explicitly for coloring,\n    // but we might want POC calculation if we were to highlight it. \n    // The request didn't specify POC highlighting for Delta style, but let's keep it consistent if needed.\n    // For now, let's stick to the specific request for Delta style.\n\n    const { pocIdx, vahIdx, valIdx, VAH, VAL, totalVol } = computeVolumeArea(rows);\n\n    const leftX = cx - half - scales.scaledBox();\n    const rightX = cx + half;\n\n    let stats;\n\n    if (footprintStyle === 'delta') {\n      // Delta Style Rendering\n      // We only use the right side for bars. \n      // leftX is usually where Sell volume is. available space is scales.scaledBox().\n      // We can use the space from rightX onwards.\n      // Note: Standard footprint allocates space on LEFT and RIGHT of candle.\n      // If we only draw on RIGHT, we might want to respect the grid columns.\n      // The 'scaledBox' is the width of one side (Bid or Ask). \n      // So total width allocated per candle is candle + 2 * box.\n\n      stats = drawDeltaFootprintBoxes(ctx, rows, leftX, rightX, scales, theme, view.zoomX);\n\n    } else {\n      // Standard Bid/Ask Style\n      const enableProfile = rows.length > 3;\n\n      // Draw footprint boxes and calculate totals\n      stats = drawFootprintBoxes(ctx, rows, pocIdx, enableProfile, leftX, rightX, scales, theme);\n\n      // Draw imbalance markers\n      drawImbalanceMarkers(ctx, rows, leftX, rightX, scales, theme);\n\n      // Draw volume numbers\n      if (scales.shouldShowCellText()) {\n        drawVolumeNumbers(ctx, rows, pocIdx, enableProfile, leftX, rightX, scales, theme, view.zoomX);\n      }\n\n      // Draw VAH/VAL boundaries and labels\n      if (enableProfile && scales.shouldShowCellText()) {\n        drawValueAreaBoundaries(ctx, cx, half, VAH, VAL, leftX, rightX, scales, theme, view.zoomX);\n      }\n    }\n\n    const { minRow, maxRow, totBuy, totSell } = stats;\n\n    // Draw delta and total volume labels (skip if showing in table instead)\n    if (scales.shouldShowCellText() && !showDeltaTable) {\n      const slotCenter = scales.getSlotCenter(i, startIndex);\n      drawDeltaTotalLabels(ctx, cx, maxRow, totBuy, totSell, totalVol, scales, theme, view.zoomX, slotCenter);\n    }\n  }\n\n  // Draw candle wick and body\n  drawCandleWickAndBody(ctx, cx, half, candle, scales, theme);\n}","/**\n * Grid and bounds drawing functions for the Volume Footprint Chart.\n * Handles background grid lines and chart boundary visualization.\n */\n\nimport { Scales } from '../scales';\n\n/**\n * Draws the background grid lines.\n */\nexport function drawGrid(\n  ctx: CanvasRenderingContext2D,\n  width: number,\n  margin: any,\n  scales: Scales,\n  theme: any\n): void {\n  const chartRight = width - margin.right;\n  ctx.strokeStyle = theme.gridColor || '#333';\n  ctx.lineWidth = 1;\n  const gridSpacing = 28;\n  const numLines = Math.floor(scales.chartHeight() / gridSpacing);\n  ctx.beginPath();\n  for (let i = 0; i <= numLines; i++) {\n    const y = margin.top + i * gridSpacing;\n    ctx.moveTo(margin.left, y);\n    ctx.lineTo(chartRight, y);\n  }\n  ctx.stroke();\n\n  const vr = scales.getVisibleRange();\n  ctx.beginPath();\n  for (let i = vr.startIndex; i < vr.endIndex; i++) {\n    const x = scales.indexToX(i, vr.startIndex) + scales.scaledSpacing() / 2;\n    ctx.moveTo(x, margin.top);\n    ctx.lineTo(x, margin.top + scales.chartHeight());\n  }\n  ctx.strokeStyle = theme.gridLightColor || '#252525';\n  ctx.stroke();\n}\n\n/**\n * Draws chart boundary outlines and gutters.\n */\nexport function drawBounds(\n  ctx: CanvasRenderingContext2D,\n  width: number,\n  height: number,\n  margin: any,\n  scales: Scales\n): void {\n  const chartW = width - margin.left - margin.right;\n  const chartH = scales.chartHeight();\n  const rightX = width - margin.right;\n  const bottomY = margin.top + chartH;\n\n  ctx.save();\n  // shade outside chart area slightly so user sees gutters\n  ctx.fillStyle = 'rgba(255, 255, 0, 0.05)';\n  // top gutter\n  ctx.fillRect(0, 0, width, margin.top);\n  // left gutter\n  ctx.fillRect(0, margin.top, margin.left, chartH);\n  // right price bar area (already visible)\n  // bottom timeline area (already visible)\n\n  // outline chart rect\n  ctx.setLineDash([6, 3]);\n  ctx.strokeStyle = '#f59e0b';\n  ctx.lineWidth = 1.5;\n  ctx.strokeRect(margin.left + 0.5, margin.top + 0.5, chartW, chartH);\n\n  // outline price bar and timeline for clarity\n  ctx.strokeStyle = '#22d3ee'; // cyan for scales\n  // price bar\n  ctx.strokeRect(rightX + 0.5, 0.5, margin.right - 1, height - 1);\n  // timeline\n  ctx.strokeRect(margin.left + 0.5, bottomY + 0.5, chartW, margin.bottom - 1);\n  ctx.setLineDash([]);\n  ctx.restore();\n}","/**\n * Crosshair and price label drawing functions for the Volume Footprint Chart.\n * Handles cursor tracking and current price display.\n */\n\nimport { Scales } from '../scales';\n\ninterface IndicatorData {\n  oiData: { timestamp: number; value: number }[];\n  fundingRateData: { timestamp: number; value: number }[];\n  cvdValues: number[];\n}\n\n/**\n * Draws the crosshair lines and labels at the current mouse position.\n */\nexport function drawCrosshair(\n  ctx: CanvasRenderingContext2D,\n  width: number,\n  height: number,\n  margin: any,\n  crosshair: { x: number; y: number; visible: boolean },\n  scales: Scales,\n  data: any[],\n  theme: any,\n  indicatorData?: IndicatorData\n): void {\n  if (!crosshair.visible) return;\n\n  const chartRight = width - margin.right;\n  const chartHeight = scales.chartHeight();\n  const chartBottom = margin.top + chartHeight;\n\n  // Calculate indicator pane boundaries\n  const cvdHeight = scales.cvdHeight();\n  const oiHeight = scales.oiHeight();\n  const frHeight = scales.fundingRateHeight();\n\n  const cvdTop = scales.cvdOriginY();\n  const cvdBottom = cvdTop + cvdHeight;\n  const oiTop = scales.oiOriginY();\n  const oiBottom = oiTop + oiHeight;\n  const frTop = scales.fundingRateOriginY();\n  const frBottom = frTop + frHeight;\n\n  ctx.save();\n\n  // Determine which pane the cursor is in\n  const inMainChart = crosshair.y >= margin.top && crosshair.y <= chartBottom;\n  const inCVD = cvdHeight > 0 && crosshair.y >= cvdTop && crosshair.y <= cvdBottom;\n  const inOI = oiHeight > 0 && crosshair.y >= oiTop && crosshair.y <= oiBottom;\n  const inFR = frHeight > 0 && crosshair.y >= frTop && crosshair.y <= frBottom;\n\n  // Draw vertical line (through all panes)\n  ctx.strokeStyle = theme.textColor || '#aaa';\n  ctx.lineWidth = 1;\n  ctx.setLineDash([2, 2]);\n  ctx.beginPath();\n\n  // Draw vertical line through all active panes\n  let vLineBottom = chartBottom;\n  if (cvdHeight > 0) vLineBottom = cvdBottom;\n  if (oiHeight > 0) vLineBottom = oiBottom;\n  if (frHeight > 0) vLineBottom = frBottom;\n\n  ctx.moveTo(crosshair.x, margin.top);\n  ctx.lineTo(crosshair.x, vLineBottom);\n  ctx.stroke();\n\n  // Draw horizontal line (only in the current pane)\n  ctx.beginPath();\n  if (inMainChart) {\n    ctx.moveTo(margin.left, crosshair.y);\n    ctx.lineTo(chartRight, crosshair.y);\n  } else if (inCVD) {\n    ctx.moveTo(margin.left, crosshair.y);\n    ctx.lineTo(chartRight, crosshair.y);\n  } else if (inOI) {\n    ctx.moveTo(margin.left, crosshair.y);\n    ctx.lineTo(chartRight, crosshair.y);\n  } else if (inFR) {\n    ctx.moveTo(margin.left, crosshair.y);\n    ctx.lineTo(chartRight, crosshair.y);\n  }\n  ctx.stroke();\n  ctx.setLineDash([]);\n\n  // Draw value label on right side based on which pane cursor is in\n  let labelText = '';\n  let labelColor = theme.scaleBackground || '#111';\n  let textColor = theme.textColor || '#aaa';\n\n  if (inMainChart) {\n    // Show price\n    const price = scales.rowIndexToPrice(\n      (crosshair.y - margin.top) / scales.rowHeightPx()\n    );\n    labelText = scales.formatK(price);\n  } else if (inOI && indicatorData && indicatorData.oiData.length > 0) {\n    // Show OI value - calculate based on Y position in OI pane\n    const oiMin = Math.min(...indicatorData.oiData.map(p => p.value));\n    const oiMax = Math.max(...indicatorData.oiData.map(p => p.value));\n    const range = oiMax - oiMin || 1;\n    const ratio = 1 - (crosshair.y - oiTop) / oiHeight;\n    const oiValue = oiMin + ratio * range;\n    labelText = scales.formatK(oiValue);\n    labelColor = '#ff9500'; // Orange for OI\n    textColor = '#fff';\n  } else if (inFR && indicatorData && indicatorData.fundingRateData.length > 0) {\n    // Show Funding Rate value - calculate based on Y position in FR pane\n    const frMin = Math.min(...indicatorData.fundingRateData.map(p => p.value));\n    const frMax = Math.max(...indicatorData.fundingRateData.map(p => p.value));\n    const range = frMax - frMin || 0.0001;\n    const ratio = 1 - (crosshair.y - frTop) / frHeight;\n    const frValue = frMin + ratio * range;\n    labelText = (frValue * 100).toFixed(4) + '%';\n    labelColor = frValue >= 0 ? '#22c55e' : '#ef4444'; // Green/Red for FR\n    textColor = '#fff';\n  } else if (inCVD && indicatorData && indicatorData.cvdValues.length > 0) {\n    // Show CVD value - calculate based on Y position in CVD pane\n    const vr = scales.getVisibleRange();\n    const visibleCVD = indicatorData.cvdValues.slice(vr.startIndex, vr.endIndex);\n    if (visibleCVD.length > 0) {\n      const cvdMin = Math.min(...visibleCVD);\n      const cvdMax = Math.max(...visibleCVD);\n      const range = cvdMax - cvdMin || 1;\n      const ratio = 1 - (crosshair.y - cvdTop) / cvdHeight;\n      const cvdValue = cvdMin + ratio * range;\n      labelText = scales.formatK(cvdValue);\n      labelColor = '#00ffff'; // Cyan for CVD\n      textColor = '#000';\n    }\n  }\n\n  if (labelText) {\n    ctx.font = 'bold 12px system-ui';\n    const textWidth = ctx.measureText(labelText).width;\n    const boxWidth = Math.max(textWidth + 8, margin.right);\n\n    ctx.fillStyle = labelColor;\n    ctx.fillRect(chartRight, crosshair.y - 8, boxWidth, 16);\n    ctx.strokeStyle = theme.scaleBorder || '#444';\n    ctx.strokeRect(chartRight, crosshair.y - 8, boxWidth, 16);\n    ctx.fillStyle = textColor;\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.fillText(labelText, chartRight + boxWidth / 2, crosshair.y);\n  }\n\n  // Draw time label on bottom\n  const yBottom = margin.top + (height - margin.top - margin.bottom);\n  const index = scales.screenXToDataIndex(crosshair.x);\n  let timeStr = '--:--';\n  if (index >= 0 && index < data.length && data[index]) {\n    const date = new Date(data[index].time);\n    const hours = date.getHours().toString().padStart(2, '0');\n    const minutes = date.getMinutes().toString().padStart(2, '0');\n    timeStr = `${hours}:${minutes}`;\n  }\n\n  ctx.fillStyle = theme.scaleBackground || '#111';\n  ctx.fillRect(crosshair.x - 20, yBottom, 40, margin.bottom);\n  ctx.strokeStyle = theme.scaleBorder || '#444';\n  ctx.strokeRect(crosshair.x - 20, yBottom, 40, margin.bottom);\n  ctx.fillStyle = theme.textColor || '#aaa';\n  ctx.font = '11px system-ui';\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'middle';\n  ctx.fillText(timeStr, crosshair.x, yBottom + margin.bottom / 2);\n\n  ctx.restore();\n}\n\n/**\n * Draws the current price label with a dashed line across the chart.\n */\nexport function drawCurrentPriceLabel(\n  ctx: CanvasRenderingContext2D,\n  width: number,\n  lastPrice: number | null,\n  margin: any,\n  scales: Scales,\n  theme: any\n): void {\n  if (!lastPrice) return;\n\n  const right = width - margin.right;\n  const y = scales.priceToY(lastPrice);\n\n  // Get the chart area bounds (main chart only, excluding indicator panes)\n  const chartTop = margin.top;\n  const chartBottom = margin.top + scales.chartHeight();\n\n  // Only draw if the price is within the visible chart area\n  // Clip the Y coordinate to the chart bounds for the label\n  const clampedY = Math.max(chartTop, Math.min(chartBottom, y));\n  const isInChartArea = y >= chartTop && y <= chartBottom;\n\n  ctx.save();\n\n  // Draw dashed line across the chart at the last price level (only within chart area)\n  if (isInChartArea) {\n    ctx.setLineDash([5, 5]);\n    ctx.strokeStyle = theme.textColor || '#aaa';\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    ctx.moveTo(margin.left, y);\n    ctx.lineTo(right, y);\n    ctx.stroke();\n    ctx.setLineDash([]);\n  }\n\n  // Draw price label on the price bar (right side scale area)\n  // Always show the label, but clamp it to the chart area bounds\n  const labelText = scales.formatK(lastPrice);\n  ctx.font = 'bold 12px system-ui';\n  const textWidth = ctx.measureText(labelText).width;\n  const boxWidth = textWidth + 8;\n  const boxHeight = 18;\n\n  // Position the label in the price bar area, clamped to chart bounds\n  const boxX = right + 2;\n  const labelY = Math.max(chartTop + boxHeight / 2, Math.min(chartBottom - boxHeight / 2, y));\n  const boxY = labelY - boxHeight / 2;\n\n  // Draw background\n  ctx.fillStyle = '#26a69a';  // Green background like in the image\n  ctx.fillRect(boxX, boxY, boxWidth, boxHeight);\n\n  // Draw border\n  ctx.strokeStyle = '#ffffff';\n  ctx.lineWidth = 1;\n  ctx.strokeRect(boxX, boxY, boxWidth, boxHeight);\n\n  // Draw price text\n  ctx.fillStyle = '#ffffff';  // White text\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'middle';\n  ctx.fillText(labelText, boxX + boxWidth / 2, labelY);\n\n  ctx.restore();\n}","/**\n * Measurement tool drawing functions for the Volume Footprint Chart.\n * Handles drawing of measurement rectangles and associated data labels.\n */\n\nimport { MeasureRectangle } from '../types';\nimport { Scales } from '../scales';\n\n/**\n * Draws the measurement rectangle and associated data labels.\n */\nexport function drawMeasureRectangle(\n  ctx: CanvasRenderingContext2D,\n  measureRectangle: MeasureRectangle | null,\n  scales: Scales,\n  theme: any\n): void {\n  if (!measureRectangle) return;\n\n  ctx.save();\n\n  // Use screen coordinates directly\n  const startX = measureRectangle.startX;\n  const startY = measureRectangle.startY;\n  const endX = measureRectangle.endX;\n  const endY = measureRectangle.endY;\n\n  // Calculate rectangle bounds\n  const rectX = Math.min(startX, endX);\n  const rectY = Math.min(startY, endY);\n  const rectWidth = Math.abs(endX - startX);\n  const rectHeight = Math.abs(endY - startY);\n\n  // Calculate price and time differences using current screen positions\n  const startPrice = scales.screenYToPrice(startY);\n  const endPrice = scales.screenYToPrice(endY);\n  const startIndex = scales.screenXToDataIndex(startX);\n  const endIndex = scales.screenXToDataIndex(endX);\n\n  const priceDiff = endPrice - startPrice;\n  const timeDiff = endIndex - startIndex;\n  const isPositive = priceDiff >= 0;\n\n  // Draw light green/red rectangle\n  const rectColor = isPositive ? 'rgba(22, 163, 74, 0.2)' : 'rgba(220, 38, 38, 0.2)'; // Light green/red\n  ctx.fillStyle = rectColor;\n  ctx.fillRect(rectX, rectY, rectWidth, rectHeight);\n\n  // Draw rectangle border\n  const borderColor = isPositive ? 'rgba(22, 163, 74, 0.8)' : 'rgba(220, 38, 38, 0.8)';\n  ctx.strokeStyle = borderColor;\n  ctx.lineWidth = 1;\n  ctx.strokeRect(rectX, rectY, rectWidth, rectHeight);\n\n  // Draw measure data box below the rectangle with all details\n  const centerX = rectX + rectWidth / 2;\n\n  // Calculate percentage change\n  const percentChange = startPrice !== 0 ? (priceDiff / startPrice) * 100 : 0;\n\n  // Prepare all text lines\n  const priceSign = priceDiff >= 0 ? '+' : '';\n  const priceText = `${priceSign}${priceDiff.toFixed(2)} (${percentChange >= 0 ? '+' : ''}${percentChange.toFixed(2)}%)`;\n  const startPriceText = `Start: ${startPrice.toFixed(2)}`;\n  const endPriceText = `End: ${endPrice.toFixed(2)}`;\n  const timeSign = timeDiff >= 0 ? '+' : '';\n  const timeText = `T: ${timeSign}${timeDiff} bars`;\n\n  const lines = [priceText, startPriceText, endPriceText, timeText];\n\n  // Bigger font\n  ctx.font = '14px system-ui';\n  const lineHeight = 18;\n  const padding = 8;\n  const maxWidth = Math.max(...lines.map(line => ctx.measureText(line).width));\n  const boxWidth = maxWidth + padding * 2;\n  const boxHeight = lines.length * lineHeight + padding * 2;\n  const boxX = centerX - boxWidth / 2;\n  const boxY = rectY + rectHeight + 8;\n\n  // Box colors\n  const boxColor = isPositive ? '#16a34a' : '#dc2626'; // Green for positive, red for negative\n  const textColor = '#ffffff';\n\n  // Draw box background\n  ctx.fillStyle = boxColor;\n  ctx.fillRect(boxX, boxY, boxWidth, boxHeight);\n\n  // Draw box border\n  ctx.strokeStyle = textColor;\n  ctx.lineWidth = 1;\n  ctx.strokeRect(boxX, boxY, boxWidth, boxHeight);\n\n  // Draw text lines\n  ctx.fillStyle = textColor;\n  ctx.textAlign = 'center';\n  ctx.textBaseline = 'top';\n  lines.forEach((line, index) => {\n    const y = boxY + padding + index * lineHeight;\n    ctx.fillText(line, centerX, y);\n  });\n\n  ctx.restore();\n}","import { CandleData, VFCTheme, MeasureRectangle } from './types';\nimport { Scales } from './scales';\nimport { drawFootprint } from './drawing/footprint';\nimport { drawScales } from './drawing/scales';\nimport { drawGrid, drawBounds } from './drawing/grid';\nimport { drawCrosshair, drawCurrentPriceLabel } from './drawing/crosshair';\nimport { drawMeasureRectangle } from './drawing/measure';\n\n/**\n * Handles all rendering operations for the Volume Footprint Chart.\n * Responsible for drawing grid, chart elements, scales, crosshair, and measurements.\n */\n\nexport class Drawing {\n  private ctx: CanvasRenderingContext2D;\n  private data: CandleData[];\n  private margin: { top: number; bottom: number; left: number; right: number };\n  private view: { zoomY: number; zoomX: number; offsetRows: number; offsetX: number };\n  private showGrid: boolean;\n  private showBounds: boolean;\n  private showVolumeFootprint: boolean;\n  private showVolumeHeatmap: boolean;\n  private volumeHeatmapDynamic: boolean;\n  private scales: Scales;\n  private theme: VFCTheme;\n  private crosshair: { x: number; y: number; visible: boolean };\n  private lastPrice: number | null;\n  private interactions: any;\n  private cvdValues: number[] = [];\n  private showDeltaTable: boolean = false;\n  private tableRowVisibility: {\n    volume?: boolean;\n    volChange?: boolean;\n    buyVol?: boolean;\n    buyVolPercent?: boolean;\n    sellVol?: boolean;\n    sellVolPercent?: boolean;\n    delta?: boolean;\n    deltaPercent?: boolean;\n    minDelta?: boolean;\n    maxDelta?: boolean;\n    poc?: boolean;\n    hlRange?: boolean;\n  } = {};\n  private tableRowHeight: number = 16;\n  private footprintStyle: 'bid_ask' | 'delta' = 'bid_ask';\n\n  // OI and Funding Rate indicator data\n  private oiData: { timestamp: number; value: number }[] = [];\n  private fundingRateData: { timestamp: number; value: number }[] = [];\n  private showOI: boolean = false;\n  private showFundingRate: boolean = false;\n\n  public updateCVD(values: number[]) {\n    this.cvdValues = values;\n  }\n\n  constructor(\n    ctx: CanvasRenderingContext2D,\n    data: CandleData[],\n    margin: { top: number; bottom: number; left: number; right: number },\n    view: { zoomY: number; zoomX: number; offsetRows: number; offsetX: number },\n    showGrid: boolean,\n    showBounds: boolean,\n    showVolumeFootprint: boolean,\n    showVolumeHeatmap: boolean,\n    volumeHeatmapDynamic: boolean,\n    scales: Scales,\n    theme: VFCTheme,\n    crosshair: { x: number; y: number; visible: boolean },\n    lastPrice: number | null,\n    interactions: any,\n    cvdValues: number[] = [],\n    showDeltaTable: boolean = false,\n    tableRowVisibility: typeof Drawing.prototype.tableRowVisibility = {},\n    tableRowHeight: number = 16,\n    footprintStyle: 'bid_ask' | 'delta' = 'bid_ask',\n    showOI: boolean = false,\n    oiHeightRatio: number = 0.15,\n    showFundingRate: boolean = false,\n    fundingRateHeightRatio: number = 0.1\n  ) {\n    this.ctx = ctx;\n    this.data = data;\n    this.margin = margin;\n    this.view = view;\n    this.showGrid = showGrid;\n    this.showBounds = showBounds;\n    this.showVolumeFootprint = showVolumeFootprint;\n    this.showVolumeHeatmap = showVolumeHeatmap;\n    this.volumeHeatmapDynamic = volumeHeatmapDynamic;\n    this.scales = scales;\n    this.theme = theme;\n    this.crosshair = crosshair;\n    this.lastPrice = lastPrice;\n    this.interactions = interactions;\n    this.cvdValues = cvdValues;\n    this.showDeltaTable = showDeltaTable;\n    this.tableRowVisibility = tableRowVisibility;\n    this.tableRowHeight = tableRowHeight;\n    this.footprintStyle = footprintStyle;\n    this.showOI = showOI;\n    this.showFundingRate = showFundingRate;\n  }\n\n  public setShowDeltaTable(show: boolean) {\n    this.showDeltaTable = show;\n  }\n\n  public getShowDeltaTable(): boolean {\n    return this.showDeltaTable;\n  }\n\n  public updateLastPrice(price: number | null): void {\n    this.lastPrice = price;\n  }\n\n  public updateOIData(data: { timestamp: number; value: number }[]): void {\n    this.oiData = data;\n  }\n\n  public updateFundingRateData(data: { timestamp: number; value: number }[]): void {\n    this.fundingRateData = data;\n  }\n\n  public setShowOI(show: boolean): void {\n    this.showOI = show;\n  }\n\n  public setShowFundingRate(show: boolean): void {\n    this.showFundingRate = show;\n  }\n\n  drawAll(): void {\n    const width = this.ctx.canvas.width / window.devicePixelRatio;\n    const height = this.ctx.canvas.height / window.devicePixelRatio;\n    this.ctx.clearRect(0, 0, width, height);\n    if (this.showGrid) drawGrid(this.ctx, width, this.margin, this.scales, this.theme);\n    if (this.showVolumeHeatmap) this.drawVolumeHeatmap();\n    this.drawChart();\n    if (this.scales.cvdHeight() > 0) this.drawCVD();\n    if (this.scales.oiHeight() > 0) this.drawOI();\n    if (this.scales.fundingRateHeight() > 0) this.drawFundingRate();\n    if (this.showDeltaTable) this.drawDeltaTable();\n    drawMeasureRectangle(this.ctx, this.interactions.getMeasureRectangle(), this.scales, this.theme);\n    this.drawScales(width, height);\n    drawCurrentPriceLabel(this.ctx, width, this.lastPrice, this.margin, this.scales, this.theme);\n    if (this.crosshair.visible) drawCrosshair(this.ctx, width, height, this.margin, this.crosshair, this.scales, this.data, this.theme, {\n      oiData: this.oiData,\n      fundingRateData: this.fundingRateData,\n      cvdValues: this.cvdValues\n    });\n    if (this.showBounds) drawBounds(this.ctx, width, height, this.margin, this.scales);\n  }\n\n  private drawDeltaTable(): void {\n    const vr = this.scales.getVisibleRange();\n    if (vr.endIndex <= vr.startIndex) return;\n\n    const ctx = this.ctx;\n    const width = ctx.canvas.width / window.devicePixelRatio;\n    const height = ctx.canvas.height / window.devicePixelRatio;\n\n    // Define row configurations with visibility keys\n    const rowHeight = this.tableRowHeight;\n    const allRows = [\n      { key: 'volume' as const, label: 'Volume' },\n      { key: 'volChange' as const, label: 'Vol Change %' },\n      { key: 'buyVol' as const, label: 'Buy Volume' },\n      { key: 'buyVolPercent' as const, label: 'Buy Vol %' },\n      { key: 'sellVol' as const, label: 'Sell Volume' },\n      { key: 'sellVolPercent' as const, label: 'Sell Vol %' },\n      { key: 'delta' as const, label: 'Delta' },\n      { key: 'deltaPercent' as const, label: 'Delta %' },\n      { key: 'minDelta' as const, label: 'Min Delta' },\n      { key: 'maxDelta' as const, label: 'Max Delta' },\n      { key: 'poc' as const, label: 'POC' },\n      { key: 'hlRange' as const, label: 'HL Range' }\n    ];\n\n    // Filter to only visible rows\n    const visibleRows = allRows.filter(row => this.tableRowVisibility[row.key] !== false);\n    const numRows = visibleRows.length;\n    if (numRows === 0) return;\n\n    const tableHeight = rowHeight * numRows;\n    // Position table at the very bottom, just above the timeline\n    const tableY = height - this.margin.bottom - tableHeight;\n\n    // Draw table background with dark color to match chart theme\n    ctx.save();\n    ctx.fillStyle = '#1a1a1a';\n    ctx.fillRect(0, tableY, width, tableHeight);\n\n    // Draw horizontal grid lines\n    ctx.strokeStyle = '#333';\n    ctx.lineWidth = 0.5;\n    for (let r = 0; r <= numRows; r++) {\n      ctx.beginPath();\n      ctx.moveTo(0, tableY + r * rowHeight);\n      ctx.lineTo(width, tableY + r * rowHeight);\n      ctx.stroke();\n    }\n\n    // Calculate previous candle volume for volume change %\n    let prevVol = 0;\n\n    // Draw values for each visible candle\n    for (let i = vr.startIndex; i < vr.endIndex && i < this.data.length; i++) {\n      const candle = this.data[i];\n      const cx = this.scales.indexToX(i, vr.startIndex);\n\n      // Calculate totals\n      // Calculate totals and min/max delta\n      let totBuy = 0, totSell = 0;\n      let minDelta = Number.MAX_SAFE_INTEGER;\n      let maxDelta = Number.MIN_SAFE_INTEGER;\n      let poc = 0, pocVol = 0;\n      const hasFootprint = candle.footprint.length > 0;\n\n      if (!hasFootprint) {\n        minDelta = 0;\n        maxDelta = 0;\n      }\n\n      for (const level of candle.footprint) {\n        totBuy += level.buy;\n        totSell += level.sell;\n        const levelDelta = level.buy - level.sell;\n        minDelta = Math.min(minDelta, levelDelta);\n        maxDelta = Math.max(maxDelta, levelDelta);\n        const levelVol = level.buy + level.sell;\n        if (levelVol > pocVol) {\n          pocVol = levelVol;\n          poc = level.price;\n        }\n      }\n\n      const totalVol = totBuy + totSell;\n      const delta = totBuy - totSell;\n      const deltaPercent = totalVol > 0 ? (delta / totalVol) * 100 : 0;\n      const buyPercent = totalVol > 0 ? (totBuy / totalVol) * 100 : 0;\n      const sellPercent = totalVol > 0 ? (totSell / totalVol) * 100 : 0;\n      const volChange = prevVol > 0 ? ((totalVol - prevVol) / prevVol) * 100 : 0;\n      const hlRange = candle.high - candle.low;\n\n      // Calculate cell width - full spacing with no gaps\n      const cellWidth = this.scales.scaledSpacing();\n      const cellX = cx - cellWidth / 2;\n\n      // Only show text if cell is wide enough (at least 30px)\n      const showText = cellWidth >= 30;\n\n      ctx.textAlign = 'center';\n      // Dynamic font size based on row height, min 9px, max 14px\n      const fontSize = Math.min(14, Math.max(9, Math.floor(rowHeight * 0.7)));\n      ctx.font = `${fontSize}px system-ui`;\n\n      // Draw each visible row dynamically\n      for (let r = 0; r < visibleRows.length; r++) {\n        const row = visibleRows[r];\n        const rowY = tableY + r * rowHeight;\n\n        let bgColor = '#2a2a2a'; // default neutral\n        let textValue = '';\n\n        switch (row.key) {\n          case 'volume':\n            bgColor = '#2a2a2a';\n            textValue = this.scales.formatK(totalVol);\n            break;\n          case 'volChange':\n            bgColor = i === vr.startIndex ? '#2a2a2a' : (volChange >= 0 ? 'rgba(22, 163, 74, 0.5)' : 'rgba(220, 38, 38, 0.5)');\n            textValue = i === vr.startIndex ? '-' : `${volChange.toFixed(1)}%`;\n            break;\n          case 'buyVol':\n            bgColor = 'rgba(22, 163, 74, 0.5)';\n            textValue = this.scales.formatK(totBuy);\n            break;\n          case 'buyVolPercent':\n            bgColor = 'rgba(22, 163, 74, 0.5)';\n            textValue = `${buyPercent.toFixed(1)}%`;\n            break;\n          case 'sellVol':\n            bgColor = 'rgba(220, 38, 38, 0.5)';\n            textValue = this.scales.formatK(totSell);\n            break;\n          case 'sellVolPercent':\n            bgColor = 'rgba(220, 38, 38, 0.5)';\n            textValue = `${sellPercent.toFixed(1)}%`;\n            break;\n          case 'delta':\n            bgColor = delta >= 0 ? 'rgba(22, 163, 74, 0.5)' : 'rgba(220, 38, 38, 0.5)';\n            textValue = this.scales.formatK(delta);\n            break;\n          case 'deltaPercent':\n            bgColor = deltaPercent >= 0 ? 'rgba(22, 163, 74, 0.5)' : 'rgba(220, 38, 38, 0.5)';\n            textValue = `${deltaPercent.toFixed(1)}%`;\n            break;\n          case 'minDelta':\n            bgColor = minDelta >= 0 ? 'rgba(22, 163, 74, 0.5)' : 'rgba(220, 38, 38, 0.5)';\n            textValue = this.scales.formatK(minDelta);\n            break;\n          case 'maxDelta':\n            bgColor = maxDelta >= 0 ? 'rgba(22, 163, 74, 0.5)' : 'rgba(220, 38, 38, 0.5)';\n            textValue = this.scales.formatK(maxDelta);\n            break;\n          case 'poc':\n            bgColor = '#2a2a2a';\n            textValue = poc.toFixed(2);\n            break;\n          case 'hlRange':\n            bgColor = '#2a2a2a';\n            textValue = hlRange.toFixed(4);\n            break;\n        }\n\n        // Draw background\n        ctx.fillStyle = bgColor;\n        ctx.fillRect(cellX, rowY, cellWidth, rowHeight - 1);\n\n        // Draw text if wide enough\n        if (showText) {\n          ctx.fillStyle = '#fff';\n          ctx.fillText(textValue, cx, rowY + rowHeight / 2);\n        }\n      }\n\n      prevVol = totalVol;\n    }\n\n    // Draw label column background (over cells on the left)\n    const labelWidth = 75;\n    ctx.fillStyle = '#1a1a1a';\n    ctx.fillRect(0, tableY, labelWidth, tableHeight);\n\n    // Draw row labels on the left (after cells so they're on top)\n    ctx.fillStyle = '#888';\n    // Dynamic font size for labels, max 14px\n    const labelFontSize = Math.min(14, Math.max(9, Math.floor(rowHeight * 0.6)));\n    ctx.font = `${labelFontSize}px system-ui`;\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'middle';\n    for (let r = 0; r < numRows; r++) {\n      ctx.fillText(visibleRows[r].label, 5, tableY + r * rowHeight + rowHeight / 2);\n    }\n\n    ctx.restore();\n  }\n\n  private drawChart(): void {\n    this.ctx.save();\n    const width = this.ctx.canvas.width / window.devicePixelRatio;\n    this.ctx.beginPath();\n    this.ctx.rect(\n      this.margin.left,\n      this.margin.top,\n      width - this.margin.left - this.margin.right,\n      this.scales.chartHeight()\n    );\n    this.ctx.clip();\n\n    const vr = this.scales.getVisibleRange();\n    for (let i = vr.startIndex; i < vr.endIndex; i++) {\n      drawFootprint(this.ctx, this.data[i], i, vr.startIndex, this.scales, this.theme, this.view, this.showVolumeFootprint, this.showDeltaTable, this.footprintStyle);\n    }\n    this.ctx.restore();\n  }\n\n  private drawVolumeHeatmap(): void {\n    const vr = this.scales.getVisibleRange();\n    if (vr.endIndex <= vr.startIndex) return;\n\n    // Choose data range based on dynamic flag\n    const startIndex = this.volumeHeatmapDynamic ? vr.startIndex : 0;\n    const endIndex = this.volumeHeatmapDynamic ? vr.endIndex : this.data.length;\n\n    // Aggregate volumes per price level across selected candles\n    const volumeMap = new Map<number, number>();\n    for (let i = startIndex; i < endIndex; i++) {\n      const candle = this.data[i];\n      for (const level of candle.footprint) {\n        const totalVol = level.buy + level.sell;\n        volumeMap.set(level.price, (volumeMap.get(level.price) || 0) + totalVol);\n      }\n    }\n\n    if (volumeMap.size === 0) return;\n\n    // Find max volume\n    const maxVolume = Math.max(...volumeMap.values());\n\n    // Draw heatmap\n    this.ctx.save();\n    const width = this.ctx.canvas.width / window.devicePixelRatio;\n    this.ctx.beginPath();\n    this.ctx.rect(\n      this.margin.left,\n      this.margin.top,\n      width - this.margin.left - this.margin.right,\n      this.scales.chartHeight()\n    );\n    this.ctx.clip();\n\n    for (const [price, volume] of volumeMap) {\n      const row = this.scales.priceToRowIndex(price);\n      const yTop = this.scales.rowToY(row - 0.5);\n      const yBot = this.scales.rowToY(row + 0.5);\n      const h = Math.max(1, yBot - yTop);\n      const alpha = maxVolume > 0 ? (volume / maxVolume) * 0.6 : 0; // Reduced brightness to 60% max\n      this.ctx.fillStyle = `rgba(255, 255, 0, ${alpha})`;\n      this.ctx.fillRect(this.margin.left, yTop, width - this.margin.left - this.margin.right, h);\n    }\n    this.ctx.restore();\n  }\n\n  private drawCVD(): void {\n    const h = this.scales.cvdHeight();\n    if (h <= 0) return;\n\n    const vr = this.scales.getVisibleRange();\n    if (vr.startIndex >= this.cvdValues.length) return;\n\n    // Determine min/max for CURRENT VIEW\n    let min = Infinity;\n    let max = -Infinity;\n    for (let i = vr.startIndex; i < Math.min(vr.endIndex, this.cvdValues.length); i++) {\n      const v = this.cvdValues[i];\n      if (v < min) min = v;\n      if (v > max) max = v;\n    }\n\n    if (min === Infinity) return;\n\n    const range = max - min;\n    if (range === 0) {\n      min -= 1;\n      max += 1;\n    } else {\n      const pad = range * 0.1;\n      min -= pad;\n      max += pad;\n    }\n\n    const ctx = this.ctx;\n    const originY = this.scales.cvdOriginY();\n    const width = this.ctx.canvas.width / window.devicePixelRatio;\n\n    // Draw divider line (draggable border between chart and CVD)\n    ctx.save();\n    ctx.strokeStyle = '#666';\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.moveTo(this.margin.left, originY);\n    ctx.lineTo(width - this.margin.right, originY);\n    ctx.stroke();\n    ctx.restore();\n\n    // Draw background\n    ctx.save();\n    ctx.fillStyle = this.theme.background || '#000';\n    ctx.fillRect(this.margin.left, originY, width - this.margin.left - this.margin.right, h);\n\n    // Clip\n    ctx.beginPath();\n    ctx.rect(this.margin.left, originY, width - this.margin.left - this.margin.right, h);\n    ctx.clip();\n\n    // Draw Zero line\n    if (min < 0 && max > 0) {\n      const yZero = this.scales.cvdToY(0, min, max);\n      ctx.strokeStyle = '#333';\n      ctx.setLineDash([2, 2]);\n      ctx.beginPath();\n      ctx.moveTo(this.margin.left, yZero);\n      ctx.lineTo(width - this.margin.right, yZero);\n      ctx.stroke();\n      ctx.setLineDash([]);\n    }\n\n    // Draw CVD Line\n    ctx.strokeStyle = '#00ffff';\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n\n    let first = true;\n    for (let i = vr.startIndex; i < Math.min(vr.endIndex, this.cvdValues.length); i++) {\n      const x = this.scales.indexToX(i, vr.startIndex);\n      const y = this.scales.cvdToY(this.cvdValues[i], min, max);\n      if (first) {\n        ctx.moveTo(x, y);\n        first = false;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    ctx.stroke();\n    ctx.restore();\n\n    // Draw CVD Y-Axis Labels Area\n    const right = width - this.margin.right;\n    ctx.save();\n    ctx.fillStyle = this.theme.scaleBackground || '#111';\n    ctx.fillRect(right, originY, this.margin.right, h);\n    ctx.strokeStyle = this.theme.scaleBorder || '#444';\n    ctx.strokeRect(right + 0.5, originY, 0.5, h);\n\n    // Labels\n    ctx.fillStyle = this.theme.textColor || '#aaa';\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'middle';\n    ctx.font = '10px system-ui';\n\n    // Draw evenly spaced labels (5 labels total)\n    const numLabels = 5;\n    for (let i = 0; i < numLabels; i++) {\n      const value = max - (i * (max - min) / (numLabels - 1));\n      const yPos = this.scales.cvdToY(value, min, max);\n      if (yPos >= originY + 8 && yPos <= originY + h - 8) {\n        ctx.fillText(this.scales.formatK(value), right + 5, yPos);\n      }\n    }\n\n    ctx.restore();\n  }\n\n  private drawOI(): void {\n    const h = this.scales.oiHeight();\n    if (h <= 0 || this.oiData.length === 0) return;\n\n    const ctx = this.ctx;\n    const originY = this.scales.oiOriginY();\n    const width = this.ctx.canvas.width / window.devicePixelRatio;\n    const vr = this.scales.getVisibleRange();\n\n    // Calculate candle interval from data (for matching tolerance)\n    let candleIntervalMs = 60000; // Default 1 minute\n    if (this.data.length >= 2) {\n      const t1 = new Date(this.data[0].time).getTime();\n      const t2 = new Date(this.data[1].time).getTime();\n      candleIntervalMs = Math.abs(t2 - t1);\n    }\n    // Use the candle interval as matching tolerance (with some padding)\n    const matchingTolerance = candleIntervalMs + 60000;\n\n    // Match OI data to visible candle timestamps\n    const matchedData: { index: number; value: number }[] = [];\n    for (let i = vr.startIndex; i < Math.min(vr.endIndex, this.data.length); i++) {\n      const candleTime = new Date(this.data[i].time).getTime();\n      // Find closest OI timestamp within matching tolerance\n      let closestValue: number | undefined;\n      let closestDiff = Infinity;\n      for (const point of this.oiData) {\n        const diff = Math.abs(point.timestamp - candleTime);\n        if (diff < closestDiff && diff < matchingTolerance) {\n          closestDiff = diff;\n          closestValue = point.value;\n        }\n      }\n      // Fallback: if no match within tolerance, use closest available point\n      if (closestValue === undefined && this.oiData.length > 0) {\n        let bestDiff = Infinity;\n        for (const point of this.oiData) {\n          const diff = Math.abs(point.timestamp - candleTime);\n          if (diff < bestDiff) {\n            bestDiff = diff;\n            closestValue = point.value;\n          }\n        }\n      }\n      if (closestValue !== undefined) {\n        matchedData.push({ index: i, value: closestValue });\n      }\n    }\n\n    if (matchedData.length === 0) return;\n\n    // Determine min/max for visible data\n    let min = Infinity;\n    let max = -Infinity;\n    for (const point of matchedData) {\n      if (point.value < min) min = point.value;\n      if (point.value > max) max = point.value;\n    }\n\n    if (min === Infinity) return;\n\n    const range = max - min;\n    if (range === 0) {\n      min -= 1;\n      max += 1;\n    } else {\n      const pad = range * 0.1;\n      min -= pad;\n      max += pad;\n    }\n\n    // Helper to map value to Y within the OI pane\n    const valueToY = (value: number): number => {\n      const ratio = (value - min) / (max - min);\n      return originY + h - ratio * h;\n    };\n\n    // Draw divider line\n    ctx.save();\n    ctx.strokeStyle = '#666';\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.moveTo(this.margin.left, originY);\n    ctx.lineTo(width - this.margin.right, originY);\n    ctx.stroke();\n    ctx.restore();\n\n    // Draw background\n    ctx.save();\n    ctx.fillStyle = this.theme.background || '#000';\n    ctx.fillRect(this.margin.left, originY, width - this.margin.left - this.margin.right, h);\n\n    // Clip\n    ctx.beginPath();\n    ctx.rect(this.margin.left, originY, width - this.margin.left - this.margin.right, h);\n    ctx.clip();\n\n    // Draw OI Line (orange color) - aligned to candle positions\n    ctx.strokeStyle = '#ff9500';\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n\n    let first = true;\n    for (const point of matchedData) {\n      const x = this.scales.indexToX(point.index, vr.startIndex);\n      const y = valueToY(point.value);\n      if (first) {\n        ctx.moveTo(x, y);\n        first = false;\n      } else {\n        ctx.lineTo(x, y);\n      }\n    }\n    ctx.stroke();\n    ctx.restore();\n\n    // Draw OI Y-Axis Labels Area\n    const right = width - this.margin.right;\n    ctx.save();\n    ctx.fillStyle = this.theme.scaleBackground || '#111';\n    ctx.fillRect(right, originY, this.margin.right, h);\n    ctx.strokeStyle = this.theme.scaleBorder || '#444';\n    ctx.strokeRect(right + 0.5, originY, 0.5, h);\n\n    // Labels\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'middle';\n    ctx.font = '10px system-ui';\n\n    // 1. Draw Max Label (Top)\n    ctx.fillStyle = this.theme.textColor || '#aaa';\n    ctx.fillText(this.scales.formatK(max), right + 5, originY + 10);\n\n    // 2. Draw Min Label (Bottom)\n    ctx.fillStyle = this.theme.textColor || '#aaa';\n    ctx.fillText(this.scales.formatK(min), right + 5, originY + h - 10);\n\n    // 3. Draw Current Value Label (if we have data)\n    if (matchedData.length > 0) {\n      const lastPoint = matchedData[matchedData.length - 1];\n      const yPos = valueToY(lastPoint.value);\n\n      // Draw background for current value\n      ctx.fillStyle = '#ff9500';\n      ctx.fillRect(right, yPos - 9, this.margin.right, 18);\n\n      // Draw text\n      ctx.fillStyle = '#fff'; // White text on orange background\n      ctx.font = 'bold 10px system-ui';\n      ctx.fillText(this.scales.formatK(lastPoint.value), right + 5, yPos);\n    }\n\n    ctx.restore();\n  }\n\n  private drawFundingRate(): void {\n    const h = this.scales.fundingRateHeight();\n    if (h <= 0 || this.fundingRateData.length === 0) return;\n\n    const ctx = this.ctx;\n    const originY = this.scales.fundingRateOriginY();\n    const width = this.ctx.canvas.width / window.devicePixelRatio;\n    const vr = this.scales.getVisibleRange();\n\n    // Calculate candle interval from data (for matching tolerance)\n    let candleIntervalMs = 60000; // Default 1 minute\n    if (this.data.length >= 2) {\n      const t1 = new Date(this.data[0].time).getTime();\n      const t2 = new Date(this.data[1].time).getTime();\n      candleIntervalMs = Math.abs(t2 - t1);\n    }\n    // Use the candle interval as matching tolerance (with some padding)\n    const matchingTolerance = candleIntervalMs + 60000;\n\n    // Match Funding Rate data to visible candle timestamps\n    const matchedData: { index: number; value: number }[] = [];\n    for (let i = vr.startIndex; i < Math.min(vr.endIndex, this.data.length); i++) {\n      const candleTime = new Date(this.data[i].time).getTime();\n      // Find closest FR timestamp within matching tolerance\n      let closestValue: number | undefined;\n      let closestDiff = Infinity;\n      for (const point of this.fundingRateData) {\n        const diff = Math.abs(point.timestamp - candleTime);\n        if (diff < closestDiff && diff < matchingTolerance) {\n          closestDiff = diff;\n          closestValue = point.value;\n        }\n      }\n      // Fallback: if no match within tolerance, use closest available point\n      if (closestValue === undefined && this.fundingRateData.length > 0) {\n        let bestDiff = Infinity;\n        for (const point of this.fundingRateData) {\n          const diff = Math.abs(point.timestamp - candleTime);\n          if (diff < bestDiff) {\n            bestDiff = diff;\n            closestValue = point.value;\n          }\n        }\n      }\n      if (closestValue !== undefined) {\n        matchedData.push({ index: i, value: closestValue });\n      }\n    }\n\n    if (matchedData.length === 0) return;\n\n    // Determine min/max for visible data\n    let min = Infinity;\n    let max = -Infinity;\n    for (const point of matchedData) {\n      if (point.value < min) min = point.value;\n      if (point.value > max) max = point.value;\n    }\n\n    if (min === Infinity) return;\n\n    const range = max - min;\n    if (range === 0) {\n      min -= 0.0001;\n      max += 0.0001;\n    } else {\n      const pad = range * 0.1;\n      min -= pad;\n      max += pad;\n    }\n\n    // Helper to map value to Y within the Funding Rate pane\n    const valueToY = (value: number): number => {\n      const ratio = (value - min) / (max - min);\n      return originY + h - ratio * h;\n    };\n\n    // Draw divider line\n    ctx.save();\n    ctx.strokeStyle = '#666';\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.moveTo(this.margin.left, originY);\n    ctx.lineTo(width - this.margin.right, originY);\n    ctx.stroke();\n    ctx.restore();\n\n    // Draw background\n    ctx.save();\n    ctx.fillStyle = this.theme.background || '#000';\n    ctx.fillRect(this.margin.left, originY, width - this.margin.left - this.margin.right, h);\n\n    // Clip\n    ctx.beginPath();\n    ctx.rect(this.margin.left, originY, width - this.margin.left - this.margin.right, h);\n    ctx.clip();\n\n    // Draw zero line if in range\n    if (min < 0 && max > 0) {\n      const yZero = valueToY(0);\n      ctx.strokeStyle = '#444';\n      ctx.setLineDash([2, 2]);\n      ctx.beginPath();\n      ctx.moveTo(this.margin.left, yZero);\n      ctx.lineTo(width - this.margin.right, yZero);\n      ctx.stroke();\n      ctx.setLineDash([]);\n    }\n\n    // Draw Funding Rate as bars (green positive, red negative) - aligned to candle positions\n    const spacing = this.scales.scaledSpacing();\n    const barWidth = Math.max(2, spacing * 0.6);\n    const yZero = valueToY(0);\n    for (const point of matchedData) {\n      const x = this.scales.indexToX(point.index, vr.startIndex) - barWidth / 2;\n      const y = valueToY(point.value);\n      const barHeight = Math.abs(yZero - y);\n\n      ctx.fillStyle = point.value >= 0 ? '#22c55e' : '#ef4444';\n      if (point.value >= 0) {\n        ctx.fillRect(x, y, barWidth, barHeight);\n      } else {\n        ctx.fillRect(x, yZero, barWidth, barHeight);\n      }\n    }\n    ctx.restore();\n\n    // Draw Funding Rate Y-Axis Labels Area\n    const right = width - this.margin.right;\n    ctx.save();\n    ctx.fillStyle = this.theme.scaleBackground || '#111';\n    ctx.fillRect(right, originY, this.margin.right, h);\n    ctx.strokeStyle = this.theme.scaleBorder || '#444';\n    ctx.strokeRect(right + 0.5, originY, 0.5, h);\n\n    // Labels header\n    ctx.textAlign = 'left';\n    ctx.textBaseline = 'middle';\n    ctx.font = '10px system-ui';\n\n    // Helper to format percentage\n    const formatPct = (v: number) => (v * 100).toFixed(4) + '%';\n\n    // 1. Draw Max Label (Top)\n    ctx.fillStyle = this.theme.textColor || '#aaa';\n    ctx.fillText(formatPct(max), right + 3, originY + 10);\n\n    // 2. Draw Min Label (Bottom)\n    ctx.fillStyle = this.theme.textColor || '#aaa';\n    ctx.fillText(formatPct(min), right + 3, originY + h - 10);\n\n    // 3. Draw Current Value Label (if we have data)\n    if (matchedData.length > 0) {\n      const lastPoint = matchedData[matchedData.length - 1];\n      const yPos = valueToY(lastPoint.value);\n\n      // Draw background for current value (color based on sign)\n      ctx.fillStyle = lastPoint.value >= 0 ? '#22c55e' : '#ef4444';\n      ctx.fillRect(right, yPos - 9, this.margin.right, 18);\n\n      // Draw text\n      ctx.fillStyle = '#fff'; // White text\n      ctx.font = 'bold 10px system-ui';\n      ctx.fillText(formatPct(lastPoint.value), right + 3, yPos);\n    }\n\n    ctx.restore();\n  }\n\n  private drawScales(width: number, height: number): void {\n    // Timeline position (fixed at bottom, CVD is drawn separately above it)\n    const timelineY = height - this.margin.bottom;\n\n    // Draw price bar (unchanged)\n    const right = width - this.margin.right;\n    this.ctx.fillStyle = this.theme.scaleBackground || '#111';\n    this.ctx.fillRect(right, 0, this.margin.right, this.scales.chartHeight()); // Only fill price chart height\n    this.ctx.strokeStyle = this.theme.scaleBorder || '#444';\n    this.ctx.strokeRect(right + 0.5, this.margin.top, 0.5, this.scales.chartHeight());\n\n    // Price labels\n    this.ctx.fillStyle = this.theme.textColor || '#aaa';\n    this.ctx.font = '12px system-ui';\n    this.ctx.textAlign = 'center';\n    this.ctx.textBaseline = 'middle';\n    const labels = this.scales.computePriceBarLabels();\n    for (const { price, y } of labels) {\n      this.ctx.fillText(this.scales.formatK(price), right + this.margin.right / 2, y);\n    }\n\n    // Draw timeline at bottom\n    const chartW = width - this.margin.left - this.margin.right;\n    this.ctx.fillStyle = this.theme.scaleBackground || '#111';\n    this.ctx.fillRect(this.margin.left, timelineY, chartW, this.margin.bottom);\n    this.ctx.strokeStyle = this.theme.scaleBorder || '#444';\n    this.ctx.beginPath();\n    this.ctx.moveTo(this.margin.left, timelineY + 0.5);\n    this.ctx.lineTo(this.margin.left + chartW, timelineY + 0.5);\n    this.ctx.stroke();\n\n    // Timeline labels\n    this.ctx.save();\n    this.ctx.beginPath();\n    this.ctx.rect(this.margin.left, timelineY, chartW, this.margin.bottom);\n    this.ctx.clip();\n    this.ctx.fillStyle = this.theme.textColor || '#aaa';\n    this.ctx.font = '12px system-ui';\n    this.ctx.textAlign = 'center';\n    this.ctx.textBaseline = 'middle';\n    const step = Math.max(1, Math.floor(120 / this.scales.scaledSpacing()));\n    const vr = this.scales.getVisibleRange();\n    for (let i = vr.startIndex; i < vr.endIndex; i += step) {\n      const x = this.scales.indexToX(i, vr.startIndex);\n      const date = new Date(this.data[i].time);\n      const hours = date.getHours().toString().padStart(2, '0');\n      const minutes = date.getMinutes().toString().padStart(2, '0');\n      const t = `${hours}:${minutes}`;\n      this.ctx.fillText(t, x, timelineY + this.margin.bottom / 2);\n    }\n    this.ctx.restore();\n  }\n}","/**\n * Aggregator module for combining 1-minute candles into higher timeframes.\n * Supports 5m, 15m, 30m, and 1h aggregations with live update capabilities.\n */\n\nimport { CandleData, FootprintLevel } from './types';\n\nexport type Timeframe = '1m' | '5m' | '15m' | '30m' | '1h';\n\n/**\n * Aggregates 1-minute candle data into higher timeframes.\n * Maintains base 1m data and efficiently updates aggregated candles.\n */\nexport class Aggregator {\n    private base1mData: CandleData[] = [];\n    private currentTimeframe: Timeframe = '1m';\n    private aggregatedCache: Map<Timeframe, CandleData[]> = new Map();\n\n    /**\n     * Get the multiplier for a given timeframe (how many 1m candles per aggregated candle)\n     */\n    static getTimeframeMultiple(tf: Timeframe): number {\n        switch (tf) {\n            case '1m': return 1;\n            case '5m': return 5;\n            case '15m': return 15;\n            case '30m': return 30;\n            case '1h': return 60;\n            default: return 1;\n        }\n    }\n\n    /**\n     * Get the timeframe period start for a given timestamp\n     */\n    private getTimeframeBucket(time: Date, tf: Timeframe): number {\n        const multiple = Aggregator.getTimeframeMultiple(tf);\n        const minutes = time.getUTCMinutes();\n        const bucketMinutes = Math.floor(minutes / multiple) * multiple;\n\n        const bucket = new Date(time);\n        bucket.setUTCMinutes(bucketMinutes);\n        bucket.setUTCSeconds(0);\n        bucket.setUTCMilliseconds(0);\n\n        return bucket.getTime();\n    }\n\n    /**\n     * Merge footprint levels from multiple candles, summing volumes at matching prices\n     */\n    private mergeFootprints(footprints: FootprintLevel[][]): FootprintLevel[] {\n        const merged = new Map<number, FootprintLevel>();\n\n        for (const levels of footprints) {\n            for (const level of levels) {\n                const existing = merged.get(level.price);\n                if (existing) {\n                    existing.buy += level.buy;\n                    existing.sell += level.sell;\n                } else {\n                    merged.set(level.price, { price: level.price, buy: level.buy, sell: level.sell });\n                }\n            }\n        }\n\n        // Sort by price descending (highest first)\n        return Array.from(merged.values()).sort((a, b) => b.price - a.price);\n    }\n\n    /**\n     * Aggregate a group of 1m candles into a single candle\n     */\n    private aggregateCandles(candles: CandleData[]): CandleData {\n        if (candles.length === 0) {\n            throw new Error('Cannot aggregate empty candle array');\n        }\n\n        if (candles.length === 1) {\n            return { ...candles[0] };\n        }\n\n        const first = candles[0];\n        const last = candles[candles.length - 1];\n\n        return {\n            time: first.time, // Use first candle's timestamp\n            open: first.open,\n            high: Math.max(...candles.map(c => c.high)),\n            low: Math.min(...candles.map(c => c.low)),\n            close: last.close,\n            footprint: this.mergeFootprints(candles.map(c => c.footprint))\n        };\n    }\n\n    /**\n     * Set the base 1-minute data and clear cache\n     */\n    setBase1mData(data: CandleData[]): void {\n        this.base1mData = [...data];\n        this.aggregatedCache.clear();\n    }\n\n    /**\n     * Get the base 1m data\n     */\n    getBase1mData(): CandleData[] {\n        return this.base1mData;\n    }\n\n    /**\n     * Add a new 1m candle (when timeframe closes and new candle starts)\n     */\n    add1mCandle(candle: CandleData): void {\n        this.base1mData.push(candle);\n        this.aggregatedCache.clear(); // Invalidate cache\n    }\n\n    /**\n     * Update the last 1m candle with new trade data\n     * This is called when trades are added to the current candle\n     */\n    update1mCandle(candle: CandleData): void {\n        if (this.base1mData.length === 0) {\n            this.base1mData.push(candle);\n        } else {\n            const lastCandle = this.base1mData[this.base1mData.length - 1];\n            const lastTime = new Date(lastCandle.time).getTime();\n            const candleTime = new Date(candle.time).getTime();\n\n            if (lastTime === candleTime) {\n                // Same timestamp - update the last candle\n                this.base1mData[this.base1mData.length - 1] = candle;\n            } else {\n                // Different timestamp - this is a new candle\n                this.base1mData.push(candle);\n            }\n        }\n        this.aggregatedCache.clear(); // Invalidate cache\n    }\n\n    /**\n     * Get current timeframe\n     */\n    getTimeframe(): Timeframe {\n        return this.currentTimeframe;\n    }\n\n    /**\n     * Set current timeframe\n     */\n    setTimeframe(tf: Timeframe): void {\n        this.currentTimeframe = tf;\n    }\n\n    /**\n     * Get aggregated candle data for a specific timeframe\n     */\n    getAggregatedData(timeframe: Timeframe = this.currentTimeframe): CandleData[] {\n        if (timeframe === '1m') {\n            return this.base1mData;\n        }\n\n        // Check cache\n        const cached = this.aggregatedCache.get(timeframe);\n        if (cached) {\n            return cached;\n        }\n\n        // Aggregate the data\n        const aggregated = this.aggregate(timeframe);\n        this.aggregatedCache.set(timeframe, aggregated);\n        return aggregated;\n    }\n\n    /**\n     * Perform the actual aggregation\n     */\n    private aggregate(timeframe: Timeframe): CandleData[] {\n        if (this.base1mData.length === 0) {\n            return [];\n        }\n\n        const result: CandleData[] = [];\n        const buckets = new Map<number, CandleData[]>();\n\n        // Group candles by timeframe bucket\n        for (const candle of this.base1mData) {\n            const time = new Date(candle.time);\n            const bucket = this.getTimeframeBucket(time, timeframe);\n\n            if (!buckets.has(bucket)) {\n                buckets.set(bucket, []);\n            }\n            buckets.get(bucket)!.push(candle);\n        }\n\n        // Sort buckets by time and aggregate each\n        const sortedBuckets = Array.from(buckets.entries())\n            .sort((a, b) => a[0] - b[0]);\n\n        for (const [, candles] of sortedBuckets) {\n            result.push(this.aggregateCandles(candles));\n        }\n\n        return result;\n    }\n\n    /**\n     * Get the data to display for the current timeframe\n     */\n    getData(): CandleData[] {\n        return this.getAggregatedData(this.currentTimeframe);\n    }\n}\n","/**\n * Main chart implementation for the Volume Footprint Chart.\n * Provides the primary API for creating and managing chart instances with modular components.\n */\n\nimport { CandleData, VFCOptions, VFCEvents } from './types';\nimport { Scales } from './scales';\nimport { Interactions } from './interactions';\nimport { Drawing } from './drawing';\nimport { Aggregator, Timeframe } from './aggregator';\n\nexport class Chart {\n  private canvas!: HTMLCanvasElement;\n  private ctx!: CanvasRenderingContext2D;\n  private data: CandleData[] = [];\n  private options!: Required<VFCOptions>;\n  private events: VFCEvents = {};\n\n  // Chart state\n  private margin = { top: 0, bottom: 40, left: 0, right: 70 };\n  private view = { zoomY: 1, zoomX: 1, offsetRows: 0, offsetX: 0, offsetY: 0 };\n  private showGrid = true;\n  private showBounds = false;\n  private showVolumeFootprint = true;\n  private showVolumeHeatmap = false;\n  private volumeHeatmapDynamic = true;\n  private crosshair = { x: -1, y: -1, visible: false };\n  private lastPrice: number | null = null;\n  private cvdType: 'ticker' | 'footprint' = 'ticker';\n\n  // Toolbar button references\n  private resetZoomBtn: HTMLButtonElement | null = null;\n  private toggleGridBtn: HTMLButtonElement | null = null;\n  private viewModeSelect: HTMLSelectElement | null = null;\n  private volumeHeatmapBtn: HTMLButtonElement | null = null;\n  private volumeHeatmapDropdown: HTMLDivElement | null = null;\n  private measureBtn: HTMLButtonElement | null = null;\n  private cvdBtn: HTMLButtonElement | null = null;\n  private cvdDropdown: HTMLDivElement | null = null;\n\n  // Timeframe aggregation state\n  private aggregator: Aggregator = new Aggregator();\n  private currentTimeframe: Timeframe = '1m';\n  private timeframeButtons: Map<Timeframe, HTMLButtonElement> = new Map();\n  private isAggregatedData: boolean = false; // Flag to track if current data is aggregated\n\n  // CVD state\n  private showCVD = false;\n  private cvdDynamic = true;\n  private cvdValues: number[] = [];\n  private cvdBaseline: 'global' | 'session' | 'visible' = 'global';\n  private cvdNormalize = true;\n\n  // Delta table state\n  private showDeltaTable = false;\n  private deltaTableBtn: HTMLButtonElement | null = null;\n\n  // Edit settings popup state\n  private editBtn: HTMLButtonElement | null = null;\n  private editPopup: HTMLDivElement | null = null;\n\n  // Open Interest indicator state\n  private showOI = false;\n  private oiData: { timestamp: number; value: number }[] = [];\n\n  // Funding Rate indicator state\n  private showFundingRate = false;\n  private fundingRateData: { timestamp: number; value: number }[] = [];\n\n  // Constants\n  private TICK: number = 10;\n\n  // Tick size detection\n  private detectTickSize(): number {\n    if (this.data.length === 0) return 10;\n\n    // Collect all unique price differences from footprint data\n    const priceDifferences = new Set<number>();\n\n    for (const candle of this.data) {\n      if (candle.footprint && candle.footprint.length > 1) {\n        // Sort footprint prices\n        const prices = candle.footprint.map(f => f.price).sort((a, b) => a - b);\n\n        // Calculate differences between consecutive prices\n        for (let i = 1; i < prices.length; i++) {\n          const diff = prices[i] - prices[i - 1];\n          if (diff > 0) {\n            priceDifferences.add(diff);\n          }\n        }\n      }\n    }\n\n    // Find the most common smallest difference\n    if (priceDifferences.size === 0) return 10;\n\n    const sortedDiffs = Array.from(priceDifferences).sort((a, b) => a - b);\n    const smallestDiff = sortedDiffs[0];\n\n    // For crypto data, ensure tick size is reasonable (at least 0.1 for most pairs)\n    // If detected tick is too small, round up to a reasonable value\n    if (smallestDiff < 0.1) {\n      // Round to nearest 0.1, 0.5, or 1.0\n      if (smallestDiff < 0.25) return 0.1;\n      if (smallestDiff < 0.75) return 0.5;\n      return 1.0;\n    }\n\n    return smallestDiff; // Return the smallest detected tick size\n  }\n  private readonly BASE_CANDLE = 15;\n  private readonly BASE_BOX = 55;\n  private readonly BASE_IMBALANCE = 2;\n  private readonly BASE_SPACING = this.BASE_CANDLE + 2 * this.BASE_BOX + 2 * this.BASE_IMBALANCE;\n  private readonly FIXED_GAP = 4;\n  private readonly baseRowPx = 22;\n  private readonly TEXT_VIS = { minZoomX: 0.5, minRowPx: 10, minBoxPx: 20 };\n\n  // Modules\n  private scales!: Scales;\n  private interactions!: Interactions;\n  private drawing!: Drawing;\n\n  private createChartStructure(container: HTMLElement): void {\n    // Check if toolbars already exist\n    if (container.querySelector('.vfc-toolbar')) {\n      return; // Toolbars already exist, don't recreate\n    }\n\n    // Create the complete chart structure\n    container.classList.add('vfc-container');\n\n    // Create top toolbar\n    const topToolbar = document.createElement('div');\n    topToolbar.className = 'vfc-toolbar';\n\n    const resetZoomBtn = document.createElement('button');\n    resetZoomBtn.id = 'resetZoom';\n    resetZoomBtn.className = 'tool-btn';\n    resetZoomBtn.textContent = 'Reset';\n    topToolbar.appendChild(resetZoomBtn);\n\n    const toggleGridBtn = document.createElement('button');\n    toggleGridBtn.id = 'toggleGrid';\n    toggleGridBtn.className = 'tool-btn';\n    toggleGridBtn.textContent = 'Grid On/Off';\n    topToolbar.appendChild(toggleGridBtn);\n\n\n    const viewModeSelect = document.createElement('select');\n    viewModeSelect.id = 'viewModeSelect';\n    viewModeSelect.className = 'tool-select';\n\n    // Add options\n    const modes = [\n      { value: 'candles', label: 'Candles' },\n      { value: 'bid_ask', label: 'Bid/Ask Footprint' },\n      { value: 'delta', label: 'Delta Footprint' }\n    ];\n\n    modes.forEach(mode => {\n      const option = document.createElement('option');\n      option.value = mode.value;\n      option.text = mode.label;\n      viewModeSelect.appendChild(option);\n    });\n\n    topToolbar.appendChild(viewModeSelect);\n\n    // Create volume heatmap toggle button (simple on/off - type set in edit popup)\n    const volumeHeatmapBtn = document.createElement('button');\n    volumeHeatmapBtn.id = 'volumeHeatmap';\n    volumeHeatmapBtn.className = 'tool-btn';\n    volumeHeatmapBtn.textContent = 'Volume Heatmap';\n    volumeHeatmapBtn.title = 'Toggle volume heatmap (set type in  Settings)';\n    topToolbar.appendChild(volumeHeatmapBtn);\n\n\n    const measureBtn = document.createElement('button');\n    measureBtn.id = 'measure';\n    measureBtn.className = 'tool-btn';\n    measureBtn.title = 'Measure Tool';\n    measureBtn.textContent = ' Measure';\n    topToolbar.appendChild(measureBtn);\n\n    // Create CVD toggle button (simple on/off - type set in edit popup)\n    const cvdBtn = document.createElement('button');\n    cvdBtn.id = 'cvdToggle';\n    cvdBtn.className = 'tool-btn';\n    cvdBtn.textContent = 'CVD';\n    cvdBtn.title = 'Toggle CVD (set type in  Settings)';\n    topToolbar.appendChild(cvdBtn);\n\n    // Create timeframe button group\n    const tfContainer = document.createElement('div');\n    tfContainer.className = 'tf-button-group';\n\n    const timeframes: Timeframe[] = ['1m', '5m', '15m', '30m', '1h'];\n    for (const tf of timeframes) {\n      const btn = document.createElement('button');\n      btn.className = 'tool-btn tf-btn' + (tf === '1m' ? ' active' : '');\n      btn.textContent = tf.toUpperCase();\n      btn.dataset.timeframe = tf;\n      tfContainer.appendChild(btn);\n    }\n    topToolbar.appendChild(tfContainer);\n\n    // Create Delta Table toggle button\n    const deltaTableBtn = document.createElement('button');\n    deltaTableBtn.id = 'deltaTableToggle';\n    deltaTableBtn.className = 'tool-btn';\n    deltaTableBtn.textContent = 'Table';\n    deltaTableBtn.title = 'Show Delta & Delta% in table below chart';\n    topToolbar.appendChild(deltaTableBtn);\n\n    // Create Edit Settings button and popup\n    const editContainer = document.createElement('div');\n    editContainer.style.position = 'relative';\n    editContainer.style.display = 'inline-block';\n\n    const editBtn = document.createElement('button');\n    editBtn.id = 'editSettings';\n    editBtn.className = 'tool-btn';\n    editBtn.textContent = '';\n    editBtn.title = 'Edit Chart Settings';\n    editContainer.appendChild(editBtn);\n\n    // Create settings popup\n    const editPopup = document.createElement('div');\n    editPopup.id = 'editSettingsPopup';\n    editPopup.style.cssText = `\n      display: none;\n      position: absolute;\n      top: 100%;\n      right: 0;\n      background: #222;\n      border: 1px solid #444;\n      border-radius: 4px;\n      padding: 12px;\n      z-index: 1000;\n      min-width: 220px;\n      color: #fff;\n      font-size: 12px;\n    `;\n\n    // Table Rows Section\n    const tableSection = document.createElement('div');\n    tableSection.innerHTML = '<div style=\"font-weight:bold;margin-bottom:8px;color:#888;\">Table Rows</div>';\n    const tableRows = [\n      { key: 'volume', label: 'Volume' },\n      { key: 'volChange', label: 'Vol Change %' },\n      { key: 'buyVol', label: 'Buy Volume' },\n      { key: 'buyVolPercent', label: 'Buy Vol %' },\n      { key: 'sellVol', label: 'Sell Volume' },\n      { key: 'sellVolPercent', label: 'Sell Vol %' },\n      { key: 'delta', label: 'Delta' },\n      { key: 'deltaPercent', label: 'Delta %' },\n      { key: 'minDelta', label: 'Min Delta' },\n      { key: 'maxDelta', label: 'Max Delta' },\n      { key: 'poc', label: 'POC' },\n      { key: 'hlRange', label: 'HL Range' }\n    ];\n    tableRows.forEach(row => {\n      const label = document.createElement('label');\n      label.style.cssText = 'display:block;margin:4px 0;cursor:pointer;';\n      const checkbox = document.createElement('input');\n      checkbox.type = 'checkbox';\n      checkbox.checked = true;\n      checkbox.dataset.row = row.key;\n      checkbox.style.marginRight = '8px';\n      label.appendChild(checkbox);\n      label.appendChild(document.createTextNode(row.label));\n      tableSection.appendChild(label);\n    });\n    editPopup.appendChild(tableSection);\n\n    // Heatmap Type Section\n    const heatmapSection = document.createElement('div');\n    heatmapSection.style.marginTop = '12px';\n    heatmapSection.style.borderTop = '1px solid #444';\n    heatmapSection.style.paddingTop = '12px';\n    heatmapSection.innerHTML = '<div style=\"font-weight:bold;margin-bottom:8px;color:#888;\">Heatmap Type</div>';\n    ['Dynamic', 'Static'].forEach(type => {\n      const label = document.createElement('label');\n      label.style.cssText = 'display:block;margin:4px 0;cursor:pointer;';\n      const radio = document.createElement('input');\n      radio.type = 'radio';\n      radio.name = 'heatmapType';\n      radio.value = type.toLowerCase();\n      radio.checked = type === 'Dynamic';\n      radio.style.marginRight = '8px';\n      label.appendChild(radio);\n      label.appendChild(document.createTextNode(type));\n      heatmapSection.appendChild(label);\n    });\n    editPopup.appendChild(heatmapSection);\n\n    // CVD Type Section\n    const cvdSection = document.createElement('div');\n    cvdSection.style.marginTop = '12px';\n    cvdSection.style.borderTop = '1px solid #444';\n    cvdSection.style.paddingTop = '12px';\n    cvdSection.innerHTML = '<div style=\"font-weight:bold;margin-bottom:8px;color:#888;\">CVD Type</div>';\n    [{ value: 'ticker', label: 'Ticker (Vol  Sign)' }, { value: 'footprint', label: 'Footprint (Buy  Sell)' }].forEach(opt => {\n      const label = document.createElement('label');\n      label.style.cssText = 'display:block;margin:4px 0;cursor:pointer;';\n      const radio = document.createElement('input');\n      radio.type = 'radio';\n      radio.name = 'cvdType';\n      radio.value = opt.value;\n      radio.checked = opt.value === 'ticker';\n      radio.style.marginRight = '8px';\n      label.appendChild(radio);\n      label.appendChild(document.createTextNode(opt.label));\n      cvdSection.appendChild(label);\n    });\n    editPopup.appendChild(cvdSection);\n\n    // Footprint Style Section\n    const fpSection = document.createElement('div');\n    fpSection.style.marginTop = '12px';\n    fpSection.style.borderTop = '1px solid #444';\n    fpSection.style.paddingTop = '12px';\n    fpSection.innerHTML = '<div style=\"font-weight:bold;margin-bottom:8px;color:#888;\">Footprint Style</div>';\n    [{ value: 'bid_ask', label: 'Bid/Ask' }, { value: 'delta', label: 'Delta Volume' }].forEach(opt => {\n      const label = document.createElement('label');\n      label.style.cssText = 'display:block;margin:4px 0;cursor:pointer;';\n      const radio = document.createElement('input');\n      radio.type = 'radio';\n      radio.name = 'footprintStyle';\n      radio.value = opt.value;\n      radio.checked = opt.value === 'bid_ask';\n      radio.style.marginRight = '8px';\n      label.appendChild(radio);\n      label.appendChild(document.createTextNode(opt.label));\n      fpSection.appendChild(label);\n    });\n    editPopup.appendChild(fpSection);\n\n    // Indicators Section\n    const indicatorSection = document.createElement('div');\n    indicatorSection.style.marginTop = '12px';\n    indicatorSection.style.borderTop = '1px solid #444';\n    indicatorSection.style.paddingTop = '12px';\n    indicatorSection.innerHTML = '<div style=\"font-weight:bold;margin-bottom:8px;color:#888;\">Indicators</div>';\n    [\n      { id: 'showOI', label: 'Show Open Interest' },\n      { id: 'showFundingRate', label: 'Show Funding Rate' }\n    ].forEach(opt => {\n      const label = document.createElement('label');\n      label.style.cssText = 'display:block;margin:4px 0;cursor:pointer;';\n      const checkbox = document.createElement('input');\n      checkbox.type = 'checkbox';\n      checkbox.id = opt.id;\n      checkbox.style.marginRight = '8px';\n      label.appendChild(checkbox);\n      label.appendChild(document.createTextNode(opt.label));\n      indicatorSection.appendChild(label);\n    });\n    editPopup.appendChild(indicatorSection);\n\n    editContainer.appendChild(editPopup);\n    topToolbar.appendChild(editContainer);\n\n    const hint = document.createElement('span');\n    hint.className = 'hint';\n    hint.textContent = 'Volume Footprint Chart';\n    topToolbar.appendChild(hint);\n\n    container.appendChild(topToolbar);\n\n    // Create chart container\n    const chartContainer = document.createElement('div');\n    chartContainer.className = 'vfc-chart-container';\n    container.appendChild(chartContainer);\n\n    // Set up event handlers\n    this.setupToolbarEventHandlers(container);\n  }\n\n  private setupToolbarEventHandlers(container: HTMLElement): void {\n    const resetZoomBtn = container.querySelector('#resetZoom') as HTMLButtonElement;\n    const toggleGridBtn = container.querySelector('#toggleGrid') as HTMLButtonElement;\n    const viewModeSelect = container.querySelector('#viewModeSelect') as HTMLSelectElement;\n    const volumeHeatmapBtn = container.querySelector('#volumeHeatmap') as HTMLButtonElement;\n    const volumeHeatmapDropdown = container.querySelector('.dropdown-menu:not(.cvd-dropdown)') as HTMLDivElement;\n    const measureBtn = container.querySelector('#measure') as HTMLButtonElement;\n    const cvdBtn = container.querySelector('#cvdToggle') as HTMLButtonElement;\n    const cvdDropdown = container.querySelector('.cvd-dropdown') as HTMLDivElement;\n\n    // Store references for later use\n    this.resetZoomBtn = resetZoomBtn;\n    this.toggleGridBtn = toggleGridBtn;\n    this.viewModeSelect = viewModeSelect;\n    this.volumeHeatmapBtn = volumeHeatmapBtn;\n    this.volumeHeatmapDropdown = volumeHeatmapDropdown;\n    this.measureBtn = measureBtn;\n    this.cvdBtn = cvdBtn;\n    this.cvdDropdown = cvdDropdown;\n\n    // Store timeframe button references\n    const tfButtons = container.querySelectorAll('.tf-btn') as NodeListOf<HTMLButtonElement>;\n    tfButtons.forEach(btn => {\n      const tf = btn.dataset.timeframe as Timeframe;\n      if (tf) {\n        this.timeframeButtons.set(tf, btn);\n      }\n    });\n\n    // Store Delta Table button reference\n    this.deltaTableBtn = container.querySelector('#deltaTableToggle') as HTMLButtonElement;\n\n    // Store Edit Settings button and popup references\n    this.editBtn = container.querySelector('#editSettings') as HTMLButtonElement;\n    this.editPopup = container.querySelector('#editSettingsPopup') as HTMLDivElement;\n  }\n\n  /**\n   * Initializes the canvas element and context.\n   * @param container The container element\n   * @param chartContainer The chart container element\n   */\n  private initializeCanvas(container: HTMLElement, chartContainer: HTMLElement): void {\n    // Use existing canvas if available, otherwise create one\n    this.canvas = container.querySelector('canvas') as HTMLCanvasElement;\n    if (!this.canvas) {\n      this.canvas = document.createElement('canvas');\n      if (chartContainer) {\n        chartContainer.appendChild(this.canvas);\n      } else {\n        // Fallback: append directly to container if chart container not found\n        container.appendChild(this.canvas);\n      }\n    }\n\n    const ctx = this.canvas.getContext('2d');\n    if (!ctx) throw new Error('Canvas 2D context not available');\n    this.ctx = ctx;\n  }\n\n  /**\n   * Initializes chart options with defaults and user-provided values.\n   * @param options User-provided options\n   * @param container The container element\n   * @param chartContainer The chart container element\n   */\n  private initializeOptions(options: VFCOptions, container: HTMLElement, chartContainer: HTMLElement): void {\n    this.options = {\n      width: options.width || container.clientWidth || 800,\n      height: options.height || (chartContainer ? chartContainer.clientHeight : container.clientHeight) || 600,\n      showGrid: options.showGrid ?? true,\n      showBounds: options.showBounds ?? false,\n      showVolumeFootprint: options.showVolumeFootprint ?? true,\n      showVolumeHeatmap: options.showVolumeHeatmap ?? false,\n      volumeHeatmapDynamic: options.volumeHeatmapDynamic ?? true,\n      showCVD: options.showCVD ?? false,\n      cvdHeightRatio: options.cvdHeightRatio || 0.2,\n      cvdType: options.cvdType || 'ticker',\n      showDeltaTable: options.showDeltaTable ?? false,\n      tickSize: options.tickSize || 10,\n      initialZoomX: options.initialZoomX || 0.55,\n      initialZoomY: options.initialZoomY || 0.55,\n      margin: options.margin || this.margin,\n      theme: options.theme || {},\n      tableRowVisibility: options.tableRowVisibility || {\n        volume: true,\n        volChange: true,\n        buyVol: true,\n        buyVolPercent: true,\n        sellVol: true,\n        sellVolPercent: true,\n        delta: true,\n        deltaPercent: true,\n        minDelta: true,\n        maxDelta: true,\n        poc: true,\n        hlRange: true\n      },\n      tableRowHeight: options.tableRowHeight || 16,\n      footprintStyle: options.footprintStyle || 'bid_ask',\n      showOI: options.showOI ?? false,\n      oiHeightRatio: options.oiHeightRatio || 0.15,\n      showFundingRate: options.showFundingRate ?? false,\n      fundingRateHeightRatio: options.fundingRateHeightRatio || 0.1\n    };\n\n    this.margin = this.options.margin;\n    this.showGrid = this.options.showGrid;\n    this.showBounds = this.options.showBounds;\n    this.showVolumeFootprint = this.options.showVolumeFootprint;\n    this.showVolumeHeatmap = this.options.showVolumeHeatmap;\n    this.showVolumeHeatmap = this.options.showVolumeHeatmap;\n    this.volumeHeatmapDynamic = this.options.volumeHeatmapDynamic;\n    this.showCVD = this.options.showCVD;\n    this.cvdType = this.options.cvdType;\n    this.showOI = this.options.showOI ?? false;\n    this.showFundingRate = this.options.showFundingRate ?? false;\n    this.view.zoomX = this.options.initialZoomX;\n    this.view.zoomY = this.options.initialZoomY;\n  }\n\n  /**\n   * Initializes the chart modules (Scales, Interactions, Drawing).\n   */\n  private initializeModules(): void {\n    this.scales = new Scales(\n      this.data,\n      this.margin,\n      this.view,\n      this.options.width,\n      this.options.height,\n      this.showVolumeFootprint,\n      this.TICK,\n      this.baseRowPx,\n      this.TEXT_VIS,\n      this.showCVD,\n      this.options.cvdHeightRatio ?? 0.2,\n      this.getDeltaTableHeight(),\n      this.options.footprintStyle,\n      this.showOI,\n      this.options.oiHeightRatio ?? 0.15,\n      this.showFundingRate,\n      this.options.fundingRateHeightRatio ?? 0.1\n    );\n\n    this.interactions = new Interactions(\n      this.canvas,\n      this.margin,\n      this.view,\n      {\n        ...this.events,\n        onPan: () => {\n          if (this.cvdDynamic && this.showCVD) this.calculateCVD();\n          this.drawing.drawAll();\n        },\n        onZoom: () => {\n          if (this.cvdDynamic && this.showCVD) this.calculateCVD();\n          this.drawing.drawAll();\n        },\n        onMouseMove: () => this.drawing.drawAll(),\n        onCvdResize: (ratio: number) => {\n          this.options.cvdHeightRatio = ratio;\n          this.updateOptions({ cvdHeightRatio: ratio });\n        },\n        onTableResize: (height: number) => {\n          const allRows = ['volume', 'volChange', 'buyVol', 'buyVolPercent', 'sellVol', 'sellVolPercent', 'delta', 'deltaPercent', 'minDelta', 'maxDelta', 'poc', 'hlRange'];\n          const visibility = this.options.tableRowVisibility || {};\n          const visibleRows = allRows.filter(key => visibility[key as keyof typeof visibility] !== false).length;\n          if (visibleRows > 0) {\n            const tableRowHeight = Math.max(10, height / visibleRows);\n            this.options.tableRowHeight = tableRowHeight;\n            this.updateOptions({ tableRowHeight });\n          }\n        }\n      },\n      this.crosshair,\n      this.scales\n    );\n\n    this.drawing = new Drawing(\n      this.ctx,\n      this.data,\n      this.margin,\n      this.view,\n      this.showGrid,\n      this.showBounds,\n      this.showVolumeFootprint,\n      this.showVolumeHeatmap,\n      this.volumeHeatmapDynamic,\n      this.scales,\n      this.options.theme,\n      this.crosshair,\n      this.lastPrice,\n      this.interactions,\n      this.cvdValues,\n      this.showDeltaTable,\n      this.options.tableRowVisibility,\n      this.options.tableRowHeight ?? 16,\n      this.options.footprintStyle,\n      this.showOI,\n      this.options.oiHeightRatio ?? 0.15,\n      this.showFundingRate,\n      this.options.fundingRateHeightRatio ?? 0.1\n    );\n  }\n\n  constructor(container: HTMLElement, options: VFCOptions = {}, events: VFCEvents = {}) {\n    // Create the complete chart structure with toolbars\n    this.createChartStructure(container);\n\n    // Get the chart container for accurate dimensions\n    const chartContainer = container.querySelector('.vfc-chart-container') as HTMLElement;\n\n    // Initialize canvas\n    this.initializeCanvas(container, chartContainer);\n\n    // Initialize options\n    this.initializeOptions(options, container, chartContainer);\n\n    // Set events\n    this.events = events;\n\n    // Initialize modules with default tick size (will be updated in setData)\n    this.initializeModules();\n\n    // Set up canvas and event handlers\n    this.setupCanvas();\n    this.bindEvents();\n    this.bindToolbarEvents();\n    this.updateButtonText();\n    this.layout();\n  }\n\n  private setupCanvas() {\n    const DPR = Math.max(1, Math.round(window.devicePixelRatio || 1));\n    this.canvas.style.width = this.options.width + 'px';\n    this.canvas.style.height = this.options.height + 'px';\n    this.canvas.width = Math.max(1, Math.floor(this.options.width * DPR));\n    this.canvas.height = Math.max(1, Math.floor(this.options.height * DPR));\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.scale(DPR, DPR);\n  }\n\n  private bindEvents() {\n    this.canvas.addEventListener('wheel', this.handleWheel.bind(this), { passive: false });\n    this.canvas.addEventListener('pointerdown', this.handlePointerDown.bind(this));\n    window.addEventListener('resize', this.layout.bind(this));\n  }\n\n  private bindToolbarEvents() {\n    if (this.resetZoomBtn) {\n      this.resetZoomBtn.addEventListener('click', () => {\n        // Reset view to show the end of the data, like initial load\n        if (this.data.length > 0) {\n          this.updateOptions({\n            width: this.options.width,\n            height: this.options.height\n          });\n          // After updating options, set view to show last candles\n          const s = this.scales.scaledSpacing();\n          const contentW = this.options.width - this.margin.left - this.margin.right;\n          const visibleCount = Math.ceil(contentW / s);\n          const startIndex = Math.max(0, this.data.length - visibleCount);\n          this.view.offsetX = startIndex * s;\n          // Center the last candle's close price vertically at canvas center\n          const lastPrice = this.lastPrice!;\n          const centerRow = (this.options.height / 2) / this.scales.rowHeightPx();\n          const priceRow = this.scales.priceToRowIndex(lastPrice); // with current offsetRows=0\n          this.view.offsetRows = centerRow - priceRow;\n          this.drawing.drawAll();\n        }\n      });\n    }\n\n    if (this.toggleGridBtn) {\n      this.toggleGridBtn.addEventListener('click', () => {\n        this.updateOptions({\n          showGrid: !this.options.showGrid\n        });\n      });\n    }\n\n    if (this.viewModeSelect) {\n      this.viewModeSelect.addEventListener('change', () => {\n        const mode = this.viewModeSelect!.value;\n        if (mode === 'candles') {\n          this.updateOptions({ showVolumeFootprint: false });\n        } else {\n          this.updateOptions({\n            showVolumeFootprint: true,\n            footprintStyle: mode as 'bid_ask' | 'delta'\n          });\n        }\n      });\n    }\n\n    // Volume Heatmap simple toggle handler\n    if (this.volumeHeatmapBtn) {\n      this.volumeHeatmapBtn.addEventListener('click', () => {\n        this.showVolumeHeatmap = !this.showVolumeHeatmap;\n        this.updateOptions({ showVolumeHeatmap: this.showVolumeHeatmap });\n        this.updateButtonText();\n      });\n    }\n\n\n    if (this.measureBtn) {\n      this.measureBtn.addEventListener('click', () => {\n        const isActive = this.interactions.getMeasureMode();\n        if (isActive) {\n          // Deactivate measure mode\n          this.interactions.setMeasureMode(false);\n          this.measureBtn?.classList.remove('active');\n        } else {\n          // Activate measure mode\n          this.interactions.setMeasureMode(true);\n          this.measureBtn?.classList.add('active');\n        }\n        this.drawing.drawAll();\n      });\n    }\n\n    // CVD simple toggle handler\n    if (this.cvdBtn) {\n      this.cvdBtn.addEventListener('click', () => {\n        this.showCVD = !this.showCVD;\n        if (this.showCVD) {\n          this.calculateCVD();\n        }\n        this.updateOptions({ showCVD: this.showCVD });\n        this.updateButtonText();\n      });\n    }\n\n    // Timeframe button handlers\n    this.timeframeButtons.forEach((btn, tf) => {\n      btn.addEventListener('click', () => {\n        this.setTimeframe(tf);\n      });\n    });\n\n    // Delta Table toggle button handler\n    if (this.deltaTableBtn) {\n      this.deltaTableBtn.addEventListener('click', () => {\n        this.showDeltaTable = !this.showDeltaTable;\n        this.options.showDeltaTable = this.showDeltaTable;\n        if (this.showDeltaTable) {\n          this.deltaTableBtn!.classList.add('active');\n        } else {\n          this.deltaTableBtn!.classList.remove('active');\n        }\n        // Rebuild drawing with new option\n        this.updateOptions({ showDeltaTable: this.showDeltaTable });\n      });\n    }\n\n    // Edit Settings button and popup handlers\n    if (this.editBtn && this.editPopup) {\n      // Toggle popup on button click\n      this.editBtn.addEventListener('click', (e) => {\n        e.stopPropagation();\n        const isVisible = this.editPopup!.style.display === 'block';\n        this.hideAllDropdowns();\n        if (!isVisible) {\n          this.editPopup!.style.display = 'block';\n        }\n      });\n\n      // Table row checkbox handlers\n      this.editPopup.querySelectorAll('input[type=\"checkbox\"]').forEach(cb => {\n        const checkbox = cb as HTMLInputElement;\n        checkbox.addEventListener('change', () => {\n          const rowKey = checkbox.dataset.row as keyof typeof this.options.tableRowVisibility;\n          if (rowKey && this.options.tableRowVisibility) {\n            this.options.tableRowVisibility[rowKey] = checkbox.checked;\n            this.updateOptions({ tableRowVisibility: this.options.tableRowVisibility });\n          }\n        });\n      });\n\n      // Heatmap type radio handlers\n      this.editPopup.querySelectorAll('input[name=\"heatmapType\"]').forEach(radio => {\n        const r = radio as HTMLInputElement;\n        r.addEventListener('change', () => {\n          const isDynamic = r.value === 'dynamic';\n          this.volumeHeatmapDynamic = isDynamic;\n          this.updateOptions({ volumeHeatmapDynamic: isDynamic });\n          this.updateButtonText();\n        });\n      });\n\n      // CVD type radio handlers\n      this.editPopup.querySelectorAll('input[name=\"cvdType\"]').forEach(radio => {\n        const r = radio as HTMLInputElement;\n        r.addEventListener('change', () => {\n          const cvdType = r.value as 'ticker' | 'footprint';\n          this.options.cvdType = cvdType;\n          this.updateOptions({ cvdType });\n          this.calculateCVD();\n          this.updateButtonText();\n        });\n      });\n\n      // Footprint Style radio handlers\n      this.editPopup.querySelectorAll('input[name=\"footprintStyle\"]').forEach(radio => {\n        const r = radio as HTMLInputElement;\n        r.addEventListener('change', () => {\n          const footprintStyle = r.value as 'bid_ask' | 'delta';\n          this.options.footprintStyle = footprintStyle;\n          this.updateOptions({ footprintStyle });\n        });\n      });\n\n      // OI indicator checkbox handler\n      const oiCheckbox = this.editPopup.querySelector('#showOI') as HTMLInputElement | null;\n      if (oiCheckbox) {\n        oiCheckbox.checked = this.showOI;\n        oiCheckbox.addEventListener('change', () => {\n          this.showOI = oiCheckbox.checked;\n          this.drawing.setShowOI(this.showOI);\n          this.updateOptions({ showOI: this.showOI });\n        });\n      }\n\n      // Funding Rate indicator checkbox handler\n      const frCheckbox = this.editPopup.querySelector('#showFundingRate') as HTMLInputElement | null;\n      if (frCheckbox) {\n        frCheckbox.checked = this.showFundingRate;\n        frCheckbox.addEventListener('change', () => {\n          this.showFundingRate = frCheckbox.checked;\n          this.drawing.setShowFundingRate(this.showFundingRate);\n          this.updateOptions({ showFundingRate: this.showFundingRate });\n        });\n      }\n\n      // Close popup when clicking outside\n      document.addEventListener('click', (e) => {\n        if (!this.editBtn?.contains(e.target as Node) &&\n          !this.editPopup?.contains(e.target as Node)) {\n          this.editPopup!.style.display = 'none';\n        }\n      });\n    }\n  }\n\n  private handleWheel(e: WheelEvent) {\n    this.interactions.handleWheel(e);\n    this.drawing.drawAll();\n  }\n\n  private handlePointerDown(e: PointerEvent) {\n    this.interactions.handlePointerDown(e);\n  }\n\n  private layout() {\n    const container = this.canvas.parentElement;\n    if (container) {\n      this.options.width = container.clientWidth || this.options.width;\n      this.options.height = container.clientHeight || this.options.height;\n    }\n\n    // Recreate scales and drawing with new dimensions\n    this.scales = new Scales(\n      this.data,\n      this.margin,\n      this.view,\n      this.options.width,\n      this.options.height,\n      this.showVolumeFootprint,\n      this.TICK,\n      this.baseRowPx,\n      this.TEXT_VIS,\n      this.showCVD,\n      this.options.cvdHeightRatio ?? 0.2,\n      this.getDeltaTableHeight(),\n      this.options.footprintStyle,\n      this.showOI,\n      this.options.oiHeightRatio ?? 0.15,\n      this.showFundingRate,\n      this.options.fundingRateHeightRatio ?? 0.1\n    );\n\n    this.drawing = new Drawing(\n      this.ctx,\n      this.data,\n      this.margin,\n      this.view,\n      this.showGrid,\n      this.showBounds,\n      this.showVolumeFootprint,\n      this.showVolumeHeatmap,\n      this.volumeHeatmapDynamic,\n      this.scales,\n      this.options.theme,\n      this.crosshair,\n      this.lastPrice,\n      this.interactions,\n      this.cvdValues,\n      this.showDeltaTable,\n      this.options.tableRowVisibility,\n      this.options.tableRowHeight ?? 16,\n      this.options.footprintStyle,\n      this.showOI,\n      this.options.oiHeightRatio ?? 0.15,\n      this.showFundingRate,\n      this.options.fundingRateHeightRatio ?? 0.1\n    );\n\n    // Pass stored indicator data to the new Drawing instance\n    if (this.oiData.length > 0) {\n      this.drawing.updateOIData(this.oiData);\n    }\n    if (this.fundingRateData.length > 0) {\n      this.drawing.updateFundingRateData(this.fundingRateData);\n    }\n\n    this.setupCanvas();\n    this.drawing.drawAll();\n  }\n\n  // Public API\n  public setData(data: CandleData[]) {\n    this.data = data;\n\n    // Store data in aggregator as base 1m data for aggregation support\n    // Only store if this is NOT aggregated data (i.e., it's raw 1m data)\n    if (!this.isAggregatedData) {\n      this.aggregator.setBase1mData(data);\n      this.aggregator.setTimeframe('1m');\n      this.currentTimeframe = '1m';\n      // Update button states to show 1m as active\n      this.timeframeButtons.forEach((btn, tf) => {\n        if (tf === '1m') {\n          btn.classList.add('active');\n        } else {\n          btn.classList.remove('active');\n        }\n      });\n    }\n\n    // Detect tick size from data if not explicitly provided\n    if (!this.options.tickSize && this.data.length > 0) {\n      const detectedTick = this.detectTickSize();\n      console.log('Detected tick size:', detectedTick);\n      this.TICK = detectedTick;\n    } else if (this.options.tickSize) {\n      console.log('Using explicit tick size:', this.options.tickSize);\n      this.TICK = this.options.tickSize;\n    }\n\n    if (data.length > 0) {\n      this.lastPrice = data[data.length - 1].close;\n    }\n\n    // Update scales with new data\n    this.scales = new Scales(\n      this.data,\n      this.margin,\n      this.view,\n      this.options.width,\n      this.options.height,\n      this.showVolumeFootprint,\n      this.TICK,\n      this.baseRowPx,\n      this.TEXT_VIS,\n      this.showCVD,\n      this.options.cvdHeightRatio ?? 0.2,\n      this.getDeltaTableHeight(),\n      this.options.footprintStyle,\n      this.showOI,\n      this.options.oiHeightRatio ?? 0.15,\n      this.showFundingRate,\n      this.options.fundingRateHeightRatio ?? 0.1\n    );\n\n    // Invalidate ladderTop cache when tick size changes\n    if (this.TICK !== this.options.tickSize) {\n      this.TICK = this.options.tickSize || this.TICK;\n      this.scales.invalidateLadderTop();\n    }\n\n    // Invalidate ladderTop cache when data changes\n    this.scales.invalidateLadderTop();\n\n    // Set initial view to show the end of the chart (latest data) and center the last price vertically\n    if (data.length > 0) {\n      const s = this.scales.scaledSpacing();\n      const contentW = this.options.width - this.margin.left - this.margin.right;\n      const visibleCount = Math.ceil(contentW / s);\n      const startIndex = Math.max(0, data.length - visibleCount);\n      this.view.offsetX = startIndex * s;\n      // Center the last candle's close price vertically at canvas center\n      const lastPrice = this.lastPrice!;\n      const centerRow = (this.options.height / 2) / this.scales.rowHeightPx();\n      const priceRow = this.scales.priceToRowIndex(lastPrice); // with current offsetRows=0\n      this.view.offsetRows = centerRow - priceRow;\n    }\n\n    // Calculate CVD values AFTER scales and view are set\n    console.log('setData: calling calculateCVD');\n    this.calculateCVD();\n    console.log('setData: CVD values calculated, length:', this.cvdValues.length);\n\n    this.drawing = new Drawing(\n      this.ctx,\n      this.data,\n      this.margin,\n      this.view,\n      this.showGrid,\n      this.showBounds,\n      this.showVolumeFootprint,\n      this.showVolumeHeatmap,\n      this.volumeHeatmapDynamic,\n      this.scales,\n      this.options.theme,\n      this.crosshair,\n      this.lastPrice,\n      this.interactions,\n      this.cvdValues,\n      this.showDeltaTable,\n      this.options.tableRowVisibility,\n      this.options.tableRowHeight ?? 16,\n      this.options.footprintStyle,\n      this.showOI,\n      this.options.oiHeightRatio ?? 0.15,\n      this.showFundingRate,\n      this.options.fundingRateHeightRatio ?? 0.1\n    );\n\n    // Pass stored indicator data to the new Drawing instance\n    if (this.oiData.length > 0) {\n      this.drawing.updateOIData(this.oiData);\n    }\n    if (this.fundingRateData.length > 0) {\n      this.drawing.updateFundingRateData(this.fundingRateData);\n    }\n\n    this.drawing.drawAll();\n  }\n\n  public updateOptions(options: Partial<VFCOptions>) {\n    const oldShowVolumeFootprint = this.showVolumeFootprint;\n    const oldCvdType = this.cvdType;\n    Object.assign(this.options, options);\n    this.showGrid = this.options.showGrid;\n    this.showBounds = this.options.showBounds;\n    this.showVolumeFootprint = this.options.showVolumeFootprint;\n    this.showVolumeHeatmap = this.options.showVolumeHeatmap;\n    this.showVolumeHeatmap = this.options.showVolumeHeatmap;\n    this.volumeHeatmapDynamic = this.options.volumeHeatmapDynamic ?? this.volumeHeatmapDynamic;\n    this.showCVD = this.options.showCVD ?? this.showCVD;\n    this.cvdType = this.options.cvdType ?? 'ticker';\n    this.showOI = this.options.showOI ?? this.showOI;\n    this.showFundingRate = this.options.showFundingRate ?? this.showFundingRate;\n    // const oldCvdDynamic = this.cvdDynamic; // Wait, options doesn't have cvdDynamic directly exposed in interface? \n    // Types interface says: volumeHeatmapDynamic... wait, VFCOptions doesn't have cvdDynamic?\n    // Let's check src/types.ts\n    // I recall adding showCVD, cvdHeightRatio, cvdType.\n    // I did NOT add cvdDynamic to VFCOptions.\n    // But chart.ts has private cvdDynamic = true;\n\n    // For now, let's just focus on cvdType.\n\n    if (this.cvdType !== oldCvdType) {\n      this.calculateCVD();\n    }\n\n    console.log('updateOptions: volume heatmap options updated');\n\n    // If showVolumeFootprint changed, adjust view offsetX to maintain visible range\n    if (oldShowVolumeFootprint !== this.showVolumeFootprint && this.data.length > 0) {\n      const oldSpacing = oldShowVolumeFootprint ? 132 * this.view.zoomX : 16 * this.view.zoomX;\n      const newSpacing = this.showVolumeFootprint ? 132 * this.view.zoomX : 16 * this.view.zoomX;\n      const startIndex = Math.floor(this.view.offsetX / oldSpacing);\n      this.view.offsetX = startIndex * newSpacing;\n    }\n\n    // Recreate Scales first, then Drawing\n    this.scales = new Scales(\n      this.data,\n      this.margin,\n      this.view,\n      this.options.width,\n      this.options.height,\n      this.showVolumeFootprint,\n      this.TICK,\n      this.baseRowPx,\n      this.TEXT_VIS,\n      this.showCVD,\n      this.options.cvdHeightRatio ?? 0.2,\n      this.getDeltaTableHeight(),\n      this.options.footprintStyle,\n      this.showOI,\n      this.options.oiHeightRatio ?? 0.15,\n      this.showFundingRate,\n      this.options.fundingRateHeightRatio ?? 0.1\n    );\n\n    // Recalculate CVD if needed (e.g. type changed, or just to be safe with new scales)\n    if (this.showCVD) {\n      this.calculateCVD();\n    }\n\n    // Update Interactions with the new Scales instance\n    this.interactions.setScales(this.scales);\n\n    this.drawing = new Drawing(\n      this.ctx,\n      this.data,\n      this.margin,\n      this.view,\n      this.showGrid,\n      this.showBounds,\n      this.showVolumeFootprint,\n      this.showVolumeHeatmap,\n      this.volumeHeatmapDynamic,\n      this.scales,\n      this.options.theme,\n      this.crosshair,\n      this.lastPrice,\n      this.interactions,\n      this.cvdValues,\n      this.showDeltaTable,\n      this.options.tableRowVisibility,\n      this.options.tableRowHeight ?? 16,\n      this.options.footprintStyle,\n      this.showOI,\n      this.options.oiHeightRatio ?? 0.15,\n      this.showFundingRate,\n      this.options.fundingRateHeightRatio ?? 0.1\n    );\n\n    // Pass stored indicator data to the new Drawing instance\n    if (this.oiData.length > 0) {\n      this.drawing.updateOIData(this.oiData);\n    }\n    if (this.fundingRateData.length > 0) {\n      this.drawing.updateFundingRateData(this.fundingRateData);\n    }\n\n    this.layout();\n  }\n\n  public resize(width: number, height: number) {\n    this.options.width = width;\n    this.options.height = height;\n    this.layout();\n  }\n\n  public destroy() {\n    if (this.canvas.parentElement) {\n      this.canvas.parentElement.removeChild(this.canvas);\n    }\n  }\n\n\n  private calculateCVD() {\n    console.log('calculateCVD called, data length:', this.data.length);\n    if (this.data.length === 0) {\n      this.cvdValues = [];\n      return;\n    }\n\n    this.cvdValues = new Array(this.data.length);\n    let cumulative = 0;\n\n    // Calculate baseline index based on mode\n    let baselineIndex = 0;\n    if (this.cvdBaseline === 'session') {\n      // For session mode, find first candle of current session (simplified - using first candle)\n      baselineIndex = 0;\n    } else if (this.cvdBaseline === 'visible') {\n      // For visible mode, use first visible candle\n      const vr = this.scales?.getVisibleRange();\n      baselineIndex = vr ? vr.startIndex : 0;\n    }\n\n    console.log('calculateCVD: cvdDynamic =', this.cvdDynamic);\n    if (this.cvdDynamic) {\n      // Dynamic mode: calculate CVD starting from the visible range\n      const vr = this.scales?.getVisibleRange();\n      if (vr) {\n        const startIndex = vr.startIndex;\n        const endIndex = vr.endIndex;\n        cumulative = 0;\n        for (let i = startIndex; i < endIndex; i++) {\n          if (i < this.data.length) {\n            const candle = this.data[i];\n            let delta = 0;\n            if (this.cvdType === 'ticker') {\n              const volume = candle.footprint.reduce((sum, level) => sum + level.buy + level.sell, 0);\n              const sign = Math.sign(candle.close - candle.open);\n              if (candle.close === candle.open) {\n                delta = 0;\n              } else {\n                delta = volume * sign;\n              }\n            } else {\n              delta = candle.footprint.reduce((sum, level) => sum + (level.buy - level.sell), 0);\n            }\n            cumulative += delta;\n            this.cvdValues[i] = cumulative;\n          }\n        }\n\n        // Apply normalization\n        if (this.cvdNormalize) {\n          const baselineValue = this.cvdValues[startIndex];\n          for (let i = startIndex; i < endIndex; i++) {\n            if (i < this.cvdValues.length && this.cvdValues[i] !== undefined) {\n              this.cvdValues[i] -= baselineValue;\n            }\n          }\n        }\n      }\n    } else {\n      // Static mode\n      for (let i = 0; i < this.data.length; i++) {\n        const candle = this.data[i];\n        let delta = 0;\n        if (this.cvdType === 'ticker') {\n          const volume = candle.footprint.reduce((sum, level) => sum + level.buy + level.sell, 0);\n          const sign = Math.sign(candle.close - candle.open);\n          if (candle.close === candle.open) {\n            delta = 0;\n          } else {\n            delta = volume * sign;\n          }\n        } else {\n          delta = candle.footprint.reduce((sum, level) => sum + (level.buy - level.sell), 0);\n        }\n\n        cumulative += delta;\n        this.cvdValues[i] = cumulative;\n      }\n\n      // Apply normalization\n      if (this.cvdNormalize && baselineIndex < this.cvdValues.length && baselineIndex >= 0) {\n        const baselineValue = this.cvdValues[baselineIndex];\n        for (let i = 0; i < this.cvdValues.length; i++) {\n          this.cvdValues[i] -= baselineValue;\n        }\n      }\n    }\n\n    // Ensure Drawing module has the latest data\n    if (this.drawing) {\n      this.drawing.updateCVD(this.cvdValues);\n    }\n  }\n\n  // Public method to add new candle data for streaming updates (O(1))\n  public addCandle(candle: CandleData) {\n    this.data.push(candle);\n\n    // Calculate CVD for new candle (O(1) update)\n    const lastCVD = this.cvdValues.length > 0 ? this.cvdValues[this.cvdValues.length - 1] : 0;\n\n    // Calculate new candle delta\n    let delta = 0;\n    if (this.cvdType === 'ticker') {\n      const volume = candle.footprint.reduce((sum, level) => sum + level.buy + level.sell, 0);\n      const sign = Math.sign(candle.close - candle.open);\n      if (candle.close === candle.open) {\n        delta = 0;\n      } else {\n        delta = volume * sign;\n      }\n    } else {\n      delta = candle.footprint.reduce((sum, level) => sum + (level.buy - level.sell), 0);\n    }\n\n    const newCVD = (lastCVD || 0) + delta;\n\n    // Apply normalization if needed\n    let normalizedCVD = newCVD;\n    if (this.cvdNormalize) {\n      let baselineValue = 0;\n      if (this.cvdBaseline === 'global') {\n        baselineValue = this.cvdValues.length > 0 ? this.cvdValues[0] : 0;\n      } else if (this.cvdBaseline === 'visible') {\n        const vr = this.scales?.getVisibleRange();\n        const baselineIndex = vr ? vr.startIndex : 0;\n        baselineValue = baselineIndex < this.cvdValues.length ? this.cvdValues[baselineIndex] : 0;\n      }\n      normalizedCVD = newCVD - (baselineValue || 0);\n    }\n\n    this.cvdValues.push(normalizedCVD);\n\n    // Update scales and redraw\n    this.scales = new Scales(\n      this.data,\n      this.margin,\n      this.view,\n      this.options.width,\n      this.options.height,\n      this.showVolumeFootprint,\n      this.TICK,\n      this.baseRowPx,\n      this.TEXT_VIS,\n      this.showCVD,\n      this.options.cvdHeightRatio ?? 0.2,\n      this.getDeltaTableHeight(),\n      this.options.footprintStyle,\n      this.showOI,\n      this.options.oiHeightRatio ?? 0.15,\n      this.showFundingRate,\n      this.options.fundingRateHeightRatio ?? 0.1\n    );\n\n    this.drawing = new Drawing(\n      this.ctx,\n      this.data,\n      this.margin,\n      this.view,\n      this.showGrid,\n      this.showBounds,\n      this.showVolumeFootprint,\n      this.showVolumeHeatmap,\n      this.volumeHeatmapDynamic,\n      this.scales,\n      this.options.theme,\n      this.crosshair,\n      this.lastPrice,\n      this.interactions,\n      this.cvdValues,\n      this.showDeltaTable,\n      this.options.tableRowVisibility,\n      this.options.tableRowHeight ?? 16,\n      this.options.footprintStyle,\n      this.showOI,\n      this.options.oiHeightRatio ?? 0.15,\n      this.showFundingRate,\n      this.options.fundingRateHeightRatio ?? 0.1\n    );\n\n    // Pass stored indicator data to the new Drawing instance\n    if (this.oiData.length > 0) {\n      this.drawing.updateOIData(this.oiData);\n    }\n    if (this.fundingRateData.length > 0) {\n      this.drawing.updateFundingRateData(this.fundingRateData);\n    }\n\n    this.drawing.drawAll();\n  }\n\n  private updateButtonText() {\n    if (this.viewModeSelect) {\n      if (!this.options.showVolumeFootprint) {\n        this.viewModeSelect.value = 'candles';\n      } else {\n        this.viewModeSelect.value = this.options.footprintStyle || 'bid_ask';\n      }\n    }\n    if (this.volumeHeatmapBtn) {\n      if (this.options.showVolumeHeatmap) {\n        const mode = this.options.volumeHeatmapDynamic ? 'Dynamic' : 'Static';\n        this.volumeHeatmapBtn.textContent = `Volume Heatmap (${mode})`;\n      } else {\n        this.volumeHeatmapBtn.textContent = 'Volume Heatmap';\n      }\n    }\n    if (this.cvdBtn) {\n      if (this.showCVD) {\n        const mode = this.cvdType === 'ticker' ? 'Ticker' : 'Footprint';\n        this.cvdBtn.textContent = `CVD (${mode})`;\n      } else {\n        this.cvdBtn.textContent = 'CVD';\n      }\n    }\n  }\n\n  /** Calculate the height of the delta table based on visible rows */\n  private getDeltaTableHeight(): number {\n    if (!this.showDeltaTable) return 0;\n    const rowHeight = this.options.tableRowHeight || 16;\n    const allRows = ['volume', 'volChange', 'buyVol', 'buyVolPercent', 'sellVol', 'sellVolPercent', 'delta', 'deltaPercent', 'minDelta', 'maxDelta', 'poc', 'hlRange'];\n    const visibility = this.options.tableRowVisibility || {};\n    const visibleRows = allRows.filter(key => visibility[key as keyof typeof visibility] !== false);\n    return rowHeight * visibleRows.length;\n  }\n\n  private hideAllDropdowns() {\n    if (this.volumeHeatmapDropdown) {\n      this.volumeHeatmapDropdown.style.display = 'none';\n    }\n    if (this.cvdDropdown) {\n      this.cvdDropdown.style.display = 'none';\n    }\n    if (this.editPopup) {\n      this.editPopup.style.display = 'none';\n    }\n  }\n\n  /**\n   * Set the timeframe for aggregation and update display\n   */\n  public setTimeframe(tf: Timeframe): void {\n    this.currentTimeframe = tf;\n    this.aggregator.setTimeframe(tf);\n\n    // Update button active states\n    this.timeframeButtons.forEach((btn, buttonTf) => {\n      if (buttonTf === tf) {\n        btn.classList.add('active');\n      } else {\n        btn.classList.remove('active');\n      }\n    });\n\n    // Get aggregated data and redraw\n    const aggregatedData = this.aggregator.getData();\n    console.log(`setTimeframe(${tf}): aggregated ${aggregatedData.length} candles from ${this.aggregator.getBase1mData().length} 1m candles`);\n\n    if (aggregatedData.length > 0) {\n      // Set flag to prevent setData from overwriting aggregator base data\n      this.isAggregatedData = (tf !== '1m');\n      this.setData(aggregatedData);\n      this.isAggregatedData = false;\n    }\n  }\n\n  /**\n   * Get the current timeframe\n   */\n  public getTimeframe(): Timeframe {\n    return this.currentTimeframe;\n  }\n\n  /**\n   * Set the base 1-minute data and display at current timeframe\n   */\n  public set1mData(data: CandleData[]): void {\n    this.aggregator.setBase1mData(data);\n    const aggregatedData = this.aggregator.getData();\n    this.setData(aggregatedData);\n  }\n\n  /**\n   * Update or add a 1-minute candle (for live updates)\n   * If the candle has the same timestamp as the last candle, it updates it\n   * Otherwise, it adds a new candle\n   */\n  public update1mCandle(candle: CandleData): void {\n    this.aggregator.update1mCandle(candle);\n\n    // Get the aggregated data for current timeframe\n    const aggregatedData = this.aggregator.getData();\n\n    if (aggregatedData.length === 0) {\n      return;\n    }\n\n    // Update the chart data efficiently\n    if (this.data.length === 0) {\n      this.setData(aggregatedData);\n      return;\n    }\n\n    const lastAggCandle = aggregatedData[aggregatedData.length - 1];\n    const lastDataCandle = this.data[this.data.length - 1];\n    const lastAggTime = new Date(lastAggCandle.time).getTime();\n    const lastDataTime = new Date(lastDataCandle.time).getTime();\n\n    if (lastAggTime === lastDataTime) {\n      // Update the last candle in place\n      this.data[this.data.length - 1] = lastAggCandle;\n      this.lastPrice = lastAggCandle.close;\n\n      // Update CVD for the last candle\n      if (this.cvdValues.length > 0) {\n        const prevCVD = this.cvdValues.length > 1 ? this.cvdValues[this.cvdValues.length - 2] : 0;\n        let delta = 0;\n        if (this.cvdType === 'ticker') {\n          const volume = lastAggCandle.footprint.reduce((sum, level) => sum + level.buy + level.sell, 0);\n          const sign = Math.sign(lastAggCandle.close - lastAggCandle.open);\n          delta = lastAggCandle.close === lastAggCandle.open ? 0 : volume * sign;\n        } else {\n          delta = lastAggCandle.footprint.reduce((sum, level) => sum + (level.buy - level.sell), 0);\n        }\n        this.cvdValues[this.cvdValues.length - 1] = prevCVD + delta;\n      }\n    } else {\n      // New candle - append it\n      this.addCandle(lastAggCandle);\n    }\n\n    // Update the drawing's lastPrice before redrawing so price line updates in real-time\n    this.drawing.updateLastPrice(this.lastPrice);\n    this.drawing.drawAll();\n  }\n\n  // Getters for API access\n  public getOptions() { return this.options; }\n  public getShowGrid() { return this.showGrid; }\n\n  /**\n   * Set Open Interest data for the indicator\n   * @param data Array of { timestamp: number, value: number }\n   * @param replace If true, replaces existing data. If false (default), merges with existing data.\n   */\n  public setOIData(data: { timestamp: number; value: number }[], replace: boolean = false): void {\n    if (replace) {\n      this.oiData = data;\n    } else {\n      this.oiData = this.mergeData(this.oiData, data);\n    }\n\n    // Always update Drawing with data (so it's available when user enables indicator)\n    this.drawing.updateOIData(this.oiData);\n\n    // Only redraw if indicator is visible\n    if (this.showOI) {\n      this.drawing.drawAll();\n    }\n  }\n\n  /**\n   * Set Funding Rate data for the indicator\n   * @param data Array of { timestamp: number, value: number }\n   * @param replace If true, replaces existing data. If false (default), merges with existing data.\n   */\n  public setFundingRateData(data: { timestamp: number; value: number }[], replace: boolean = false): void {\n    if (replace) {\n      this.fundingRateData = data;\n    } else {\n      this.fundingRateData = this.mergeData(this.fundingRateData, data);\n    }\n\n    // Always update Drawing with data (so it's available when user enables indicator)\n    this.drawing.updateFundingRateData(this.fundingRateData);\n\n    // Only redraw if indicator is visible\n    if (this.showFundingRate) {\n      this.drawing.drawAll();\n    }\n  }\n\n  /** Get current OI data */\n  public getOIData() { return this.oiData; }\n\n  /** Get current funding rate data */\n  public getFundingRateData() { return this.fundingRateData; }\n\n  // Helper to merge time-series data\n  private mergeData(current: { timestamp: number; value: number }[], incoming: { timestamp: number; value: number }[]) {\n    if (!current || current.length === 0) return incoming;\n    if (!incoming || incoming.length === 0) return current;\n\n    const map = new Map<number, { timestamp: number; value: number }>();\n\n    // Performance optimization: if incoming is strictly after current, just concat\n    const lastCurrent = current[current.length - 1];\n    const firstIncoming = incoming[0];\n\n    if (firstIncoming.timestamp > lastCurrent.timestamp) {\n      return [...current, ...incoming];\n    }\n\n    // Otherwise full merge\n    for (const item of current) {\n      map.set(item.timestamp, item);\n    }\n    for (const item of incoming) {\n      map.set(item.timestamp, item);\n    }\n\n    return Array.from(map.values()).sort((a, b) => a.timestamp - b.timestamp);\n  }\n}","import { ISeriesApi } from './iseries-api';\nimport { IPriceScaleApi } from './iprice-scale-api';\nimport { VolumeFootprintData, VolumeFootprintSeriesOptions } from './ichart-api';\nimport { IChartImplementation } from './ichart-api';\n\nexport class VolumeFootprintSeriesApi implements ISeriesApi<VolumeFootprintData> {\n  private chart: IChartImplementation;\n  private seriesOptions: VolumeFootprintSeriesOptions;\n\n  constructor(chart: IChartImplementation, options?: VolumeFootprintSeriesOptions) {\n    this.chart = chart;\n    this.seriesOptions = options || {};\n  }\n\n  setData(data: VolumeFootprintData[]): void {\n    // Convert data format and set on chart\n    const convertedData = data.map(d => ({\n      time: typeof d.time === 'number' ? new Date(d.time).toISOString() : d.time,\n      open: d.open,\n      high: d.high,\n      low: d.low,\n      close: d.close,\n      footprint: d.footprint || []\n    }));\n    this.chart.setData(convertedData);\n  }\n\n  update(data: VolumeFootprintData): void {\n    // Update latest data point\n    this.setData([data]);\n  }\n\n  data(): VolumeFootprintData[] {\n    // Return current data (would need to store this)\n    return [];\n  }\n\n  applyOptions(options: VolumeFootprintSeriesOptions): void {\n    this.seriesOptions = { ...this.seriesOptions, ...options };\n  }\n\n  options(): VolumeFootprintSeriesOptions {\n    return this.seriesOptions;\n  }\n\n  priceScale(): IPriceScaleApi {\n    return {\n      applyOptions: () => {},\n      options: () => ({}),\n      width: () => 40,\n      height: () => 0,\n      isEmpty: () => false,\n      priceToCoordinate: () => null,\n      coordinateToPrice: () => null\n    };\n  }\n\n  visible(): boolean {\n    return true;\n  }\n\n  setVisible(visible: boolean): void {\n    // Implement visibility toggle\n  }\n}","import { ITimeScaleApi, TimeScaleOptions, TimeScaleRange } from './itime-scale-api';\nimport { IChartImplementation } from './ichart-api';\n\nexport class TimeScaleApi implements ITimeScaleApi {\n  private chart: IChartImplementation;\n\n  constructor(chart: IChartImplementation) {\n    this.chart = chart;\n  }\n\n  applyOptions(options: TimeScaleOptions): void {\n    // Apply time scale options\n  }\n\n  options(): TimeScaleOptions {\n    return {\n      visible: true,\n      timeVisible: true,\n      barSpacing: 30\n    };\n  }\n\n  scrollToPosition(position: number, animated?: boolean): void {\n    // Scroll to position\n  }\n\n  scrollToRealTime(): void {\n    // Scroll to real time\n  }\n\n  getVisibleRange(): TimeScaleRange | null {\n    return null;\n  }\n\n  setVisibleRange(range: TimeScaleRange): void {\n    // Set visible range\n  }\n\n  resetTimeScale(): void {\n    // Reset time scale\n  }\n\n  fitContent(): void {\n    // Fit content\n  }\n\n  timeToCoordinate(time: string | number): number | null {\n    return null;\n  }\n\n  coordinateToTime(coordinate: number): string | number | null {\n    return null;\n  }\n}","import { IPriceScaleApi, PriceScaleOptions } from './iprice-scale-api';\nimport { IChartImplementation } from './ichart-api';\n\nexport class PriceScaleApi implements IPriceScaleApi {\n  private chart: IChartImplementation;\n\n  constructor(chart: IChartImplementation) {\n    this.chart = chart;\n  }\n\n  applyOptions(options: PriceScaleOptions): void {\n    // Apply price scale options\n  }\n\n  options(): PriceScaleOptions {\n    return {\n      visible: true,\n      autoScale: true\n    };\n  }\n\n  width(): number {\n    return 40;\n  }\n\n  height(): number {\n    return 0; // Would need to calculate actual height\n  }\n\n  isEmpty(): boolean {\n    return false;\n  }\n\n  priceToCoordinate(price: number): number | null {\n    return null; // Would need to implement coordinate conversion\n  }\n\n  coordinateToPrice(coordinate: number): number | null {\n    return null; // Would need to implement coordinate conversion\n  }\n}","import { IChartApi, IChartImplementation, ChartOptions, VolumeFootprintSeriesOptions, VolumeFootprintData } from './ichart-api';\nimport { ISeriesApi } from './iseries-api';\nimport { ITimeScaleApi } from './itime-scale-api';\nimport { IPriceScaleApi } from './iprice-scale-api';\nimport { Chart as VFC } from '../chart'; // Import the Chart implementation directly\nimport { VolumeFootprintSeriesApi } from './volume-footprint-series-api';\nimport { TimeScaleApi } from './time-scale-api';\nimport { PriceScaleApi } from './price-scale-api';\n\nexport class ChartApi implements IChartApi {\n  private chart: IChartImplementation;\n  private series: ISeriesApi[] = [];\n  private timeScaleApi: TimeScaleApi;\n  private priceScaleApi: PriceScaleApi;\n\n  constructor(container: HTMLElement, options: ChartOptions) {\n    // Convert options to VFC format\n    const vfcOptions = {\n      width: options.width,\n      height: options.height,\n      showGrid: options.grid?.horzLines?.visible ?? true,\n      showBounds: false,\n      tickSize: 10,\n      initialZoomX: 2, // Higher zoom to show footprints\n      initialZoomY: 1,\n      margin: { top: 0, bottom: 40, left: 0, right: 60 }\n    };\n\n    this.chart = new VFC(container, vfcOptions);\n    this.timeScaleApi = new TimeScaleApi(this.chart);\n    this.priceScaleApi = new PriceScaleApi(this.chart);\n  }\n\n  addVolumeFootprintSeries(options?: VolumeFootprintSeriesOptions): ISeriesApi<VolumeFootprintData> {\n    const seriesApi = new VolumeFootprintSeriesApi(this.chart, options);\n    this.series.push(seriesApi);\n    return seriesApi;\n  }\n\n  removeSeries(seriesApi: ISeriesApi<any>): void {\n    const index = this.series.indexOf(seriesApi);\n    if (index > -1) {\n      this.series.splice(index, 1);\n    }\n  }\n\n  timeScale(): ITimeScaleApi {\n    return this.timeScaleApi;\n  }\n\n  priceScale(): IPriceScaleApi {\n    return this.priceScaleApi;\n  }\n\n  applyOptions(options: ChartOptions): void {\n    // Convert and apply options\n    const vfcOptions = {\n      width: options.width,\n      height: options.height,\n      showGrid: options.grid?.horzLines?.visible ?? true\n    };\n    this.chart.updateOptions(vfcOptions);\n  }\n\n  options(): ChartOptions {\n    const opts = this.chart.getOptions();\n    return {\n      width: opts.width,\n      height: opts.height,\n      grid: {\n        horzLines: { visible: this.chart.getShowGrid() }\n      }\n    };\n  }\n\n  resize(width: number, height: number): void {\n    this.chart.resize(width, height);\n  }\n\n  remove(): void {\n    this.chart.destroy();\n  }\n}","import { IChartApi, ChartOptions } from './ichart-api';\nimport { ChartApi } from './chart-api';\n\nexport function createChart(container: HTMLElement, options: ChartOptions): IChartApi {\n  return new ChartApi(container, options);\n}","/**\n * Canvas renderer for the Depth of Market (DOM) component.\n * Handles all drawing operations for the DOM ladder.\n */\n\nimport { DOMLevel, DOMData, DOMTheme, DOMOptions, DOMColumn } from './dom-types';\n\n/**\n * Default theme for the DOM.\n */\nexport const DEFAULT_THEME: Required<DOMTheme> = {\n    background: '#181a1f',\n    rowBackgroundEven: '#1a1c21',\n    rowBackgroundOdd: '#1e2025',\n    headerBackground: '#111113',\n    textColor: '#e0e0e0',\n    headerTextColor: '#aaaaaa',\n    bidColor: '#26a69a',\n    askColor: '#ef5350',\n    deltaPositive: '#26a69a',\n    deltaNegative: '#ef5350',\n    midPriceColor: '#4caf50',\n    atBidColor: '#2196f3',\n    atAskColor: '#ef5350',\n    gridColor: '#333333',\n    priceColumnBackground: '#252830',\n};\n\n/**\n * DOMRenderer handles all canvas drawing for the DOM component.\n */\nexport class DOMRenderer {\n    private canvas: HTMLCanvasElement;\n    private ctx: CanvasRenderingContext2D;\n    private theme: Required<DOMTheme>;\n    private dpr: number;\n\n    constructor(canvas: HTMLCanvasElement, theme: Partial<DOMTheme> = {}) {\n        this.canvas = canvas;\n        const ctx = canvas.getContext('2d');\n        if (!ctx) {\n            throw new Error('Could not get 2D context from canvas');\n        }\n        this.ctx = ctx;\n        this.theme = { ...DEFAULT_THEME, ...theme };\n        this.dpr = window.devicePixelRatio || 1;\n    }\n\n    /**\n     * Update the theme.\n     */\n    setTheme(theme: Partial<DOMTheme>): void {\n        this.theme = { ...DEFAULT_THEME, ...theme };\n    }\n\n    /**\n     * Render the complete DOM view.\n     */\n    render(\n        data: DOMData | null,\n        options: Required<DOMOptions>,\n        scrollOffset: number,\n        columns: DOMColumn[]\n    ): void {\n        const { width, height, rowHeight, fontSize, fontFamily, showHeaders } = options;\n        const ctx = this.ctx;\n        const theme = this.theme;\n\n        // Clear canvas\n        ctx.fillStyle = theme.background;\n        ctx.fillRect(0, 0, width * this.dpr, height * this.dpr);\n\n        if (!data || data.levels.length === 0) {\n            this.renderNoData(width, height, fontSize, fontFamily);\n            return;\n        }\n\n        // Calculate layout\n        const headerHeight = showHeaders ? rowHeight + 4 : 0;\n        const contentHeight = height - headerHeight;\n        const visibleRows = Math.floor(contentHeight / rowHeight);\n\n        // Find mid-price index to center the view\n        const midPriceIndex = this.findMidPriceIndex(data.levels, data.midPrice);\n\n        // Calculate start index based on scroll offset and centering on mid-price\n        let startIndex = midPriceIndex - Math.floor(visibleRows / 2) + scrollOffset;\n        startIndex = Math.max(0, Math.min(startIndex, data.levels.length - visibleRows));\n\n        // Calculate max values for bar scaling\n        const maxBid = Math.max(...data.levels.map(l => l.bid), 1);\n        const maxAsk = Math.max(...data.levels.map(l => l.ask), 1);\n        const maxSold = Math.max(...data.levels.map(l => l.sold), 1);\n        const maxBought = Math.max(...data.levels.map(l => l.bought), 1);\n        const maxDelta = Math.max(...data.levels.map(l => Math.abs(l.delta)), 1);\n        const maxVolume = Math.max(...data.levels.map(l => l.volume), 1);\n        const maxValues = { maxBid, maxAsk, maxSold, maxBought, maxDelta, maxVolume };\n\n        // Render headers\n        if (showHeaders) {\n            this.renderHeaders(columns, rowHeight, fontSize, fontFamily);\n        }\n\n        // Render rows\n        for (let i = 0; i < visibleRows && (startIndex + i) < data.levels.length; i++) {\n            const level = data.levels[startIndex + i];\n            const y = headerHeight + i * rowHeight;\n            const isMidPrice = Math.abs(level.price - data.midPrice) < 0.01;\n\n            this.renderRow(\n                level,\n                y,\n                rowHeight,\n                columns,\n                maxValues,\n                fontSize,\n                fontFamily,\n                i % 2 === 0,\n                isMidPrice\n            );\n        }\n\n        // Render grid lines\n        this.renderGridLines(columns, headerHeight, height);\n    }\n\n    /**\n     * Find the index of the price level closest to mid-price.\n     */\n    private findMidPriceIndex(levels: DOMLevel[], midPrice: number): number {\n        let closestIndex = 0;\n        let closestDiff = Infinity;\n\n        for (let i = 0; i < levels.length; i++) {\n            const diff = Math.abs(levels[i].price - midPrice);\n            if (diff < closestDiff) {\n                closestDiff = diff;\n                closestIndex = i;\n            }\n        }\n\n        return closestIndex;\n    }\n\n    /**\n     * Render \"No Data\" message.\n     */\n    private renderNoData(\n        width: number,\n        height: number,\n        fontSize: number,\n        fontFamily: string\n    ): void {\n        const ctx = this.ctx;\n        ctx.fillStyle = this.theme.textColor;\n        ctx.font = `${fontSize * this.dpr}px ${fontFamily}`;\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        ctx.fillText('No DOM Data', (width * this.dpr) / 2, (height * this.dpr) / 2);\n    }\n\n    /**\n     * Render column headers.\n     */\n    private renderHeaders(\n        columns: DOMColumn[],\n        rowHeight: number,\n        fontSize: number,\n        fontFamily: string\n    ): void {\n        const ctx = this.ctx;\n        const theme = this.theme;\n\n        // Header background\n        ctx.fillStyle = theme.headerBackground;\n        let totalWidth = 0;\n        columns.forEach(col => totalWidth += col.width);\n        ctx.fillRect(0, 0, totalWidth * this.dpr, (rowHeight + 4) * this.dpr);\n\n        // Header text\n        ctx.fillStyle = theme.headerTextColor;\n        ctx.font = `bold ${(fontSize - 1) * this.dpr}px ${fontFamily}`;\n\n        let x = 0;\n        for (const col of columns) {\n            const textX = this.getTextX(x, col.width, col.align);\n            ctx.textAlign = col.align;\n            ctx.textBaseline = 'middle';\n            ctx.fillText(col.label, textX * this.dpr, ((rowHeight + 4) / 2) * this.dpr);\n            x += col.width;\n        }\n\n        // Header bottom border\n        ctx.strokeStyle = theme.gridColor;\n        ctx.lineWidth = this.dpr;\n        ctx.beginPath();\n        ctx.moveTo(0, (rowHeight + 4) * this.dpr);\n        ctx.lineTo(totalWidth * this.dpr, (rowHeight + 4) * this.dpr);\n        ctx.stroke();\n    }\n\n    /**\n     * Render a single row.\n     */\n    private renderRow(\n        level: DOMLevel,\n        y: number,\n        rowHeight: number,\n        columns: DOMColumn[],\n        maxValues: { maxBid: number; maxAsk: number; maxSold: number; maxBought: number; maxDelta: number; maxVolume: number },\n        fontSize: number,\n        fontFamily: string,\n        isEven: boolean,\n        isMidPrice: boolean\n    ): void {\n        const ctx = this.ctx;\n        const theme = this.theme;\n\n        let x = 0;\n        for (const col of columns) {\n            // Row background\n            let bgColor = isEven ? theme.rowBackgroundEven : theme.rowBackgroundOdd;\n            if (col.id === 'price') {\n                bgColor = theme.priceColumnBackground;\n            }\n\n            ctx.fillStyle = bgColor;\n            ctx.fillRect(x * this.dpr, y * this.dpr, col.width * this.dpr, rowHeight * this.dpr);\n\n            // Mid-price highlight\n            if (isMidPrice) {\n                ctx.fillStyle = theme.midPriceColor + '30';\n                ctx.fillRect(x * this.dpr, y * this.dpr, col.width * this.dpr, rowHeight * this.dpr);\n            }\n\n            // Render bar if applicable\n            if (col.getBarValue && col.barColor) {\n                const maxValue = this.getMaxValueForColumn(col.id, maxValues);\n                const barValue = col.getBarValue(level, maxValue);\n                const barWidth = (col.width - 4) * Math.min(barValue, 1);\n\n                if (barWidth > 0) {\n                    // Resolve bar color (can be string or function)\n                    const resolvedColor = typeof col.barColor === 'function'\n                        ? col.barColor(level)\n                        : col.barColor;\n                    ctx.fillStyle = resolvedColor + 'cc';  // Add opacity\n                    if (col.barSide === 'right') {\n                        ctx.fillRect(\n                            (x + 2) * this.dpr,\n                            (y + 2) * this.dpr,\n                            barWidth * this.dpr,\n                            (rowHeight - 4) * this.dpr\n                        );\n                    } else {\n                        ctx.fillRect(\n                            (x + col.width - 2 - barWidth) * this.dpr,\n                            (y + 2) * this.dpr,\n                            barWidth * this.dpr,\n                            (rowHeight - 4) * this.dpr\n                        );\n                    }\n                }\n            }\n\n            // Render text\n            const value = col.getValue(level);\n            if (value !== 0 && value !== '0') {\n                ctx.fillStyle = this.getTextColor(col.id, level, theme);\n                ctx.font = `${fontSize * this.dpr}px ${fontFamily}`;\n                ctx.textAlign = col.align;\n                ctx.textBaseline = 'middle';\n\n                const textX = this.getTextX(x, col.width, col.align);\n                const textY = y + rowHeight / 2;\n                ctx.fillText(String(value), textX * this.dpr, textY * this.dpr);\n            }\n\n            x += col.width;\n        }\n    }\n\n    /**\n     * Get max value for a column for bar scaling.\n     */\n    private getMaxValueForColumn(\n        colId: string,\n        maxValues: { maxBid: number; maxAsk: number; maxSold: number; maxBought: number; maxDelta: number; maxVolume: number }\n    ): number {\n        switch (colId) {\n            case 'bidVol':\n                return maxValues.maxSold;\n            case 'askVol':\n                return maxValues.maxBought;\n            case 'bid':\n            case 'atBid':\n                return maxValues.maxBid;\n            case 'ask':\n            case 'atAsk':\n                return maxValues.maxAsk;\n            case 'deltaVol':\n                return maxValues.maxDelta;\n            case 'volume':\n                return maxValues.maxVolume;\n            default:\n                return 1;\n        }\n    }\n\n    /**\n     * Get text color for a column.\n     */\n    private getTextColor(colId: string, level: DOMLevel, theme: Required<DOMTheme>): string {\n        switch (colId) {\n            case 'atBid':\n                return theme.atBidColor;  // Cyan for @Bid market orders\n            case 'atAsk':\n                return theme.atAskColor;  // Red for @Ask market orders\n            case 'bidVol':\n            case 'askVol':\n            case 'bid':\n            case 'ask':\n            case 'deltaVol':\n            case 'volume':\n            case 'price':\n            default:\n                return theme.textColor;  // White for all other columns\n        }\n    }\n\n    /**\n     * Get X position for text based on alignment.\n     */\n    private getTextX(columnX: number, columnWidth: number, align: 'left' | 'center' | 'right'): number {\n        switch (align) {\n            case 'left':\n                return columnX + 4;\n            case 'right':\n                return columnX + columnWidth - 4;\n            case 'center':\n            default:\n                return columnX + columnWidth / 2;\n        }\n    }\n\n    /**\n     * Render vertical grid lines between columns.\n     */\n    private renderGridLines(columns: DOMColumn[], headerHeight: number, height: number): void {\n        const ctx = this.ctx;\n        ctx.strokeStyle = this.theme.gridColor;\n        ctx.lineWidth = this.dpr;\n\n        let x = 0;\n        for (let i = 0; i < columns.length - 1; i++) {\n            x += columns[i].width;\n            ctx.beginPath();\n            ctx.moveTo(x * this.dpr, 0);\n            ctx.lineTo(x * this.dpr, height * this.dpr);\n            ctx.stroke();\n        }\n    }\n\n    /**\n     * Resize the canvas.\n     */\n    resize(width: number, height: number): void {\n        this.canvas.width = width * this.dpr;\n        this.canvas.height = height * this.dpr;\n        this.canvas.style.width = `${width}px`;\n        this.canvas.style.height = `${height}px`;\n    }\n}\n","/**\n * DOM (Depth of Market) Component\n * \n * Displays a ladder-style view of bid/ask prices with volume visualization.\n * Usage: const dom = new DOM(container, options); dom.setData(data);\n */\n\nimport { DOMLevel, DOMData, DOMOptions, DOMTheme, DOMColumn } from './dom-types';\nimport { DOMRenderer, DEFAULT_THEME } from './dom-renderer';\n\n/**\n * Default options for the DOM component.\n */\nconst DEFAULT_OPTIONS: Required<DOMOptions> = {\n    width: 600,\n    height: 400,\n    rowHeight: 20,\n    visibleLevels: 20,\n    fontSize: 11,\n    fontFamily: 'system-ui, -apple-system, Segoe UI, Roboto, sans-serif',\n    showHeaders: true,\n    theme: DEFAULT_THEME,\n    columns: {\n        bidVol: true,\n        askVol: true,\n        bid: true,\n        atBid: true,\n        atAsk: true,\n        ask: true,\n        price: true,\n        deltaVol: true,\n        volume: true,\n    },\n};\n\n/**\n * Column definitions for the DOM.\n */\nfunction createColumns(theme: Required<DOMTheme>, columnVisibility: Required<DOMOptions>['columns']): DOMColumn[] {\n    const columns: DOMColumn[] = [];\n\n    if (columnVisibility.bidVol) {\n        columns.push({\n            id: 'bidVol',\n            label: 'Bid Vol',\n            width: 60,\n            align: 'right',\n            getValue: (level) => level.sold > 0 ? formatVolume(level.sold) : '',\n            getBarValue: (level, max) => level.sold / max,\n            barColor: theme.bidColor,\n            barSide: 'left',  // Bar grows from right edge toward left (inward)\n        });\n    }\n\n    if (columnVisibility.askVol) {\n        columns.push({\n            id: 'askVol',\n            label: 'Ask Vol',\n            width: 60,\n            align: 'left',\n            getValue: (level) => level.bought > 0 ? formatVolume(level.bought) : '',\n            getBarValue: (level, max) => level.bought / max,\n            barColor: theme.askColor,\n            barSide: 'right',  // Bar grows from left edge toward right (inward)\n        });\n    }\n\n    if (columnVisibility.bid) {\n        columns.push({\n            id: 'bid',\n            label: 'Bid',\n            width: 60,\n            align: 'right',\n            getValue: (level) => level.bid > 0 ? formatVolume(level.bid) : '',\n            getBarValue: (level, max) => level.bid / max,\n            barColor: theme.bidColor,\n            barSide: 'left',\n        });\n    }\n\n    if (columnVisibility.atBid) {\n        columns.push({\n            id: 'atBid',\n            label: '@Bid',\n            width: 50,\n            align: 'right',\n            getValue: (level) => level.sold > 0 ? formatVolume(level.sold) : '',\n        });\n    }\n\n    if (columnVisibility.atAsk) {\n        columns.push({\n            id: 'atAsk',\n            label: '@Ask',\n            width: 50,\n            align: 'right',\n            getValue: (level) => level.bought > 0 ? formatVolume(level.bought) : '',\n        });\n    }\n\n    if (columnVisibility.ask) {\n        columns.push({\n            id: 'ask',\n            label: 'Ask',\n            width: 60,\n            align: 'left',\n            getValue: (level) => level.ask > 0 ? formatVolume(level.ask) : '',\n            getBarValue: (level, max) => level.ask / max,\n            barColor: theme.askColor,\n            barSide: 'right',\n        });\n    }\n\n    if (columnVisibility.price) {\n        columns.push({\n            id: 'price',\n            label: 'Price',\n            width: 80,\n            align: 'center',\n            getValue: (level) => formatPrice(level.price),\n        });\n    }\n\n    if (columnVisibility.deltaVol) {\n        columns.push({\n            id: 'deltaVol',\n            label: 'Delta',\n            width: 60,\n            align: 'right',\n            getValue: (level) => {\n                if (level.delta === 0) return '';\n                const prefix = level.delta > 0 ? '+' : '';\n                return prefix + formatVolume(level.delta);\n            },\n            getBarValue: (level, max) => Math.abs(level.delta) / max,\n            barColor: level => level.delta >= 0 ? theme.deltaPositive : theme.deltaNegative,\n            barSide: 'left',\n        });\n    }\n\n    if (columnVisibility.volume) {\n        columns.push({\n            id: 'volume',\n            label: 'Volume',\n            width: 70,\n            align: 'right',\n            getValue: (level) => level.volume > 0 ? formatVolume(level.volume) : '',\n            getBarValue: (level, max) => level.volume / max,\n            barColor: '#555555',  // Dark gray bars\n            barSide: 'left',\n        });\n    }\n\n    return columns;\n}\n\n/**\n * Format volume numbers for display.\n */\nfunction formatVolume(value: number): string {\n    if (Math.abs(value) >= 1000000) {\n        return (value / 1000000).toFixed(1) + 'M';\n    }\n    if (Math.abs(value) >= 1000) {\n        return (value / 1000).toFixed(1) + 'K';\n    }\n    return value.toFixed(value < 10 ? 2 : 0);\n}\n\n/**\n * Format price for display.\n */\nfunction formatPrice(price: number): string {\n    if (price >= 1000) {\n        return price.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });\n    }\n    return price.toFixed(2);\n}\n\n/**\n * DOM (Depth of Market) component.\n * Displays a ladder-style view of order book and trade data.\n */\nexport class DOM {\n    private container: HTMLElement;\n    private canvas: HTMLCanvasElement;\n    private renderer: DOMRenderer;\n    private options: Required<DOMOptions>;\n    private data: DOMData | null = null;\n    private columns: DOMColumn[];\n    private scrollOffset: number = 0;\n    private animationFrameId: number | null = null;\n    private isDragging: boolean = false;\n    private lastY: number = 0;\n\n    constructor(container: HTMLElement, options: DOMOptions = {}) {\n        this.container = container;\n\n        // Merge options with defaults\n        this.options = {\n            ...DEFAULT_OPTIONS,\n            ...options,\n            theme: { ...DEFAULT_THEME, ...(options.theme || {}) },\n            columns: { ...DEFAULT_OPTIONS.columns, ...(options.columns || {}) },\n        };\n\n        // Auto-detect dimensions from container if not specified\n        if (!options.width) {\n            this.options.width = container.clientWidth || DEFAULT_OPTIONS.width;\n        }\n        if (!options.height) {\n            this.options.height = container.clientHeight || DEFAULT_OPTIONS.height;\n        }\n\n        // Create columns based on theme and visibility\n        this.columns = createColumns(this.options.theme as Required<DOMTheme>, this.options.columns);\n\n        // Create canvas element\n        this.canvas = document.createElement('canvas');\n        this.canvas.style.display = 'block';\n        this.canvas.style.background = this.options.theme.background || DEFAULT_THEME.background;\n        container.appendChild(this.canvas);\n\n        // Create renderer\n        this.renderer = new DOMRenderer(this.canvas, this.options.theme);\n        this.renderer.resize(this.options.width, this.options.height);\n\n        // Bind events\n        this.bindEvents();\n\n        // Initial render\n        this.render();\n    }\n\n    /**\n     * Bind mouse/touch events for scrolling.\n     */\n    private bindEvents(): void {\n        // Mouse wheel scrolling\n        this.canvas.addEventListener('wheel', this.handleWheel.bind(this), { passive: false });\n\n        // Mouse drag scrolling\n        this.canvas.addEventListener('mousedown', this.handleMouseDown.bind(this));\n        this.canvas.addEventListener('mousemove', this.handleMouseMove.bind(this));\n        this.canvas.addEventListener('mouseup', this.handleMouseUp.bind(this));\n        this.canvas.addEventListener('mouseleave', this.handleMouseUp.bind(this));\n\n        // Touch scrolling\n        this.canvas.addEventListener('touchstart', this.handleTouchStart.bind(this), { passive: false });\n        this.canvas.addEventListener('touchmove', this.handleTouchMove.bind(this), { passive: false });\n        this.canvas.addEventListener('touchend', this.handleTouchEnd.bind(this));\n    }\n\n    private handleWheel(e: WheelEvent): void {\n        e.preventDefault();\n        const delta = Math.sign(e.deltaY);\n        this.scrollOffset += delta;\n        this.render();\n    }\n\n    private handleMouseDown(e: MouseEvent): void {\n        this.isDragging = true;\n        this.lastY = e.clientY;\n    }\n\n    private handleMouseMove(e: MouseEvent): void {\n        if (!this.isDragging) return;\n        const deltaY = this.lastY - e.clientY;\n        this.scrollOffset += Math.round(deltaY / this.options.rowHeight);\n        this.lastY = e.clientY;\n        this.render();\n    }\n\n    private handleMouseUp(): void {\n        this.isDragging = false;\n    }\n\n    private handleTouchStart(e: TouchEvent): void {\n        if (e.touches.length === 1) {\n            this.isDragging = true;\n            this.lastY = e.touches[0].clientY;\n        }\n    }\n\n    private handleTouchMove(e: TouchEvent): void {\n        if (!this.isDragging || e.touches.length !== 1) return;\n        e.preventDefault();\n        const deltaY = this.lastY - e.touches[0].clientY;\n        this.scrollOffset += Math.round(deltaY / this.options.rowHeight);\n        this.lastY = e.touches[0].clientY;\n        this.render();\n    }\n\n    private handleTouchEnd(): void {\n        this.isDragging = false;\n    }\n\n    /**\n     * Render the DOM.\n     */\n    private render(): void {\n        if (this.animationFrameId) {\n            cancelAnimationFrame(this.animationFrameId);\n        }\n\n        this.animationFrameId = requestAnimationFrame(() => {\n            this.renderer.render(this.data, this.options, this.scrollOffset, this.columns);\n            this.animationFrameId = null;\n        });\n    }\n\n    /**\n     * Set or update DOM data.\n     */\n    setData(data: DOMData): void {\n        this.data = data;\n        this.render();\n    }\n\n    /**\n     * Update options.\n     */\n    updateOptions(options: Partial<DOMOptions>): void {\n        this.options = {\n            ...this.options,\n            ...options,\n            theme: { ...this.options.theme, ...(options.theme || {}) },\n            columns: { ...this.options.columns, ...(options.columns || {}) },\n        };\n\n        // Recreate columns if visibility changed\n        if (options.columns) {\n            this.columns = createColumns(this.options.theme as Required<DOMTheme>, this.options.columns);\n        }\n\n        // Update renderer theme\n        if (options.theme) {\n            this.renderer.setTheme(this.options.theme);\n        }\n\n        this.render();\n    }\n\n    /**\n     * Resize the DOM component.\n     */\n    resize(width: number, height: number): void {\n        this.options.width = width;\n        this.options.height = height;\n        this.renderer.resize(width, height);\n        this.render();\n    }\n\n    /**\n     * Center the view on the mid-price.\n     */\n    centerOnMidPrice(): void {\n        this.scrollOffset = 0;\n        this.render();\n    }\n\n    /**\n     * Get current data.\n     */\n    getData(): DOMData | null {\n        return this.data;\n    }\n\n    /**\n     * Get current options.\n     */\n    getOptions(): Required<DOMOptions> {\n        return this.options;\n    }\n\n    /**\n     * Destroy the DOM component and clean up.\n     */\n    destroy(): void {\n        if (this.animationFrameId) {\n            cancelAnimationFrame(this.animationFrameId);\n        }\n\n        // Remove event listeners\n        this.canvas.removeEventListener('wheel', this.handleWheel.bind(this));\n        this.canvas.removeEventListener('mousedown', this.handleMouseDown.bind(this));\n        this.canvas.removeEventListener('mousemove', this.handleMouseMove.bind(this));\n        this.canvas.removeEventListener('mouseup', this.handleMouseUp.bind(this));\n        this.canvas.removeEventListener('mouseleave', this.handleMouseUp.bind(this));\n\n        // Remove canvas from container\n        if (this.canvas.parentNode) {\n            this.canvas.parentNode.removeChild(this.canvas);\n        }\n    }\n}\n\n// Re-export types for convenience\nexport type { DOMLevel, DOMData, DOMOptions, DOMTheme } from './dom-types';\n"],"names":["VFC"],"mappings":"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"}