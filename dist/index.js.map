{"version":3,"file":"index.js","sources":["../src/scales.ts","../src/interactions.ts","../src/drawing.ts","../src/chart.ts","../src/api/volume-footprint-series-api.ts","../src/api/time-scale-api.ts","../src/api/price-scale-api.ts","../src/api/chart-api.ts","../src/api/create-chart.ts"],"sourcesContent":["import { CandleData } from './types';\n\nexport class Scales {\n  private data: CandleData[] = [];\n  private margin: { top: number; bottom: number; left: number; right: number };\n  private view: { zoomY: number; zoomX: number; offsetRows: number; offsetX: number };\n  private canvasWidth: number;\n  private canvasHeight: number;\n  private showVolumeFootprint: boolean;\n  private TICK: number;\n  private baseRowPx: number;\n  private TEXT_VIS: { minZoomX: number; minRowPx: number; minBoxPx: number };\n\n  constructor(\n    data: CandleData[],\n    margin: { top: number; bottom: number; left: number; right: number },\n    view: { zoomY: number; zoomX: number; offsetRows: number; offsetX: number },\n    canvasWidth: number,\n    canvasHeight: number,\n    showVolumeFootprint: boolean,\n    TICK: number,\n    baseRowPx: number,\n    TEXT_VIS: { minZoomX: number; minRowPx: number; minBoxPx: number }\n  ) {\n    this.data = data;\n    this.margin = margin;\n    this.view = view;\n    this.canvasWidth = canvasWidth;\n    this.canvasHeight = canvasHeight;\n    this.showVolumeFootprint = showVolumeFootprint;\n    this.TICK = TICK;\n    this.baseRowPx = baseRowPx;\n    this.TEXT_VIS = TEXT_VIS;\n  }\n\n  chartHeight(): number {\n    return this.canvasHeight - this.margin.top - this.margin.bottom;\n  }\n\n  rowHeightPx(): number {\n    return this.baseRowPx * this.view.zoomY;\n  }\n\n  scaledSpacing(): number {\n    if (!this.showVolumeFootprint) {\n      return (15 + 1) * this.view.zoomX; // Candle width + 1px gap when volume footprint is off\n    }\n    return 132 * this.view.zoomX; // Reduced spacing for closer candle layout\n  }\n\n  scaledCandle(): number {\n    return 15 * this.view.zoomX; // BASE_CANDLE * zoomX\n  }\n\n  scaledBox(): number {\n    return 55 * this.view.zoomX; // BASE_BOX * zoomX\n  }\n\n  scaledImb(): number {\n    return 3 * this.view.zoomX; // Thinner imbalance boxes\n  }\n\n  shouldShowCellText(): boolean {\n    return (\n      this.view.zoomX >= this.TEXT_VIS.minZoomX &&\n      this.rowHeightPx() >= this.TEXT_VIS.minRowPx &&\n      this.scaledBox() >= this.TEXT_VIS.minBoxPx\n    );\n  }\n\n  priceToRowIndex(price: number): number {\n    return (this.ladderTop - price) / this.TICK + this.view.offsetRows;\n  }\n\n  rowIndexToPrice(row: number): number {\n    return this.ladderTop - (row - this.view.offsetRows) * this.TICK;\n  }\n\n  rowToY(row: number): number {\n    return this.margin.top + row * this.rowHeightPx();\n  }\n\n  priceToY(price: number): number {\n    return this.rowToY(this.priceToRowIndex(price));\n  }\n\n  indexToX(i: number, startIndex: number): number {\n    const s = this.scaledSpacing();\n    return this.margin.left + (i - startIndex) * s + s / 2 - this.xShift;\n  }\n\n  getVisibleRange(): { startIndex: number; endIndex: number } {\n    const s = this.scaledSpacing();\n    const pixelOffset = this.view.offsetX;\n    const startFloat = pixelOffset / s;\n    const startIndex = Math.max(0, Math.floor(startFloat));\n    const contentW = this.canvasWidth - this.margin.left - this.margin.right;\n    const visibleCount = Math.ceil(contentW / s) + 2;\n    const endIndex = Math.min(this.data.length, startIndex + visibleCount);\n    return { startIndex, endIndex };\n  }\n\n  computePriceBarLabels(): Array<{ price: number; y: number }> {\n    const pixelSpacing = 28;\n    const chartHeightPx = this.chartHeight();\n    const maxLabels = 7;\n    const numLabels = Math.min(maxLabels, Math.floor(chartHeightPx / pixelSpacing));\n\n    const pTop = this.rowIndexToPrice(0);\n    const pBot = this.rowIndexToPrice(Math.floor(chartHeightPx / this.rowHeightPx()));\n    const pMin = Math.min(pTop, pBot);\n    const pMax = Math.max(pTop, pBot);\n    const priceRange = pMax - pMin;\n\n    const stepPrice = Math.max(this.TICK, priceRange / Math.max(1, numLabels - 1));\n\n    let start = Math.ceil(pMin / stepPrice) * stepPrice;\n    const out = [];\n    for (let price = start; price <= pMax + 1e-6; price += stepPrice) {\n      out.push({ price: Math.round(price), y: this.priceToY(price) });\n    }\n    return out;\n  }\n\n  formatK(v: number): string {\n    const a = Math.abs(v);\n    if (a >= 1e6) return (v / 1e6).toFixed(2) + \"M\";\n    if (a >= 1e3) return (v / 1e3).toFixed(2) + \"K\";\n    return Math.round(v).toString();\n  }\n\n  private get xShift(): number {\n    const s = this.scaledSpacing();\n    const pixelOffset = this.view.offsetX;\n    const startFloat = pixelOffset / s;\n    const startIndex = Math.max(0, Math.floor(startFloat));\n    const shift = pixelOffset - startIndex * s;\n    return shift < 0 ? shift + s : shift;\n  }\n\n  screenXToDataIndex(screenX: number): number {\n    const vr = this.getVisibleRange();\n    const s = this.scaledSpacing();\n    const relativeX = screenX - this.margin.left + this.xShift - s / 2;\n    return vr.startIndex + Math.floor(relativeX / s);\n  }\n\n  // Exact fractional data index for precise drawing coordinates\n  screenXToExactDataIndex(screenX: number): number {\n    const vr = this.getVisibleRange();\n    const s = this.scaledSpacing();\n    const relativeX = screenX - this.margin.left + this.xShift - s / 2;\n    return vr.startIndex + relativeX / s;\n  }\n\n  screenYToPrice(screenY: number): number {\n    // Use the exact same calculation as the crosshair\n    return this.rowIndexToPrice(\n      (screenY - this.margin.top) / this.rowHeightPx() + this.view.offsetRows\n    );\n  }\n\n  private get ladderTop(): number {\n    if (this.data.length === 0) return 10000;\n    return Math.ceil(Math.max(...this.data.map(c => c.high)) / this.TICK) * this.TICK + 10 * this.TICK;\n  }\n}","import { VFCEvents, MeasureRectangle } from './types';\nimport { Scales } from './scales';\n\nexport class Interactions {\n  private canvas: HTMLCanvasElement;\n  private margin: { top: number; bottom: number; left: number; right: number };\n  private view: { zoomY: number; zoomX: number; offsetRows: number; offsetX: number };\n  private events: VFCEvents;\n  private crosshair: { x: number; y: number; visible: boolean };\n  private momentum = { raf: 0, vx: 0, lastTs: 0, active: false };\n  private readonly PAN_INVERT = { x: true, y: false };\n  private scales: Scales;\n\n\n  // Measure state\n  private isMeasureMode = false;\n  private measureRectangle: MeasureRectangle | null = null;\n\n  constructor(\n    canvas: HTMLCanvasElement,\n    margin: { top: number; bottom: number; left: number; right: number },\n    view: { zoomY: number; zoomX: number; offsetRows: number; offsetX: number },\n    events: VFCEvents,\n    crosshair: { x: number; y: number; visible: boolean },\n    scales: Scales\n  ) {\n    this.canvas = canvas;\n    this.margin = margin;\n    this.view = view;\n    this.events = events;\n    this.crosshair = crosshair;\n    this.scales = scales;\n    this.setupMouseTracking();\n  }\n\n  handleWheel(e: WheelEvent): void {\n    e.preventDefault();\n    const rect = this.canvas.getBoundingClientRect();\n    const mx = e.clientX - rect.left;\n    const my = e.clientY - rect.top;\n    const chartRight = this.canvas.clientWidth - this.margin.right;\n    const yBottom = this.margin.top + 600 - this.margin.top - this.margin.bottom; // chartHeight\n\n    const overPriceBar = mx > chartRight;\n    const overTimeline = my > yBottom;\n    const overChartBody = !overPriceBar && !overTimeline;\n\n    if (overPriceBar) {\n      this.view.zoomY *= (e.deltaY < 0 ? 1.1 : 0.9);\n      this.view.zoomY = Math.max(0.1, Math.min(8, this.view.zoomY));\n      this.events.onZoom?.(this.view.zoomX, this.view.zoomY);\n      this.clearMeasureRectangle();\n    } else if (overChartBody) {\n      const prev = this.view.zoomX;\n      const factor = (e.deltaY < 0 ? 1.1 : 0.9);\n      const next = Math.max(0.1, Math.min(8, prev * factor));\n      this.view.zoomX = next;\n      this.view.zoomY *= (next / prev); // Also zoom the price axis\n      this.view.zoomY = Math.max(0.1, Math.min(8, this.view.zoomY));\n      // Adjust offsetX to keep the same startIndex (prevent scrolling)\n      this.view.offsetX *= (next / prev);\n      this.events.onZoom?.(this.view.zoomX, this.view.zoomY);\n      this.clearMeasureRectangle();\n    } else if (overTimeline) {\n      // Timeline zoom: same mechanism as chart but only affects X axis\n      const prev = this.view.zoomX;\n      const factor = (e.deltaY < 0 ? 1.1 : 0.9);\n      const next = Math.max(0.1, Math.min(8, prev * factor));\n      this.view.zoomX = next;\n      this.view.offsetX *= (next / prev);\n      this.events.onZoom?.(this.view.zoomX, this.view.zoomY);\n      this.clearMeasureRectangle();\n    }\n  }\n\n  handlePointerDown(e: PointerEvent): void {\n    const rect = this.canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    // Check if we're in measure mode\n    if (this.isMeasureMode) {\n      this.handleMeasurePointerDown(e, x, y);\n      return;\n    }\n\n    // Normal pan mode\n    this.canvas.setPointerCapture(e.pointerId);\n    let lastX = e.clientX;\n    let lastY = e.clientY;\n    let velX = 0;\n    let lastT = performance.now();\n\n    const onMove = (ev: PointerEvent) => {\n      const now = performance.now();\n      const dt = Math.max(1, now - lastT);\n      const dx = ev.clientX - lastX;\n      const dy = ev.clientY - lastY;\n      lastX = ev.clientX;\n      lastY = ev.clientY;\n      lastT = now;\n\n      // 1:1 mouse movement like the original volume_footprint_chart.html\n      this.view.offsetX += (this.PAN_INVERT.x ? -dx : dx);\n      this.view.offsetRows += (this.PAN_INVERT.y ? -dy : dy) / (22 * this.view.zoomY); // rowHeightPx()\n      velX = (this.PAN_INVERT.x ? -dx : dx) / dt;\n      this.events.onPan?.(this.view.offsetX, this.view.offsetRows);\n      this.clearMeasureRectangle();\n    };\n\n    const onUp = () => {\n      this.canvas.releasePointerCapture(e.pointerId);\n      this.canvas.removeEventListener('pointermove', onMove);\n      this.canvas.removeEventListener('pointerup', onUp);\n      this.canvas.removeEventListener('pointercancel', onUp);\n      // Removed momentum to stop chart from continuing to move after mouse release\n    };\n\n    this.canvas.addEventListener('pointermove', onMove);\n    this.canvas.addEventListener('pointerup', onUp);\n    this.canvas.addEventListener('pointercancel', onUp);\n  }\n\n\n  private handleMeasurePointerDown(e: PointerEvent, x: number, y: number): void {\n    // Check if we're over the chart area\n    const chartRight = this.canvas.clientWidth - this.margin.right;\n    const canvasHeight = this.canvas.height / window.devicePixelRatio;\n    const yBottom = canvasHeight - this.margin.bottom;\n\n    const overChartBody = x >= this.margin.left && x <= chartRight &&\n                          y >= this.margin.top && y <= yBottom;\n\n    if (!overChartBody) return;\n\n    this.canvas.setPointerCapture(e.pointerId);\n\n    // Start measuring from this point - store screen coordinates directly\n    this.measureRectangle = {\n      startX: x,\n      startY: y,\n      endX: x,\n      endY: y\n    };\n\n    const onMove = (ev: PointerEvent) => {\n      const rect = this.canvas.getBoundingClientRect();\n      const currentX = ev.clientX - rect.left;\n      const currentY = ev.clientY - rect.top;\n\n      // Update the end point of the measure rectangle\n      if (this.measureRectangle) {\n        this.measureRectangle.endX = currentX;\n        this.measureRectangle.endY = currentY;\n      }\n\n      // Trigger redraw\n      this.events.onMouseMove?.(currentX, currentY, true);\n    };\n\n    const onUp = () => {\n      this.canvas.releasePointerCapture(e.pointerId);\n      this.canvas.removeEventListener('pointermove', onMove);\n      this.canvas.removeEventListener('pointerup', onUp);\n      this.canvas.removeEventListener('pointercancel', onUp);\n    };\n\n    this.canvas.addEventListener('pointermove', onMove);\n    this.canvas.addEventListener('pointerup', onUp);\n    this.canvas.addEventListener('pointercancel', onUp);\n  }\n\n\n\n\n\n  // Public methods for controlling measure mode\n  setMeasureMode(enabled: boolean): void {\n    this.isMeasureMode = enabled;\n    if (!enabled) {\n      this.measureRectangle = null;\n    }\n  }\n\n  getMeasureRectangle(): MeasureRectangle | null {\n    return this.measureRectangle;\n  }\n\n  clearMeasureRectangle(): void {\n    this.measureRectangle = null;\n  }\n\n  private cancelMomentum(): void {\n    if (this.momentum.raf) {\n      cancelAnimationFrame(this.momentum.raf);\n      this.momentum.raf = 0;\n    }\n    this.momentum.active = false;\n  }\n\n  private startMomentum(vx: number): void {\n    this.momentum.vx = vx;\n    this.momentum.lastTs = 0;\n    this.momentum.active = true;\n    if (!this.momentum.raf) {\n      this.momentum.raf = requestAnimationFrame(this.stepMomentum.bind(this));\n    }\n  }\n\n  private stepMomentum(ts: number): void {\n    if (!this.momentum.active) {\n      this.momentum.raf = 0;\n      return;\n    }\n    if (!this.momentum.lastTs) this.momentum.lastTs = ts;\n    const dt = ts - this.momentum.lastTs;\n    this.momentum.lastTs = ts;\n    this.view.offsetX += this.momentum.vx * dt;\n    this.momentum.vx *= 0.98;\n    if (Math.abs(this.momentum.vx) < 0.001) {\n      this.cancelMomentum();\n    }\n  }\n\n  private setupMouseTracking(): void {\n    this.canvas.addEventListener('mousemove', this.handleMouseMove.bind(this));\n    this.canvas.addEventListener('mouseleave', this.handleMouseLeave.bind(this));\n  }\n\n  private handleMouseMove(e: MouseEvent): void {\n    const rect = this.canvas.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    // Check if mouse is over the chart area\n    const chartRight = this.canvas.clientWidth - this.margin.right;\n    const canvasHeight = this.canvas.height / window.devicePixelRatio;\n    const yBottom = canvasHeight - this.margin.bottom;\n\n    const overChartBody = x >= this.margin.left && x <= chartRight &&\n                         y >= this.margin.top && y <= yBottom;\n\n    if (overChartBody) {\n      this.crosshair.x = x;\n      this.crosshair.y = y;\n      this.crosshair.visible = true;\n    } else {\n      this.crosshair.visible = false;\n    }\n\n    // Trigger redraw\n    this.events.onMouseMove?.(x, y, this.crosshair.visible);\n  }\n\n  private handleMouseLeave(): void {\n    this.crosshair.visible = false;\n    this.events.onMouseMove?.(-1, -1, false);\n  }\n}","import { CandleData, VFCTheme, MeasureRectangle } from './types';\nimport { Scales } from './scales';\n\nexport class Drawing {\n  private ctx: CanvasRenderingContext2D;\n  private data: CandleData[];\n  private margin: { top: number; bottom: number; left: number; right: number };\n  private view: { zoomY: number; zoomX: number; offsetRows: number; offsetX: number };\n  private showGrid: boolean;\n  private showBounds: boolean;\n  private showVolumeFootprint: boolean;\n  private scales: Scales;\n  private theme: VFCTheme;\n  private crosshair: { x: number; y: number; visible: boolean };\n  private lastPrice: number | null;\n  private interactions: any; // Reference to Interactions class to get dynamic measure rectangle\n\n  constructor(\n    ctx: CanvasRenderingContext2D,\n    data: CandleData[],\n    margin: { top: number; bottom: number; left: number; right: number },\n    view: { zoomY: number; zoomX: number; offsetRows: number; offsetX: number },\n    showGrid: boolean,\n    showBounds: boolean,\n    showVolumeFootprint: boolean,\n    scales: Scales,\n    theme: VFCTheme,\n    crosshair: { x: number; y: number; visible: boolean },\n    lastPrice: number | null,\n    interactions: any\n  ) {\n    this.ctx = ctx;\n    this.data = data;\n    this.margin = margin;\n    this.view = view;\n    this.showGrid = showGrid;\n    this.showBounds = showBounds;\n    this.showVolumeFootprint = showVolumeFootprint;\n    this.scales = scales;\n    this.theme = theme;\n    this.crosshair = crosshair;\n    this.lastPrice = lastPrice;\n    this.interactions = interactions;\n  }\n\n  drawAll(): void {\n    const width = this.ctx.canvas.width / window.devicePixelRatio;\n    const height = this.ctx.canvas.height / window.devicePixelRatio;\n    this.ctx.clearRect(0, 0, width, height);\n    if (this.showGrid) this.drawGrid();\n    this.drawChart();\n    this.drawMeasureRectangle();\n    this.drawScales();\n    this.drawCurrentPriceLabel();\n    if (this.crosshair.visible) this.drawCrosshair();\n    if (this.showBounds) this.drawBounds();\n  }\n\n  private drawGrid(): void {\n    if (!this.showGrid) return;\n    const width = this.ctx.canvas.width / window.devicePixelRatio;\n    const chartRight = width - this.margin.right;\n    this.ctx.strokeStyle = this.theme.gridColor || '#333';\n    this.ctx.lineWidth = 1;\n    const gridSpacing = 28;\n    const numLines = Math.floor(this.scales.chartHeight() / gridSpacing);\n    this.ctx.beginPath();\n    for (let i = 0; i <= numLines; i++) {\n      const y = this.margin.top + i * gridSpacing;\n      this.ctx.moveTo(this.margin.left, y);\n      this.ctx.lineTo(chartRight, y);\n    }\n    this.ctx.stroke();\n\n    const vr = this.scales.getVisibleRange();\n    this.ctx.beginPath();\n    for (let i = vr.startIndex; i < vr.endIndex; i++) {\n      const x = this.scales.indexToX(i, vr.startIndex) + this.scales.scaledSpacing() / 2;\n      this.ctx.moveTo(x, this.margin.top);\n      this.ctx.lineTo(x, this.margin.top + this.scales.chartHeight());\n    }\n    this.ctx.strokeStyle = this.theme.gridLightColor || '#252525';\n    this.ctx.stroke();\n  }\n\n  private drawChart(): void {\n    this.ctx.save();\n    const width = this.ctx.canvas.width / window.devicePixelRatio;\n    this.ctx.beginPath();\n    this.ctx.rect(\n      this.margin.left,\n      this.margin.top,\n      width - this.margin.left - this.margin.right,\n      this.scales.chartHeight()\n    );\n    this.ctx.clip();\n\n    const vr = this.scales.getVisibleRange();\n    for (let i = vr.startIndex; i < vr.endIndex; i++) {\n      this.drawFootprint(this.data[i], i, vr.startIndex);\n    }\n    this.ctx.restore();\n  }\n\n\n  private drawMeasureRectangle(): void {\n    const measureRectangle = this.interactions.getMeasureRectangle();\n    if (!measureRectangle) return;\n\n    this.ctx.save();\n\n    // Use screen coordinates directly\n    const startX = measureRectangle.startX;\n    const startY = measureRectangle.startY;\n    const endX = measureRectangle.endX;\n    const endY = measureRectangle.endY;\n\n    // Calculate rectangle bounds\n    const rectX = Math.min(startX, endX);\n    const rectY = Math.min(startY, endY);\n    const rectWidth = Math.abs(endX - startX);\n    const rectHeight = Math.abs(endY - startY);\n\n    // Calculate price and time differences using current screen positions\n    const startPrice = this.scales.screenYToPrice(startY);\n    const endPrice = this.scales.screenYToPrice(endY);\n    const startIndex = this.scales.screenXToDataIndex(startX);\n    const endIndex = this.scales.screenXToDataIndex(endX);\n\n    const priceDiff = endPrice - startPrice;\n    const timeDiff = endIndex - startIndex;\n    const isPositive = priceDiff >= 0;\n\n    // Draw light green/red rectangle\n    const rectColor = isPositive ? 'rgba(22, 163, 74, 0.2)' : 'rgba(220, 38, 38, 0.2)'; // Light green/red\n    this.ctx.fillStyle = rectColor;\n    this.ctx.fillRect(rectX, rectY, rectWidth, rectHeight);\n\n    // Draw rectangle border\n    const borderColor = isPositive ? 'rgba(22, 163, 74, 0.8)' : 'rgba(220, 38, 38, 0.8)';\n    this.ctx.strokeStyle = borderColor;\n    this.ctx.lineWidth = 1;\n    this.ctx.strokeRect(rectX, rectY, rectWidth, rectHeight);\n\n    // Draw measure data box below the rectangle with all details\n    const centerX = rectX + rectWidth / 2;\n\n    // Calculate percentage change\n    const percentChange = startPrice !== 0 ? (priceDiff / startPrice) * 100 : 0;\n\n    // Prepare all text lines\n    const priceSign = priceDiff >= 0 ? '+' : '';\n    const priceText = `${priceSign}${priceDiff.toFixed(2)} (${percentChange >= 0 ? '+' : ''}${percentChange.toFixed(2)}%)`;\n    const startPriceText = `Start: ${startPrice.toFixed(2)}`;\n    const endPriceText = `End: ${endPrice.toFixed(2)}`;\n    const timeSign = timeDiff >= 0 ? '+' : '';\n    const timeText = `ΔT: ${timeSign}${timeDiff} bars`;\n\n    const lines = [priceText, startPriceText, endPriceText, timeText];\n\n    // Bigger font\n    this.ctx.font = '14px system-ui';\n    const lineHeight = 18;\n    const padding = 8;\n    const maxWidth = Math.max(...lines.map(line => this.ctx.measureText(line).width));\n    const boxWidth = maxWidth + padding * 2;\n    const boxHeight = lines.length * lineHeight + padding * 2;\n    const boxX = centerX - boxWidth / 2;\n    const boxY = rectY + rectHeight + 8;\n\n    // Box colors\n    const boxColor = isPositive ? '#16a34a' : '#dc2626'; // Green for positive, red for negative\n    const textColor = '#ffffff';\n\n    // Draw box background\n    this.ctx.fillStyle = boxColor;\n    this.ctx.fillRect(boxX, boxY, boxWidth, boxHeight);\n\n    // Draw box border\n    this.ctx.strokeStyle = textColor;\n    this.ctx.lineWidth = 1;\n    this.ctx.strokeRect(boxX, boxY, boxWidth, boxHeight);\n\n    // Draw text lines\n    this.ctx.fillStyle = textColor;\n    this.ctx.textAlign = 'center';\n    this.ctx.textBaseline = 'top';\n    lines.forEach((line, index) => {\n      const y = boxY + padding + index * lineHeight;\n      this.ctx.fillText(line, centerX, y);\n    });\n\n    this.ctx.restore();\n  }\n\n  private drawScales(): void {\n    const width = this.ctx.canvas.width / window.devicePixelRatio;\n    const height = this.ctx.canvas.height / window.devicePixelRatio;\n\n    // Right price bar\n    const right = width - this.margin.right;\n    this.ctx.fillStyle = this.theme.scaleBackground || '#111';\n    this.ctx.fillRect(right, 0, this.margin.right, height);\n    this.ctx.strokeStyle = this.theme.scaleBorder || '#444';\n    this.ctx.strokeRect(right + 0.5, this.margin.top, 0.5, this.scales.chartHeight());\n\n    // Price labels\n    this.ctx.fillStyle = this.theme.textColor || '#aaa';\n    this.ctx.font = '12px system-ui';\n    this.ctx.textAlign = 'center';\n    this.ctx.textBaseline = 'middle';\n    const labels = this.scales.computePriceBarLabels();\n    for (const { price, y } of labels) {\n      this.ctx.fillText(String(price), right + this.margin.right / 2, y);\n    }\n\n    // Bottom timeline\n    const bottomY = this.margin.top + this.scales.chartHeight();\n    const chartW = width - this.margin.left - this.margin.right;\n    this.ctx.fillStyle = this.theme.scaleBackground || '#111';\n    this.ctx.fillRect(this.margin.left, bottomY, chartW, this.margin.bottom);\n    this.ctx.strokeStyle = this.theme.scaleBorder || '#444';\n    this.ctx.beginPath();\n    this.ctx.moveTo(this.margin.left, bottomY + 0.5);\n    this.ctx.lineTo(this.margin.left + chartW, bottomY + 0.5);\n    this.ctx.stroke();\n\n    // Timeline labels - extended to show future times\n    this.ctx.save();\n    this.ctx.beginPath();\n    this.ctx.rect(this.margin.left, bottomY, chartW, this.margin.bottom);\n    this.ctx.clip();\n    this.ctx.fillStyle = this.theme.textColor || '#aaa';\n    this.ctx.font = '12px system-ui';\n    this.ctx.textAlign = 'center';\n    this.ctx.textBaseline = 'middle';\n    const step = Math.max(1, Math.floor(120 / this.scales.scaledSpacing()));\n    const vr = this.scales.getVisibleRange();\n    // Extend timeline to show future times beyond current data\n    const extendedStart = Math.max(0, vr.startIndex - 10);\n    const extendedEnd = vr.endIndex + 30; // Show 30 future time slots\n    for (let i = extendedStart; i < extendedEnd; i += step) {\n      const x = this.scales.indexToX(i, vr.startIndex);\n      let date: Date;\n      if (i < this.data.length && this.data[i]) {\n        date = new Date(this.data[i].time);\n      } else {\n        // Extrapolate future times based on data intervals\n        if (this.data.length > 1) {\n          const lastTime = new Date(this.data[this.data.length - 1].time).getTime();\n          const prevTime = new Date(this.data[this.data.length - 2].time).getTime();\n          const interval = lastTime - prevTime; // Time between last two data points\n          date = new Date(lastTime + (i - this.data.length + 1) * interval);\n        } else {\n          // Fallback: assume 1 minute intervals\n          const lastTime = this.data.length > 0 ?\n            new Date(this.data[this.data.length - 1].time).getTime() :\n            Date.now();\n          date = new Date(lastTime + (i - Math.max(0, this.data.length - 1)) * 60000);\n        }\n      }\n      const hours = date.getHours().toString().padStart(2, '0');\n      const minutes = date.getMinutes().toString().padStart(2, '0');\n      const t = `${hours}:${minutes}`;\n      this.ctx.fillText(t, x, bottomY + this.margin.bottom / 2);\n    }\n    this.ctx.restore();\n  }\n\n  private drawBounds(): void {\n    const width = this.ctx.canvas.width / window.devicePixelRatio;\n    const height = this.ctx.canvas.height / window.devicePixelRatio;\n    const chartW = width - this.margin.left - this.margin.right;\n    const chartH = this.scales.chartHeight();\n    const rightX = width - this.margin.right;\n    const bottomY = this.margin.top + chartH;\n\n    this.ctx.save();\n    this.ctx.fillStyle = 'rgba(255, 255, 0, 0.05)';\n    this.ctx.fillRect(0, 0, width, this.margin.top);\n    this.ctx.fillRect(0, this.margin.top, this.margin.left, chartH);\n    this.ctx.fillRect(this.margin.left, bottomY, chartW, this.margin.bottom);\n\n    this.ctx.setLineDash([6, 3]);\n    this.ctx.strokeStyle = '#f59e0b';\n    this.ctx.lineWidth = 1.5;\n    this.ctx.strokeRect(this.margin.left + 0.5, this.margin.top + 0.5, chartW, chartH);\n\n    this.ctx.strokeStyle = '#22d3ee';\n    this.ctx.strokeRect(rightX + 0.5, 0.5, this.margin.right - 1, height - 1);\n    this.ctx.strokeRect(this.margin.left + 0.5, bottomY + 0.5, chartW, this.margin.bottom - 1);\n    this.ctx.setLineDash([]);\n    this.ctx.restore();\n  }\n\n  private drawFootprint(candle: CandleData, i: number, startIndex: number): void {\n    const cx = this.scales.indexToX(i, startIndex);\n    const half = this.scales.scaledCandle() / 2;\n\n    if (this.showVolumeFootprint) {\n      const rows = candle.footprint.slice().sort((a, b) => b.price - a.price);\n      const enableProfile = rows.length > 3;\n\n      // Calculate VAH/VAL\n      const levelVols = rows.map(r => r.buy + r.sell);\n      const totalVol = levelVols.reduce((a, b) => a + b, 0);\n      let pocIdx = 0;\n      for (let i = 1; i < levelVols.length; i++) {\n        if (levelVols[i] > levelVols[pocIdx]) pocIdx = i;\n      }\n\n      let included = new Set([pocIdx]);\n      if (enableProfile) {\n        let acc = levelVols[pocIdx];\n        let up = pocIdx - 1, down = pocIdx + 1;\n        while (acc < 0.7 * totalVol && (up >= 0 || down < rows.length)) {\n          const upVol = up >= 0 ? levelVols[up] : -1;\n          const downVol = down < rows.length ? levelVols[down] : -1;\n          if (upVol >= downVol) {\n            if (up >= 0) { included.add(up); acc += levelVols[up]; up--; }\n            else { included.add(down); acc += levelVols[down]; down++; }\n          } else {\n            if (down < rows.length) { included.add(down); acc += levelVols[down]; down++; }\n            else { included.add(up); acc += levelVols[up]; up--; }\n          }\n        }\n      }\n\n      const vahIdx = Math.min(...included);\n      const valIdx = Math.max(...included);\n      const VAH = rows[vahIdx]?.price;\n      const VAL = rows[valIdx]?.price;\n\n      const leftX = cx - half - this.scales.scaledBox();\n      const rightX = cx + half;\n\n      const sideMax = Math.max(...rows.map(f => Math.max(f.buy, f.sell)), 1);\n      const buyBase = this.theme.volumeBuyBase ?? 0.15;\n      const sellBase = this.theme.volumeSellBase ?? 0.15;\n      const buyRGBA = (v: number) => `rgba(0,255,0,${buyBase + 0.55 * (v / sideMax)})`;\n      const sellRGBA = (v: number) => `rgba(255,0,0,${sellBase + 0.55 * (v / sideMax)})`;\n\n      let minRow = Infinity, maxRow = -Infinity;\n      let totBuy = 0, totSell = 0;\n\n      // Draw boxes\n      for (let r = 0; r < rows.length; r++) {\n        const f = rows[r];\n        const row = this.scales.priceToRowIndex(f.price);\n        const yTop = this.scales.rowToY(row - 0.5);\n        const yBot = this.scales.rowToY(row + 0.5);\n        const h = Math.max(1, yBot - yTop);\n        minRow = Math.min(minRow, row - 0.5);\n        maxRow = Math.max(maxRow, row + 0.5);\n        totBuy += f.buy;\n        totSell += f.sell;\n\n        const isPOC = enableProfile && (r === pocIdx);\n        this.ctx.fillStyle = isPOC ? (this.theme.pocColor || '#808080') : sellRGBA(f.sell);\n        this.ctx.fillRect(leftX, yTop, this.scales.scaledBox(), h);\n        this.ctx.fillStyle = isPOC ? (this.theme.pocColor || '#808080') : buyRGBA(f.buy);\n        this.ctx.fillRect(rightX, yTop, this.scales.scaledBox(), h);\n      }\n\n      // Imbalance markers\n      for (let r = 0; r < rows.length; r++) {\n        const f = rows[r];\n        const prev = rows[r - 1];\n        const next = rows[r + 1];\n        const row = this.scales.priceToRowIndex(f.price);\n        const yTop = this.scales.rowToY(row - 0.5);\n        const yBot = this.scales.rowToY(row + 0.5);\n        const h = Math.max(1, yBot - yTop);\n        if (prev && f.sell >= 3 * Math.max(1, prev.buy)) {\n          this.ctx.fillStyle = this.theme.imbalanceSell || '#dc2626';\n          this.ctx.fillRect(leftX - this.scales.scaledImb() - 1, yTop, this.scales.scaledImb(), h);\n        }\n        if (next && f.buy >= 3 * Math.max(1, next.sell)) {\n          this.ctx.fillStyle = this.theme.imbalanceBuy || '#16a34a';\n          this.ctx.fillRect(rightX + this.scales.scaledBox() + 1, yTop, this.scales.scaledImb(), h);\n        }\n      }\n\n      // Volume numbers\n      if (this.scales.shouldShowCellText()) {\n        const fontSize = Math.max(8, Math.min(16, 11 * this.view.zoomX));\n        this.ctx.font = `${fontSize}px system-ui`;\n        this.ctx.textAlign = 'center';\n        this.ctx.textBaseline = 'middle';\n        for (let r = 0; r < rows.length; r++) {\n          const f = rows[r];\n          const row = this.scales.priceToRowIndex(f.price);\n          const y = this.scales.rowToY(row);\n          const isPOC = enableProfile && (r === pocIdx);\n          this.ctx.fillStyle = isPOC ? (this.theme.pocTextColor || this.theme.textColorBright || '#ffffff') : (this.theme.textColorBright || '#ddd');\n          this.ctx.fillText(this.scales.formatK(f.sell), leftX + this.scales.scaledBox() / 2, y);\n          this.ctx.fillText(this.scales.formatK(f.buy), rightX + this.scales.scaledBox() / 2, y);\n        }\n      }\n\n      // VAH/VAL lines and labels\n      if (enableProfile && this.scales.shouldShowCellText()) {\n        const rVah = this.scales.priceToRowIndex(VAH), rVal = this.scales.priceToRowIndex(VAL);\n        const yVah = this.scales.rowToY(rVah - 0.5);\n        const yVal = this.scales.rowToY(rVal + 0.5);\n        const rightEdge = rightX + this.scales.scaledBox();\n\n        this.ctx.save();\n        this.ctx.setLineDash([4, 2]);\n        this.ctx.strokeStyle = this.theme.vahValColor || '#9ca3af';\n        this.ctx.beginPath();\n        this.ctx.moveTo(leftX, yVah);\n        this.ctx.lineTo(rightEdge, yVah);\n        this.ctx.stroke();\n        this.ctx.beginPath();\n        this.ctx.moveTo(leftX, yVal);\n        this.ctx.lineTo(rightEdge, yVal);\n        this.ctx.stroke();\n        this.ctx.setLineDash([]);\n\n        const vahFontSize = Math.max(6, Math.min(12, 8 * this.view.zoomX));\n        this.ctx.fillStyle = this.theme.vahValLabelColor || '#cfd3d6';\n        this.ctx.font = `${vahFontSize}px monospace`;\n        this.ctx.textAlign = 'left';\n        this.ctx.textBaseline = 'middle';\n        const labelX = cx - half - this.scales.scaledBox() + 3;\n        this.ctx.fillText('VAH', labelX, yVah);\n        this.ctx.fillText('VAL', labelX, yVal);\n        this.ctx.restore();\n      }\n\n      // Delta/Total labels\n      if (this.scales.shouldShowCellText()) {\n        const yLowFootprint = this.scales.rowToY(maxRow) + 2;\n        const delta = totBuy - totSell;\n        const deltaFontSize = Math.max(8, Math.min(18, 12 * this.view.zoomX));\n        this.ctx.textAlign = 'center';\n        this.ctx.font = `${deltaFontSize}px system-ui`;\n        this.ctx.fillStyle = delta >= 0 ? (this.theme.deltaPositive || '#16a34a') : (this.theme.deltaNegative || '#dc2626');\n        this.ctx.fillText(`Delta ${this.scales.formatK(delta)}`, cx, yLowFootprint + 14);\n        this.ctx.fillStyle = this.theme.totalColor || '#fff';\n        this.ctx.fillText(`Total ${this.scales.formatK(totalVol)}`, cx, yLowFootprint + 32);\n      }\n    }\n\n    // Wick & body (always drawn)\n    const yHigh = this.scales.priceToY(candle.high);\n    const yLow = this.scales.priceToY(candle.low);\n    const yOpen = this.scales.priceToY(candle.open);\n    const yClose = this.scales.priceToY(candle.close);\n    const bull = candle.close >= candle.open;\n    const color = bull ? (this.theme.candleBull || '#26a69a') : (this.theme.candleBear || '#ef5350');\n    this.ctx.strokeStyle = color;\n    this.ctx.beginPath();\n    this.ctx.moveTo(cx, yHigh);\n    this.ctx.lineTo(cx, yLow);\n    this.ctx.stroke();\n    this.ctx.fillStyle = color;\n    this.ctx.fillRect(cx - half, Math.min(yOpen, yClose), this.scales.scaledCandle(), Math.abs(yClose - yOpen));\n  }\n\n\n  private drawCrosshair(): void {\n    if (!this.crosshair.visible) return;\n\n    const width = this.ctx.canvas.width / window.devicePixelRatio;\n    const height = this.ctx.canvas.height / window.devicePixelRatio;\n    const chartRight = width - this.margin.right;\n    const yBottom = this.margin.top + this.scales.chartHeight();\n\n    this.ctx.save();\n\n    // Draw vertical line\n    this.ctx.strokeStyle = this.theme.textColor || '#aaa';\n    this.ctx.lineWidth = 1;\n    this.ctx.setLineDash([2, 2]);\n    this.ctx.beginPath();\n    this.ctx.moveTo(this.crosshair.x, this.margin.top);\n    this.ctx.lineTo(this.crosshair.x, yBottom);\n    this.ctx.stroke();\n\n    // Draw horizontal line\n    this.ctx.beginPath();\n    this.ctx.moveTo(this.margin.left, this.crosshair.y);\n    this.ctx.lineTo(chartRight, this.crosshair.y);\n    this.ctx.stroke();\n\n    // Draw price label on right side\n    const price = this.scales.rowIndexToPrice(\n      (this.crosshair.y - this.margin.top) / this.scales.rowHeightPx() + this.view.offsetRows\n    );\n    this.ctx.setLineDash([]);\n    this.ctx.fillStyle = this.theme.scaleBackground || '#111';\n    this.ctx.fillRect(chartRight, this.crosshair.y - 8, this.margin.right, 16);\n    this.ctx.strokeStyle = this.theme.scaleBorder || '#444';\n    this.ctx.strokeRect(chartRight, this.crosshair.y - 8, this.margin.right, 16);\n    this.ctx.fillStyle = this.theme.textColor || '#aaa';\n    this.ctx.font = 'bold 12px system-ui';\n    this.ctx.textAlign = 'center';\n    this.ctx.textBaseline = 'middle';\n    this.ctx.fillText(price.toFixed(2), chartRight + this.margin.right / 2, this.crosshair.y);\n\n    // Draw time label on bottom\n    const index = this.scales.screenXToDataIndex(this.crosshair.x);\n    let timeStr = '--:--';\n    if (index >= 0 && index < this.data.length && this.data[index]) {\n      const date = new Date(this.data[index].time);\n      const hours = date.getHours().toString().padStart(2, '0');\n      const minutes = date.getMinutes().toString().padStart(2, '0');\n      timeStr = `${hours}:${minutes}`;\n    }\n\n    this.ctx.fillStyle = this.theme.scaleBackground || '#111';\n    this.ctx.fillRect(this.crosshair.x - 20, yBottom, 40, this.margin.bottom);\n    this.ctx.strokeStyle = this.theme.scaleBorder || '#444';\n    this.ctx.strokeRect(this.crosshair.x - 20, yBottom, 40, this.margin.bottom);\n    this.ctx.fillStyle = this.theme.textColor || '#aaa';\n    this.ctx.font = '11px system-ui';\n    this.ctx.textAlign = 'center';\n    this.ctx.textBaseline = 'middle';\n    this.ctx.fillText(timeStr, this.crosshair.x, yBottom + this.margin.bottom / 2);\n\n    this.ctx.restore();\n  }\n\n  private drawCurrentPriceLabel(): void {\n    if (!this.lastPrice) return;\n\n    const width = this.ctx.canvas.width / window.devicePixelRatio;\n    const height = this.ctx.canvas.height / window.devicePixelRatio;\n    const right = width - this.margin.right;\n    const y = this.scales.priceToY(this.lastPrice);\n\n    this.ctx.save();\n\n    // Draw dashed line across the chart at the last price level\n    this.ctx.setLineDash([5, 5]);\n    this.ctx.strokeStyle = this.theme.textColor || '#aaa';\n    this.ctx.lineWidth = 1;\n    this.ctx.beginPath();\n    this.ctx.moveTo(this.margin.left, y);\n    this.ctx.lineTo(right, y);\n    this.ctx.stroke();\n    this.ctx.setLineDash([]);\n\n    // Draw price label on the price bar (right side scale area)\n    const labelText = this.lastPrice.toFixed(2);\n    this.ctx.font = 'bold 12px system-ui';\n    const textWidth = this.ctx.measureText(labelText).width;\n    const boxWidth = textWidth + 8;\n    const boxHeight = 18;\n\n    // Position the label in the price bar area\n    const boxX = right + 2;\n    const boxY = y - boxHeight / 2;\n\n    // Draw background\n    this.ctx.fillStyle = '#26a69a';  // Green background like in the image\n    this.ctx.fillRect(boxX, boxY, boxWidth, boxHeight);\n\n    // Draw border\n    this.ctx.strokeStyle = '#ffffff';\n    this.ctx.lineWidth = 1;\n    this.ctx.strokeRect(boxX, boxY, boxWidth, boxHeight);\n\n    // Draw price text\n    this.ctx.fillStyle = '#ffffff';  // White text\n    this.ctx.textAlign = 'center';\n    this.ctx.textBaseline = 'middle';\n    this.ctx.fillText(labelText, boxX + boxWidth / 2, boxY + boxHeight / 2);\n\n    this.ctx.restore();\n  }\n}","import { CandleData, VFCOptions, VFCEvents } from './types';\nimport { Scales } from './scales';\nimport { Interactions } from './interactions';\nimport { Drawing } from './drawing';\n\nexport class Chart {\n  private canvas: HTMLCanvasElement;\n  private ctx: CanvasRenderingContext2D;\n  private data: CandleData[] = [];\n  private options: Required<VFCOptions>;\n  private events: VFCEvents = {};\n\n  // Chart state\n  private margin = { top: 0, bottom: 40, left: 0, right: 70 };\n  private view = { zoomY: 1, zoomX: 1, offsetRows: 0, offsetX: 0, offsetY: 0 };\n  private showGrid = true;\n  private showBounds = false;\n  private showVolumeFootprint = true;\n  private crosshair = { x: -1, y: -1, visible: false };\n  private lastPrice: number | null = null;\n\n  // Toolbar button references\n  private resetZoomBtn: HTMLButtonElement | null = null;\n  private toggleGridBtn: HTMLButtonElement | null = null;\n  private toggleVolumeFootprintBtn: HTMLButtonElement | null = null;\n  private measureBtn: HTMLButtonElement | null = null;\n\n  // Constants\n  private readonly TICK = 10;\n  private readonly BASE_CANDLE = 15;\n  private readonly BASE_BOX = 55;\n  private readonly BASE_IMBALANCE = 2;\n  private readonly BASE_SPACING = this.BASE_CANDLE + 2 * this.BASE_BOX + 2 * this.BASE_IMBALANCE;\n  private readonly FIXED_GAP = 4;\n  private readonly baseRowPx = 22;\n  private readonly TEXT_VIS = { minZoomX: 0.5, minRowPx: 10, minBoxPx: 20 };\n\n  // Modules\n  private scales: Scales;\n  private interactions: Interactions;\n  private drawing: Drawing;\n\n  private createChartStructure(container: HTMLElement): void {\n    // Check if toolbars already exist\n    if (container.querySelector('.vfc-toolbar')) {\n      return; // Toolbars already exist, don't recreate\n    }\n\n    // Create the complete chart structure\n    container.classList.add('vfc-container');\n\n    // Create top toolbar\n    const topToolbar = document.createElement('div');\n    topToolbar.className = 'vfc-toolbar';\n\n    const resetZoomBtn = document.createElement('button');\n    resetZoomBtn.id = 'resetZoom';\n    resetZoomBtn.className = 'tool-btn';\n    resetZoomBtn.textContent = 'Reset';\n    topToolbar.appendChild(resetZoomBtn);\n\n    const toggleGridBtn = document.createElement('button');\n    toggleGridBtn.id = 'toggleGrid';\n    toggleGridBtn.className = 'tool-btn';\n    toggleGridBtn.textContent = 'Grid On/Off';\n    topToolbar.appendChild(toggleGridBtn);\n\n\n    const toggleVolumeFootprintBtn = document.createElement('button');\n    toggleVolumeFootprintBtn.id = 'toggleVolumeFootprint';\n    toggleVolumeFootprintBtn.className = 'tool-btn';\n    toggleVolumeFootprintBtn.textContent = 'Volume On/Off';\n    topToolbar.appendChild(toggleVolumeFootprintBtn);\n\n    const measureBtn = document.createElement('button');\n    measureBtn.id = 'measure';\n    measureBtn.className = 'tool-btn';\n    measureBtn.title = 'Measure Tool';\n    measureBtn.textContent = '📐 Measure';\n    topToolbar.appendChild(measureBtn);\n\n    const hint = document.createElement('span');\n    hint.className = 'hint';\n    hint.textContent = 'Volume Footprint Chart';\n    topToolbar.appendChild(hint);\n\n    container.appendChild(topToolbar);\n\n    // Create chart container\n    const chartContainer = document.createElement('div');\n    chartContainer.className = 'vfc-chart-container';\n    container.appendChild(chartContainer);\n\n    // Set up event handlers\n    this.setupToolbarEventHandlers(container);\n  }\n\n  private setupToolbarEventHandlers(container: HTMLElement): void {\n    const resetZoomBtn = container.querySelector('#resetZoom') as HTMLButtonElement;\n    const toggleGridBtn = container.querySelector('#toggleGrid') as HTMLButtonElement;\n    const toggleVolumeFootprintBtn = container.querySelector('#toggleVolumeFootprint') as HTMLButtonElement;\n    const measureBtn = container.querySelector('#measure') as HTMLButtonElement;\n\n    // Store references for later use\n    this.resetZoomBtn = resetZoomBtn;\n    this.toggleGridBtn = toggleGridBtn;\n    this.toggleVolumeFootprintBtn = toggleVolumeFootprintBtn;\n    this.measureBtn = measureBtn;\n  }\n\n  constructor(container: HTMLElement, options: VFCOptions = {}, events: VFCEvents = {}) {\n    // Create the complete chart structure with toolbars\n    this.createChartStructure(container);\n\n    // Get the chart container for accurate dimensions\n    const chartContainer = container.querySelector('.vfc-chart-container') as HTMLElement;\n\n    // Use existing canvas if available, otherwise create one\n    this.canvas = container.querySelector('canvas') as HTMLCanvasElement;\n    if (!this.canvas) {\n      this.canvas = document.createElement('canvas');\n      if (chartContainer) {\n        chartContainer.appendChild(this.canvas);\n      } else {\n        // Fallback: append directly to container if chart container not found\n        container.appendChild(this.canvas);\n      }\n    }\n\n    const ctx = this.canvas.getContext('2d');\n    if (!ctx) throw new Error('Canvas 2D context not available');\n    this.ctx = ctx;\n\n    this.options = {\n      width: options.width || container.clientWidth || 800,\n      height: options.height || (chartContainer ? chartContainer.clientHeight : container.clientHeight) || 600,\n      showGrid: options.showGrid ?? true,\n      showBounds: options.showBounds ?? false,\n      showVolumeFootprint: options.showVolumeFootprint ?? true,\n      tickSize: options.tickSize || 10,\n      initialZoomX: options.initialZoomX || 0.55,\n      initialZoomY: options.initialZoomY || 0.55,\n      margin: options.margin || this.margin,\n      theme: options.theme || {}\n    };\n\n    this.events = events;\n    this.margin = this.options.margin;\n    this.showGrid = this.options.showGrid;\n    this.showBounds = this.options.showBounds;\n    this.showVolumeFootprint = this.options.showVolumeFootprint;\n    this.view.zoomX = this.options.initialZoomX;\n    this.view.zoomY = this.options.initialZoomY;\n\n    // Initialize modules\n    this.scales = new Scales(\n      this.data,\n      this.margin,\n      this.view,\n      this.options.width,\n      this.options.height,\n      this.showVolumeFootprint,\n      this.TICK,\n      this.baseRowPx,\n      this.TEXT_VIS\n    );\n\n    this.interactions = new Interactions(\n      this.canvas,\n      this.margin,\n      this.view,\n      {\n        ...this.events,\n        onPan: () => this.drawing.drawAll(),\n        onZoom: () => this.drawing.drawAll(),\n        onMouseMove: () => this.drawing.drawAll()\n      },\n      this.crosshair,\n      this.scales\n    );\n\n\n    this.drawing = new Drawing(\n      this.ctx,\n      this.data,\n      this.margin,\n      this.view,\n      this.showGrid,\n      this.showBounds,\n      this.showVolumeFootprint,\n      this.scales,\n      this.options.theme,\n      this.crosshair,\n      this.lastPrice,\n      this.interactions\n    );\n\n    this.setupCanvas();\n    this.bindEvents();\n    this.bindToolbarEvents();\n    this.layout();\n  }\n\n  private setupCanvas() {\n    const DPR = Math.max(1, Math.round(window.devicePixelRatio || 1));\n    this.canvas.style.width = this.options.width + 'px';\n    this.canvas.style.height = this.options.height + 'px';\n    this.canvas.width = Math.max(1, Math.floor(this.options.width * DPR));\n    this.canvas.height = Math.max(1, Math.floor(this.options.height * DPR));\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.scale(DPR, DPR);\n  }\n\n  private bindEvents() {\n    this.canvas.addEventListener('wheel', this.handleWheel.bind(this), { passive: false });\n    this.canvas.addEventListener('pointerdown', this.handlePointerDown.bind(this));\n    window.addEventListener('resize', this.layout.bind(this));\n  }\n\n  private bindToolbarEvents() {\n    if (this.resetZoomBtn) {\n      this.resetZoomBtn.addEventListener('click', () => {\n        // Reset view to show the end of the data, like initial load\n        if (this.data.length > 0) {\n          this.updateOptions({\n            width: this.options.width,\n            height: this.options.height\n          });\n          // After updating options, set view to show last candles\n          const s = this.scales.scaledSpacing();\n          const contentW = this.options.width - this.margin.left - this.margin.right;\n          const visibleCount = Math.ceil(contentW / s);\n          const startIndex = Math.max(0, this.data.length - visibleCount);\n          this.view.offsetX = startIndex * s;\n          // Center the last candle's close price vertically at canvas center\n          const lastPrice = this.lastPrice!;\n          const centerRow = (this.options.height / 2) / this.scales.rowHeightPx();\n          const priceRow = this.scales.priceToRowIndex(lastPrice); // with current offsetRows=0\n          this.view.offsetRows = centerRow - priceRow;\n          this.drawing.drawAll();\n        }\n      });\n    }\n\n    if (this.toggleGridBtn) {\n      this.toggleGridBtn.addEventListener('click', () => {\n        this.updateOptions({\n          showGrid: !this.options.showGrid\n        });\n      });\n    }\n\n    if (this.toggleVolumeFootprintBtn) {\n      this.toggleVolumeFootprintBtn.addEventListener('click', () => {\n        this.updateOptions({\n          showVolumeFootprint: !this.options.showVolumeFootprint\n        });\n      });\n    }\n\n    if (this.measureBtn) {\n      this.measureBtn.addEventListener('click', () => {\n        const isActive = this.interactions.getMeasureRectangle() !== null;\n        if (isActive) {\n          this.interactions.setMeasureMode(false);\n          this.measureBtn?.classList.remove('active');\n        } else {\n          this.interactions.setMeasureMode(true);\n          this.measureBtn?.classList.add('active');\n        }\n        this.drawing.drawAll();\n      });\n    }\n  }\n\n  private handleWheel(e: WheelEvent) {\n    this.interactions.handleWheel(e);\n    this.drawing.drawAll();\n  }\n\n  private handlePointerDown(e: PointerEvent) {\n    this.interactions.handlePointerDown(e);\n  }\n\n  private layout() {\n    const container = this.canvas.parentElement;\n    if (container) {\n      this.options.width = container.clientWidth || this.options.width;\n      this.options.height = container.clientHeight || this.options.height;\n    }\n\n    // Recreate scales and drawing with new dimensions\n    this.scales = new Scales(\n      this.data,\n      this.margin,\n      this.view,\n      this.options.width,\n      this.options.height,\n      this.showVolumeFootprint,\n      this.TICK,\n      this.baseRowPx,\n      this.TEXT_VIS\n    );\n\n    this.drawing = new Drawing(\n      this.ctx,\n      this.data,\n      this.margin,\n      this.view,\n      this.showGrid,\n      this.showBounds,\n      this.showVolumeFootprint,\n      this.scales,\n      this.options.theme,\n      this.crosshair,\n      this.lastPrice,\n      this.interactions\n    );\n\n    this.setupCanvas();\n    this.drawing.drawAll();\n  }\n\n  // Public API\n  public setData(data: CandleData[]) {\n    this.data = data;\n    \n    // Calculate lastPrice first, before creating Drawing instance\n    if (data.length > 0) {\n        const lastPrice = data[data.length - 1].close;\n        this.lastPrice = lastPrice;\n    }\n    \n    // Update scales with new data\n    this.scales = new Scales(\n      this.data,\n      this.margin,\n      this.view,\n      this.options.width,\n      this.options.height,\n      this.showVolumeFootprint,\n      this.TICK,\n      this.baseRowPx,\n      this.TEXT_VIS\n    );\n    \n    this.drawing = new Drawing(\n      this.ctx,\n      this.data,\n      this.margin,\n      this.view,\n      this.showGrid,\n      this.showBounds,\n      this.showVolumeFootprint,\n      this.scales,\n      this.options.theme,\n      this.crosshair,\n      this.lastPrice,  // Now has the correct value\n      this.interactions\n    );\n\n    // Set initial view to show the end of the chart (latest data) and center the last price vertically\n    if (data.length > 0) {\n        const s = this.scales.scaledSpacing();\n        const contentW = this.options.width - this.margin.left - this.margin.right;\n        const visibleCount = Math.ceil(contentW / s);\n        const startIndex = Math.max(0, data.length - visibleCount);\n        this.view.offsetX = startIndex * s;\n        // Center the last candle's close price vertically at canvas center\n        const lastPrice = this.lastPrice!;\n        const centerRow = (this.options.height / 2) / this.scales.rowHeightPx();\n        const priceRow = this.scales.priceToRowIndex(lastPrice); // with current offsetRows=0\n        this.view.offsetRows = centerRow - priceRow;\n    }\n    this.drawing.drawAll();\n  }\n\n  public updateOptions(options: Partial<VFCOptions>) {\n    const oldShowVolumeFootprint = this.showVolumeFootprint;\n    Object.assign(this.options, options);\n    this.showGrid = this.options.showGrid;\n    this.showBounds = this.options.showBounds;\n    this.showVolumeFootprint = this.options.showVolumeFootprint;\n\n    // If showVolumeFootprint changed, adjust view offsetX to maintain visible range\n    if (oldShowVolumeFootprint !== this.showVolumeFootprint && this.data.length > 0) {\n      const oldSpacing = oldShowVolumeFootprint ? 132 * this.view.zoomX : 16 * this.view.zoomX;\n      const newSpacing = this.showVolumeFootprint ? 132 * this.view.zoomX : 16 * this.view.zoomX;\n      const startIndex = Math.floor(this.view.offsetX / oldSpacing);\n      this.view.offsetX = startIndex * newSpacing;\n    }\n\n    // Recreate Scales first, then Drawing\n    this.scales = new Scales(\n      this.data,\n      this.margin,\n      this.view,\n      this.options.width,\n      this.options.height,\n      this.showVolumeFootprint,\n      this.TICK,\n      this.baseRowPx,\n      this.TEXT_VIS\n    );\n\n    this.drawing = new Drawing(\n      this.ctx,\n      this.data,\n      this.margin,\n      this.view,\n      this.showGrid,\n      this.showBounds,\n      this.showVolumeFootprint,\n      this.scales,\n      this.options.theme,\n      this.crosshair,\n      this.lastPrice,\n      this.interactions\n    );\n\n    this.layout();\n  }\n\n  public resize(width: number, height: number) {\n    this.options.width = width;\n    this.options.height = height;\n    this.layout();\n  }\n\n  public destroy() {\n    if (this.canvas.parentElement) {\n      this.canvas.parentElement.removeChild(this.canvas);\n    }\n  }\n\n\n  // Getters for API access\n  public getOptions() { return this.options; }\n  public getShowGrid() { return this.showGrid; }\n}","import { ISeriesApi } from './iseries-api';\nimport { IPriceScaleApi } from './iprice-scale-api';\nimport { VolumeFootprintData, VolumeFootprintSeriesOptions } from './ichart-api';\nimport { IChartImplementation } from './ichart-api';\n\nexport class VolumeFootprintSeriesApi implements ISeriesApi<VolumeFootprintData> {\n  private chart: IChartImplementation;\n  private seriesOptions: VolumeFootprintSeriesOptions;\n\n  constructor(chart: IChartImplementation, options?: VolumeFootprintSeriesOptions) {\n    this.chart = chart;\n    this.seriesOptions = options || {};\n  }\n\n  setData(data: VolumeFootprintData[]): void {\n    // Convert data format and set on chart\n    const convertedData = data.map(d => ({\n      time: typeof d.time === 'number' ? new Date(d.time).toISOString() : d.time,\n      open: d.open,\n      high: d.high,\n      low: d.low,\n      close: d.close,\n      footprint: d.footprint || []\n    }));\n    this.chart.setData(convertedData);\n  }\n\n  update(data: VolumeFootprintData): void {\n    // Update latest data point\n    this.setData([data]);\n  }\n\n  data(): VolumeFootprintData[] {\n    // Return current data (would need to store this)\n    return [];\n  }\n\n  applyOptions(options: VolumeFootprintSeriesOptions): void {\n    this.seriesOptions = { ...this.seriesOptions, ...options };\n  }\n\n  options(): VolumeFootprintSeriesOptions {\n    return this.seriesOptions;\n  }\n\n  priceScale(): IPriceScaleApi {\n    return {\n      applyOptions: () => {},\n      options: () => ({}),\n      width: () => 40,\n      height: () => 0,\n      isEmpty: () => false,\n      priceToCoordinate: () => null,\n      coordinateToPrice: () => null\n    };\n  }\n\n  visible(): boolean {\n    return true;\n  }\n\n  setVisible(visible: boolean): void {\n    // Implement visibility toggle\n  }\n}","import { ITimeScaleApi, TimeScaleOptions, TimeScaleRange } from './itime-scale-api';\nimport { IChartImplementation } from './ichart-api';\n\nexport class TimeScaleApi implements ITimeScaleApi {\n  private chart: IChartImplementation;\n\n  constructor(chart: IChartImplementation) {\n    this.chart = chart;\n  }\n\n  applyOptions(options: TimeScaleOptions): void {\n    // Apply time scale options\n  }\n\n  options(): TimeScaleOptions {\n    return {\n      visible: true,\n      timeVisible: true,\n      barSpacing: 30\n    };\n  }\n\n  scrollToPosition(position: number, animated?: boolean): void {\n    // Scroll to position\n  }\n\n  scrollToRealTime(): void {\n    // Scroll to real time\n  }\n\n  getVisibleRange(): TimeScaleRange | null {\n    return null;\n  }\n\n  setVisibleRange(range: TimeScaleRange): void {\n    // Set visible range\n  }\n\n  resetTimeScale(): void {\n    // Reset time scale\n  }\n\n  fitContent(): void {\n    // Fit content\n  }\n\n  timeToCoordinate(time: string | number): number | null {\n    return null;\n  }\n\n  coordinateToTime(coordinate: number): string | number | null {\n    return null;\n  }\n}","import { IPriceScaleApi, PriceScaleOptions } from './iprice-scale-api';\nimport { IChartImplementation } from './ichart-api';\n\nexport class PriceScaleApi implements IPriceScaleApi {\n  private chart: IChartImplementation;\n\n  constructor(chart: IChartImplementation) {\n    this.chart = chart;\n  }\n\n  applyOptions(options: PriceScaleOptions): void {\n    // Apply price scale options\n  }\n\n  options(): PriceScaleOptions {\n    return {\n      visible: true,\n      autoScale: true\n    };\n  }\n\n  width(): number {\n    return 40;\n  }\n\n  height(): number {\n    return 0; // Would need to calculate actual height\n  }\n\n  isEmpty(): boolean {\n    return false;\n  }\n\n  priceToCoordinate(price: number): number | null {\n    return null; // Would need to implement coordinate conversion\n  }\n\n  coordinateToPrice(coordinate: number): number | null {\n    return null; // Would need to implement coordinate conversion\n  }\n}","import { IChartApi, IChartImplementation, ChartOptions, VolumeFootprintSeriesOptions, VolumeFootprintData } from './ichart-api';\nimport { ISeriesApi } from './iseries-api';\nimport { ITimeScaleApi } from './itime-scale-api';\nimport { IPriceScaleApi } from './iprice-scale-api';\nimport { Chart as VFC } from '../chart'; // Import the Chart implementation directly\nimport { VolumeFootprintSeriesApi } from './volume-footprint-series-api';\nimport { TimeScaleApi } from './time-scale-api';\nimport { PriceScaleApi } from './price-scale-api';\n\nexport class ChartApi implements IChartApi {\n  private chart: IChartImplementation;\n  private series: ISeriesApi[] = [];\n  private timeScaleApi: TimeScaleApi;\n  private priceScaleApi: PriceScaleApi;\n\n  constructor(container: HTMLElement, options: ChartOptions) {\n    // Convert options to VFC format\n    const vfcOptions = {\n      width: options.width,\n      height: options.height,\n      showGrid: options.grid?.horzLines?.visible ?? true,\n      showBounds: false,\n      tickSize: 10,\n      initialZoomX: 2, // Higher zoom to show footprints\n      initialZoomY: 1,\n      margin: { top: 0, bottom: 40, left: 0, right: 60 }\n    };\n\n    this.chart = new VFC(container, vfcOptions);\n    this.timeScaleApi = new TimeScaleApi(this.chart);\n    this.priceScaleApi = new PriceScaleApi(this.chart);\n  }\n\n  addVolumeFootprintSeries(options?: VolumeFootprintSeriesOptions): ISeriesApi<VolumeFootprintData> {\n    const seriesApi = new VolumeFootprintSeriesApi(this.chart, options);\n    this.series.push(seriesApi);\n    return seriesApi;\n  }\n\n  removeSeries(seriesApi: ISeriesApi<any>): void {\n    const index = this.series.indexOf(seriesApi);\n    if (index > -1) {\n      this.series.splice(index, 1);\n    }\n  }\n\n  timeScale(): ITimeScaleApi {\n    return this.timeScaleApi;\n  }\n\n  priceScale(): IPriceScaleApi {\n    return this.priceScaleApi;\n  }\n\n  applyOptions(options: ChartOptions): void {\n    // Convert and apply options\n    const vfcOptions = {\n      width: options.width,\n      height: options.height,\n      showGrid: options.grid?.horzLines?.visible ?? true\n    };\n    this.chart.updateOptions(vfcOptions);\n  }\n\n  options(): ChartOptions {\n    const opts = this.chart.getOptions();\n    return {\n      width: opts.width,\n      height: opts.height,\n      grid: {\n        horzLines: { visible: this.chart.getShowGrid() }\n      }\n    };\n  }\n\n  resize(width: number, height: number): void {\n    this.chart.resize(width, height);\n  }\n\n  remove(): void {\n    this.chart.destroy();\n  }\n}","import { IChartApi, ChartOptions } from './ichart-api';\nimport { ChartApi } from './chart-api';\n\nexport function createChart(container: HTMLElement, options: ChartOptions): IChartApi {\n  return new ChartApi(container, options);\n}"],"names":["VFC"],"mappings":";;;;;;UAEa,MAAM,CAAA;IAWjB,IAAA,WAAA,CACE,IAAkB,EAClB,MAAoE,EACpE,IAA2E,EAC3E,WAAmB,EACnB,YAAoB,EACpB,mBAA4B,EAC5B,IAAY,EACZ,SAAiB,EACjB,QAAkE,EAAA;YAnB5D,IAAI,CAAA,IAAA,GAAiB,EAAE,CAAC;IAqB9B,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACjB,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACrB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACjB,QAAA,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;IAC/B,QAAA,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;IACjC,QAAA,IAAI,CAAC,mBAAmB,GAAG,mBAAmB,CAAC;IAC/C,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACjB,QAAA,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC3B,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;SAC1B;QAED,WAAW,GAAA;IACT,QAAA,OAAO,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;SACjE;QAED,WAAW,GAAA;YACT,OAAO,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;SACzC;QAED,aAAa,GAAA;IACX,QAAA,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE;IAC7B,YAAA,OAAO,CAAC,EAAE,GAAG,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;aACnC;YACD,OAAO,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;SAC9B;QAED,YAAY,GAAA;YACV,OAAO,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;SAC7B;QAED,SAAS,GAAA;YACP,OAAO,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;SAC7B;QAED,SAAS,GAAA;YACP,OAAO,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;SAC5B;QAED,kBAAkB,GAAA;YAChB,QACE,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ;gBACzC,IAAI,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ;gBAC5C,IAAI,CAAC,SAAS,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAC1C;SACH;IAED,IAAA,eAAe,CAAC,KAAa,EAAA;IAC3B,QAAA,OAAO,CAAC,IAAI,CAAC,SAAS,GAAG,KAAK,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;SACpE;IAED,IAAA,eAAe,CAAC,GAAW,EAAA;IACzB,QAAA,OAAO,IAAI,CAAC,SAAS,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,IAAI,CAAC;SAClE;IAED,IAAA,MAAM,CAAC,GAAW,EAAA;IAChB,QAAA,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;SACnD;IAED,IAAA,QAAQ,CAAC,KAAa,EAAA;YACpB,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC;SACjD;QAED,QAAQ,CAAC,CAAS,EAAE,UAAkB,EAAA;IACpC,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YAC/B,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,UAAU,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;SACtE;QAED,eAAe,GAAA;IACb,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;IAC/B,QAAA,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;IACtC,QAAA,MAAM,UAAU,GAAG,WAAW,GAAG,CAAC,CAAC;IACnC,QAAA,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC;IACvD,QAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;IACzE,QAAA,MAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;IACjD,QAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,UAAU,GAAG,YAAY,CAAC,CAAC;IACvE,QAAA,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC;SACjC;QAED,qBAAqB,GAAA;YACnB,MAAM,YAAY,GAAG,EAAE,CAAC;IACxB,QAAA,MAAM,aAAa,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;YACzC,MAAM,SAAS,GAAG,CAAC,CAAC;IACpB,QAAA,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa,GAAG,YAAY,CAAC,CAAC,CAAC;YAEhF,MAAM,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;IACrC,QAAA,MAAM,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;YAClF,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YAClC,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IAClC,QAAA,MAAM,UAAU,GAAG,IAAI,GAAG,IAAI,CAAC;YAE/B,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC;IAE/E,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC,GAAG,SAAS,CAAC;YACpD,MAAM,GAAG,GAAG,EAAE,CAAC;IACf,QAAA,KAAK,IAAI,KAAK,GAAG,KAAK,EAAE,KAAK,IAAI,IAAI,GAAG,IAAI,EAAE,KAAK,IAAI,SAAS,EAAE;gBAChE,GAAG,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;aACjE;IACD,QAAA,OAAO,GAAG,CAAC;SACZ;IAED,IAAA,OAAO,CAAC,CAAS,EAAA;YACf,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACtB,IAAI,CAAC,IAAI,GAAG;IAAE,YAAA,OAAO,CAAC,CAAC,GAAG,GAAG,EAAE,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;YAChD,IAAI,CAAC,IAAI,GAAG;IAAE,YAAA,OAAO,CAAC,CAAC,GAAG,GAAG,EAAE,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;YAChD,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;SACjC;IAED,IAAA,IAAY,MAAM,GAAA;IAChB,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;IAC/B,QAAA,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;IACtC,QAAA,MAAM,UAAU,GAAG,WAAW,GAAG,CAAC,CAAC;IACnC,QAAA,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC;IACvD,QAAA,MAAM,KAAK,GAAG,WAAW,GAAG,UAAU,GAAG,CAAC,CAAC;IAC3C,QAAA,OAAO,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,CAAC;SACtC;IAED,IAAA,kBAAkB,CAAC,OAAe,EAAA;IAChC,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;IAClC,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;IAC/B,QAAA,MAAM,SAAS,GAAG,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC;IACnE,QAAA,OAAO,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC;SAClD;;IAGD,IAAA,uBAAuB,CAAC,OAAe,EAAA;IACrC,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;IAClC,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;IAC/B,QAAA,MAAM,SAAS,GAAG,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC;IACnE,QAAA,OAAO,EAAE,CAAC,UAAU,GAAG,SAAS,GAAG,CAAC,CAAC;SACtC;IAED,IAAA,cAAc,CAAC,OAAe,EAAA;;YAE5B,OAAO,IAAI,CAAC,eAAe,CACzB,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CACxE,CAAC;SACH;IAED,IAAA,IAAY,SAAS,GAAA;IACnB,QAAA,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC;IAAE,YAAA,OAAO,KAAK,CAAC;IACzC,QAAA,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC;SACpG;IACF;;UCnKY,YAAY,CAAA;QAevB,WACE,CAAA,MAAyB,EACzB,MAAoE,EACpE,IAA2E,EAC3E,MAAiB,EACjB,SAAqD,EACrD,MAAc,EAAA;IAfR,QAAA,IAAA,CAAA,QAAQ,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,MAAM,EAAE,KAAK,EAAE,CAAC;YAC9C,IAAU,CAAA,UAAA,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC;;YAK5C,IAAa,CAAA,aAAA,GAAG,KAAK,CAAC;YACtB,IAAgB,CAAA,gBAAA,GAA4B,IAAI,CAAC;IAUvD,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACrB,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACrB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACjB,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACrB,QAAA,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC3B,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,kBAAkB,EAAE,CAAC;SAC3B;IAED,IAAA,WAAW,CAAC,CAAa,EAAA;;YACvB,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE,CAAC;YACjD,MAAM,EAAE,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;YACjC,MAAM,EAAE,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC;IAChC,QAAA,MAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;YAC/D,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;IAE7E,QAAA,MAAM,YAAY,GAAG,EAAE,GAAG,UAAU,CAAC;IACrC,QAAA,MAAM,YAAY,GAAG,EAAE,GAAG,OAAO,CAAC;IAClC,QAAA,MAAM,aAAa,GAAG,CAAC,YAAY,IAAI,CAAC,YAAY,CAAC;YAErD,IAAI,YAAY,EAAE;gBAChB,IAAI,CAAC,IAAI,CAAC,KAAK,KAAK,CAAC,CAAC,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;gBAC9C,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;IAC9D,YAAA,CAAA,EAAA,GAAA,MAAA,IAAI,CAAC,MAAM,EAAC,MAAM,mDAAG,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACvD,IAAI,CAAC,qBAAqB,EAAE,CAAC;aAC9B;iBAAM,IAAI,aAAa,EAAE;IACxB,YAAA,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;IAC7B,YAAA,MAAM,MAAM,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;IAC1C,YAAA,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC;IACvD,YAAA,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACvB,YAAA,IAAI,CAAC,IAAI,CAAC,KAAK,KAAK,IAAI,GAAG,IAAI,CAAC,CAAC;gBACjC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;;gBAE9D,IAAI,CAAC,IAAI,CAAC,OAAO,KAAK,IAAI,GAAG,IAAI,CAAC,CAAC;IACnC,YAAA,CAAA,EAAA,GAAA,MAAA,IAAI,CAAC,MAAM,EAAC,MAAM,mDAAG,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACvD,IAAI,CAAC,qBAAqB,EAAE,CAAC;aAC9B;iBAAM,IAAI,YAAY,EAAE;;IAEvB,YAAA,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;IAC7B,YAAA,MAAM,MAAM,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;IAC1C,YAAA,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC;IACvD,YAAA,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBACvB,IAAI,CAAC,IAAI,CAAC,OAAO,KAAK,IAAI,GAAG,IAAI,CAAC,CAAC;IACnC,YAAA,CAAA,EAAA,GAAA,MAAA,IAAI,CAAC,MAAM,EAAC,MAAM,mDAAG,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACvD,IAAI,CAAC,qBAAqB,EAAE,CAAC;aAC9B;SACF;IAED,IAAA,iBAAiB,CAAC,CAAe,EAAA;YAC/B,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE,CAAC;YACjD,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;YAChC,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC;;IAG/B,QAAA,IAAI,IAAI,CAAC,aAAa,EAAE;gBACtB,IAAI,CAAC,wBAAwB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBACvC,OAAO;aACR;;YAGD,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;IAC3C,QAAA,IAAI,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC;IACtB,QAAA,IAAI,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC;IAEtB,QAAA,IAAI,KAAK,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;IAE9B,QAAA,MAAM,MAAM,GAAG,CAAC,EAAgB,KAAI;;IAClC,YAAA,MAAM,GAAG,GAAG,WAAW,CAAC,GAAG,EAAE,CAAC;IAC9B,YAAA,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,GAAG,KAAK,CAAC,CAAC;IACpC,YAAA,MAAM,EAAE,GAAG,EAAE,CAAC,OAAO,GAAG,KAAK,CAAC;IAC9B,YAAA,MAAM,EAAE,GAAG,EAAE,CAAC,OAAO,GAAG,KAAK,CAAC;IAC9B,YAAA,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC;IACnB,YAAA,KAAK,GAAG,EAAE,CAAC,OAAO,CAAC;gBACnB,KAAK,GAAG,GAAG,CAAC;;gBAGZ,IAAI,CAAC,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;IACpD,YAAA,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAChF,YAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC;IAC3C,YAAA,CAAA,EAAA,GAAA,MAAA,IAAI,CAAC,MAAM,EAAC,KAAK,mDAAG,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBAC7D,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAC/B,SAAC,CAAC;YAEF,MAAM,IAAI,GAAG,MAAK;gBAChB,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;gBAC/C,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;gBACvD,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;gBACnD,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;;IAEzD,SAAC,CAAC;YAEF,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;YACpD,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;YAChD,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;SACrD;IAGO,IAAA,wBAAwB,CAAC,CAAe,EAAE,CAAS,EAAE,CAAS,EAAA;;IAEpE,QAAA,MAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;YAC/D,MAAM,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,gBAAgB,CAAC;YAClE,MAAM,OAAO,GAAG,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;IAElD,QAAA,MAAM,aAAa,GAAG,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,IAAI,UAAU;gBACxC,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC;IAE3D,QAAA,IAAI,CAAC,aAAa;gBAAE,OAAO;YAE3B,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;;YAG3C,IAAI,CAAC,gBAAgB,GAAG;IACtB,YAAA,MAAM,EAAE,CAAC;IACT,YAAA,MAAM,EAAE,CAAC;IACT,YAAA,IAAI,EAAE,CAAC;IACP,YAAA,IAAI,EAAE,CAAC;aACR,CAAC;IAEF,QAAA,MAAM,MAAM,GAAG,CAAC,EAAgB,KAAI;;gBAClC,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE,CAAC;gBACjD,MAAM,QAAQ,GAAG,EAAE,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;gBACxC,MAAM,QAAQ,GAAG,EAAE,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC;;IAGvC,YAAA,IAAI,IAAI,CAAC,gBAAgB,EAAE;IACzB,gBAAA,IAAI,CAAC,gBAAgB,CAAC,IAAI,GAAG,QAAQ,CAAC;IACtC,gBAAA,IAAI,CAAC,gBAAgB,CAAC,IAAI,GAAG,QAAQ,CAAC;iBACvC;;IAGD,YAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,IAAI,CAAC,MAAM,EAAC,WAAW,MAAG,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA,CAAA,EAAA,EAAA,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;IACtD,SAAC,CAAC;YAEF,MAAM,IAAI,GAAG,MAAK;gBAChB,IAAI,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;gBAC/C,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;gBACvD,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;gBACnD,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;IACzD,SAAC,CAAC;YAEF,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;YACpD,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;YAChD,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;SACrD;;IAOD,IAAA,cAAc,CAAC,OAAgB,EAAA;IAC7B,QAAA,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC;YAC7B,IAAI,CAAC,OAAO,EAAE;IACZ,YAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;aAC9B;SACF;QAED,mBAAmB,GAAA;YACjB,OAAO,IAAI,CAAC,gBAAgB,CAAC;SAC9B;QAED,qBAAqB,GAAA;IACnB,QAAA,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;SAC9B;QAEO,cAAc,GAAA;IACpB,QAAA,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE;IACrB,YAAA,oBAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;IACxC,YAAA,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,CAAC,CAAC;aACvB;IACD,QAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;SAC9B;IAEO,IAAA,aAAa,CAAC,EAAU,EAAA;IAC9B,QAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC;IACtB,QAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC;IACzB,QAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC;IAC5B,QAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE;IACtB,YAAA,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,qBAAqB,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;aACzE;SACF;IAEO,IAAA,YAAY,CAAC,EAAU,EAAA;IAC7B,QAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;IACzB,YAAA,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,CAAC,CAAC;gBACtB,OAAO;aACR;IACD,QAAA,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM;IAAE,YAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,EAAE,CAAC;YACrD,MAAM,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;IACrC,QAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,EAAE,CAAC;IAC1B,QAAA,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC;IAC3C,QAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,IAAI,IAAI,CAAC;IACzB,QAAA,IAAI,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE;gBACtC,IAAI,CAAC,cAAc,EAAE,CAAC;aACvB;SACF;QAEO,kBAAkB,GAAA;IACxB,QAAA,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAC3E,QAAA,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SAC9E;IAEO,IAAA,eAAe,CAAC,CAAa,EAAA;;YACnC,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE,CAAC;YACjD,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC;YAChC,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC;;IAG/B,QAAA,MAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;YAC/D,MAAM,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,gBAAgB,CAAC;YAClE,MAAM,OAAO,GAAG,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;IAElD,QAAA,MAAM,aAAa,GAAG,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,IAAI,UAAU;gBACzC,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,IAAI,OAAO,CAAC;YAE1D,IAAI,aAAa,EAAE;IACjB,YAAA,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC;IACrB,YAAA,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC;IACrB,YAAA,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,IAAI,CAAC;aAC/B;iBAAM;IACL,YAAA,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,KAAK,CAAC;aAChC;;IAGD,QAAA,CAAA,EAAA,GAAA,MAAA,IAAI,CAAC,MAAM,EAAC,WAAW,MAAG,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA,CAAA,EAAA,EAAA,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;SACzD;QAEO,gBAAgB,GAAA;;IACtB,QAAA,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,KAAK,CAAC;IAC/B,QAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,IAAI,CAAC,MAAM,EAAC,WAAW,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA,CAAA,EAAA,EAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;SAC1C;IACF;;UC/PY,OAAO,CAAA;QAclB,WACE,CAAA,GAA6B,EAC7B,IAAkB,EAClB,MAAoE,EACpE,IAA2E,EAC3E,QAAiB,EACjB,UAAmB,EACnB,mBAA4B,EAC5B,MAAc,EACd,KAAe,EACf,SAAqD,EACrD,SAAwB,EACxB,YAAiB,EAAA;IAEjB,QAAA,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;IACf,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACjB,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACrB,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACjB,QAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IACzB,QAAA,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;IAC7B,QAAA,IAAI,CAAC,mBAAmB,GAAG,mBAAmB,CAAC;IAC/C,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACrB,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACnB,QAAA,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC3B,QAAA,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;IAC3B,QAAA,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;SAClC;QAED,OAAO,GAAA;IACL,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC;IAC9D,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,gBAAgB,CAAC;IAChE,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;YACxC,IAAI,IAAI,CAAC,QAAQ;gBAAE,IAAI,CAAC,QAAQ,EAAE,CAAC;YACnC,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAC5B,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAC7B,QAAA,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO;gBAAE,IAAI,CAAC,aAAa,EAAE,CAAC;YACjD,IAAI,IAAI,CAAC,UAAU;gBAAE,IAAI,CAAC,UAAU,EAAE,CAAC;SACxC;QAEO,QAAQ,GAAA;YACd,IAAI,CAAC,IAAI,CAAC,QAAQ;gBAAE,OAAO;IAC3B,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC;YAC9D,MAAM,UAAU,GAAG,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;IAC7C,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,IAAI,MAAM,CAAC;IACtD,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;YACvB,MAAM,WAAW,GAAG,EAAE,CAAC;IACvB,QAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,GAAG,WAAW,CAAC,CAAC;IACrE,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;IACrB,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,QAAQ,EAAE,CAAC,EAAE,EAAE;gBAClC,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,CAAC,GAAG,WAAW,CAAC;IAC5C,YAAA,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;gBACrC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;aAChC;IACD,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;YAElB,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC;IACzC,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;IACrB,QAAA,KAAK,IAAI,CAAC,GAAG,EAAE,CAAC,UAAU,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE;gBAChD,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,GAAG,CAAC,CAAC;IACnF,YAAA,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;gBACpC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC;aACjE;IACD,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,IAAI,SAAS,CAAC;IAC9D,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;SACnB;QAEO,SAAS,GAAA;IACf,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;IAChB,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC;IAC9D,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;IACrB,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,CACX,IAAI,CAAC,MAAM,CAAC,IAAI,EAChB,IAAI,CAAC,MAAM,CAAC,GAAG,EACf,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,EAC5C,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAC1B,CAAC;IACF,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;YAEhB,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC;IACzC,QAAA,KAAK,IAAI,CAAC,GAAG,EAAE,CAAC,UAAU,EAAE,CAAC,GAAG,EAAE,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE;IAChD,YAAA,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,UAAU,CAAC,CAAC;aACpD;IACD,QAAA,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;SACpB;QAGO,oBAAoB,GAAA;YAC1B,MAAM,gBAAgB,GAAG,IAAI,CAAC,YAAY,CAAC,mBAAmB,EAAE,CAAC;IACjE,QAAA,IAAI,CAAC,gBAAgB;gBAAE,OAAO;IAE9B,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;;IAGhB,QAAA,MAAM,MAAM,GAAG,gBAAgB,CAAC,MAAM,CAAC;IACvC,QAAA,MAAM,MAAM,GAAG,gBAAgB,CAAC,MAAM,CAAC;IACvC,QAAA,MAAM,IAAI,GAAG,gBAAgB,CAAC,IAAI,CAAC;IACnC,QAAA,MAAM,IAAI,GAAG,gBAAgB,CAAC,IAAI,CAAC;;YAGnC,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YACrC,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YACrC,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC;YAC1C,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,MAAM,CAAC,CAAC;;YAG3C,MAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;YACtD,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;YAClD,MAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,MAAM,CAAC,CAAC;YAC1D,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;IAEtD,QAAA,MAAM,SAAS,GAAG,QAAQ,GAAG,UAAU,CAAC;IACxC,QAAA,MAAM,QAAQ,GAAG,QAAQ,GAAG,UAAU,CAAC;IACvC,QAAA,MAAM,UAAU,GAAG,SAAS,IAAI,CAAC,CAAC;;IAGlC,QAAA,MAAM,SAAS,GAAG,UAAU,GAAG,wBAAwB,GAAG,wBAAwB,CAAC;IACnF,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;IAC/B,QAAA,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;;YAGvD,MAAM,WAAW,GAAG,UAAU,GAAG,wBAAwB,GAAG,wBAAwB,CAAC;IACrF,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,WAAW,CAAC;IACnC,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;IACvB,QAAA,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;;IAGzD,QAAA,MAAM,OAAO,GAAG,KAAK,GAAG,SAAS,GAAG,CAAC,CAAC;;IAGtC,QAAA,MAAM,aAAa,GAAG,UAAU,KAAK,CAAC,GAAG,CAAC,SAAS,GAAG,UAAU,IAAI,GAAG,GAAG,CAAC,CAAC;;IAG5E,QAAA,MAAM,SAAS,GAAG,SAAS,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;IAC5C,QAAA,MAAM,SAAS,GAAG,CAAG,EAAA,SAAS,CAAG,EAAA,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA,EAAA,EAAK,aAAa,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,CAAA,EAAG,aAAa,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC;YACvH,MAAM,cAAc,GAAG,CAAA,OAAA,EAAU,UAAU,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA,CAAE,CAAC;YACzD,MAAM,YAAY,GAAG,CAAA,KAAA,EAAQ,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA,CAAE,CAAC;IACnD,QAAA,MAAM,QAAQ,GAAG,QAAQ,IAAI,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;IAC1C,QAAA,MAAM,QAAQ,GAAG,CAAA,IAAA,EAAO,QAAQ,CAAG,EAAA,QAAQ,OAAO,CAAC;YAEnD,MAAM,KAAK,GAAG,CAAC,SAAS,EAAE,cAAc,EAAE,YAAY,EAAE,QAAQ,CAAC,CAAC;;IAGlE,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,gBAAgB,CAAC;YACjC,MAAM,UAAU,GAAG,EAAE,CAAC;YACtB,MAAM,OAAO,GAAG,CAAC,CAAC;YAClB,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;IAClF,QAAA,MAAM,QAAQ,GAAG,QAAQ,GAAG,OAAO,GAAG,CAAC,CAAC;YACxC,MAAM,SAAS,GAAG,KAAK,CAAC,MAAM,GAAG,UAAU,GAAG,OAAO,GAAG,CAAC,CAAC;IAC1D,QAAA,MAAM,IAAI,GAAG,OAAO,GAAG,QAAQ,GAAG,CAAC,CAAC;IACpC,QAAA,MAAM,IAAI,GAAG,KAAK,GAAG,UAAU,GAAG,CAAC,CAAC;;IAGpC,QAAA,MAAM,QAAQ,GAAG,UAAU,GAAG,SAAS,GAAG,SAAS,CAAC;YACpD,MAAM,SAAS,GAAG,SAAS,CAAC;;IAG5B,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAC;IAC9B,QAAA,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;;IAGnD,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,SAAS,CAAC;IACjC,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;IACvB,QAAA,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;;IAGrD,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;IAC/B,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAC;IAC9B,QAAA,IAAI,CAAC,GAAG,CAAC,YAAY,GAAG,KAAK,CAAC;YAC9B,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK,KAAI;gBAC5B,MAAM,CAAC,GAAG,IAAI,GAAG,OAAO,GAAG,KAAK,GAAG,UAAU,CAAC;gBAC9C,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;IACtC,SAAC,CAAC,CAAC;IAEH,QAAA,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;SACpB;QAEO,UAAU,GAAA;IAChB,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC;IAC9D,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,gBAAgB,CAAC;;YAGhE,MAAM,KAAK,GAAG,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;IACxC,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,IAAI,MAAM,CAAC;IAC1D,QAAA,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IACvD,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI,MAAM,CAAC;YACxD,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,KAAK,GAAG,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC;;IAGlF,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,IAAI,MAAM,CAAC;IACpD,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,gBAAgB,CAAC;IACjC,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAC;IAC9B,QAAA,IAAI,CAAC,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAC;YACjC,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE,CAAC;YACnD,KAAK,MAAM,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,MAAM,EAAE;gBACjC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;aACpE;;IAGD,QAAA,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;IAC5D,QAAA,MAAM,MAAM,GAAG,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;IAC5D,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,IAAI,MAAM,CAAC;YAC1D,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IACzE,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI,MAAM,CAAC;IACxD,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;IACrB,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,GAAG,GAAG,CAAC,CAAC;IACjD,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,MAAM,EAAE,OAAO,GAAG,GAAG,CAAC,CAAC;IAC1D,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;;IAGlB,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;IAChB,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;YACrB,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IACrE,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;IAChB,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,IAAI,MAAM,CAAC;IACpD,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,gBAAgB,CAAC;IACjC,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAC;IAC9B,QAAA,IAAI,CAAC,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAC;YACjC,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;YACxE,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,EAAE,CAAC;;IAEzC,QAAA,MAAM,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,UAAU,GAAG,EAAE,CAAC,CAAC;YACtD,MAAM,WAAW,GAAG,EAAE,CAAC,QAAQ,GAAG,EAAE,CAAC;IACrC,QAAA,KAAK,IAAI,CAAC,GAAG,aAAa,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,IAAI,IAAI,EAAE;IACtD,YAAA,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,UAAU,CAAC,CAAC;IACjD,YAAA,IAAI,IAAU,CAAC;IACf,YAAA,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE;IACxC,gBAAA,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;iBACpC;qBAAM;;oBAEL,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;wBACxB,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,CAAC;wBAC1E,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,CAAC;IAC1E,oBAAA,MAAM,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC;wBACrC,IAAI,GAAG,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,QAAQ,CAAC,CAAC;qBACnE;yBAAM;;wBAEL,MAAM,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC;4BACnC,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE;4BACxD,IAAI,CAAC,GAAG,EAAE,CAAC;wBACb,IAAI,GAAG,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC;qBAC7E;iBACF;IACD,YAAA,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;IAC1D,YAAA,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;IAC9D,YAAA,MAAM,CAAC,GAAG,CAAA,EAAG,KAAK,CAAI,CAAA,EAAA,OAAO,EAAE,CAAC;IAChC,YAAA,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;aAC3D;IACD,QAAA,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;SACpB;QAEO,UAAU,GAAA;IAChB,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC;IAC9D,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,gBAAgB,CAAC;IAChE,QAAA,MAAM,MAAM,GAAG,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;YAC5D,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;YACzC,MAAM,MAAM,GAAG,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;YACzC,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC;IAEzC,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;IAChB,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,yBAAyB,CAAC;IAC/C,QAAA,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;YAChD,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;YAChE,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;YAEzE,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAC7B,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,SAAS,CAAC;IACjC,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,GAAG,CAAC;YACzB,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,GAAG,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;IAEnF,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,SAAS,CAAC;YACjC,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,GAAG,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC;YAC1E,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,EAAE,OAAO,GAAG,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IAC3F,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;IACzB,QAAA,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;SACpB;IAEO,IAAA,aAAa,CAAC,MAAkB,EAAE,CAAS,EAAE,UAAkB,EAAA;;IACrE,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC;YAC/C,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC;IAE5C,QAAA,IAAI,IAAI,CAAC,mBAAmB,EAAE;gBAC5B,MAAM,IAAI,GAAG,MAAM,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC;IACxE,YAAA,MAAM,aAAa,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;;IAGtC,YAAA,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;IAChD,YAAA,MAAM,QAAQ,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;gBACtD,IAAI,MAAM,GAAG,CAAC,CAAC;IACf,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBACzC,IAAI,SAAS,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC;wBAAE,MAAM,GAAG,CAAC,CAAC;iBAClD;gBAED,IAAI,QAAQ,GAAG,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;gBACjC,IAAI,aAAa,EAAE;IACjB,gBAAA,IAAI,GAAG,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC;oBAC5B,IAAI,EAAE,GAAG,MAAM,GAAG,CAAC,EAAE,IAAI,GAAG,MAAM,GAAG,CAAC,CAAC;IACvC,gBAAA,OAAO,GAAG,GAAG,GAAG,GAAG,QAAQ,KAAK,EAAE,IAAI,CAAC,IAAI,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE;IAC9D,oBAAA,MAAM,KAAK,GAAG,EAAE,IAAI,CAAC,GAAG,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;IAC3C,oBAAA,MAAM,OAAO,GAAG,IAAI,GAAG,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;IAC1D,oBAAA,IAAI,KAAK,IAAI,OAAO,EAAE;IACpB,wBAAA,IAAI,EAAE,IAAI,CAAC,EAAE;IAAE,4BAAA,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;IAAC,4BAAA,GAAG,IAAI,SAAS,CAAC,EAAE,CAAC,CAAC;IAAC,4BAAA,EAAE,EAAE,CAAC;6BAAE;iCACzD;IAAE,4BAAA,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAAC,4BAAA,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;IAAC,4BAAA,IAAI,EAAE,CAAC;6BAAE;yBAC7D;6BAAM;IACL,wBAAA,IAAI,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE;IAAE,4BAAA,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAAC,4BAAA,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;IAAC,4BAAA,IAAI,EAAE,CAAC;6BAAE;iCAC1E;IAAE,4BAAA,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC;IAAC,4BAAA,GAAG,IAAI,SAAS,CAAC,EAAE,CAAC,CAAC;IAAC,4BAAA,EAAE,EAAE,CAAC;6BAAE;yBACvD;qBACF;iBACF;gBAED,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC;gBACrC,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC;gBACrC,MAAM,GAAG,GAAG,CAAA,EAAA,GAAA,IAAI,CAAC,MAAM,CAAC,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,KAAK,CAAC;gBAChC,MAAM,GAAG,GAAG,CAAA,EAAA,GAAA,IAAI,CAAC,MAAM,CAAC,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,KAAK,CAAC;IAEhC,YAAA,MAAM,KAAK,GAAG,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;IAClD,YAAA,MAAM,MAAM,GAAG,EAAE,GAAG,IAAI,CAAC;IAEzB,YAAA,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACvE,MAAM,OAAO,GAAG,CAAA,EAAA,GAAA,IAAI,CAAC,KAAK,CAAC,aAAa,MAAI,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,IAAI,CAAC;gBACjD,MAAM,QAAQ,GAAG,CAAA,EAAA,GAAA,IAAI,CAAC,KAAK,CAAC,cAAc,MAAI,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAA,IAAI,CAAC;IACnD,YAAA,MAAM,OAAO,GAAG,CAAC,CAAS,KAAK,CAAgB,aAAA,EAAA,OAAO,GAAG,IAAI,IAAI,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC;IACjF,YAAA,MAAM,QAAQ,GAAG,CAAC,CAAS,KAAK,CAAgB,aAAA,EAAA,QAAQ,GAAG,IAAI,IAAI,CAAC,GAAG,OAAO,CAAC,GAAG,CAAC;gBAE/E,IAAmB,MAAM,GAAG,CAAC,SAAS;IAC1C,YAAA,IAAI,MAAM,GAAG,CAAC,EAAE,OAAO,GAAG,CAAC,CAAC;;IAG5B,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;IACpC,gBAAA,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;IAClB,gBAAA,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;IACjD,gBAAA,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;IAC3C,gBAAA,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;IAC3C,gBAAA,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,CAAC;oBAEnC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,GAAG,GAAG,CAAC,CAAC;IACrC,gBAAA,MAAM,IAAI,CAAC,CAAC,GAAG,CAAC;IAChB,gBAAA,OAAO,IAAI,CAAC,CAAC,IAAI,CAAC;oBAElB,MAAM,KAAK,GAAG,aAAa,KAAK,CAAC,KAAK,MAAM,CAAC,CAAC;oBAC9C,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,SAAS,IAAI,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;IACnF,gBAAA,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,CAAC;oBAC3D,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,SAAS,IAAI,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IACjF,gBAAA,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,CAAC;iBAC7D;;IAGD,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;IACpC,gBAAA,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;oBAClB,MAAM,IAAI,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;oBACzB,MAAM,IAAI,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;IACzB,gBAAA,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;IACjD,gBAAA,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;IAC3C,gBAAA,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;IAC3C,gBAAA,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,CAAC;IACnC,gBAAA,IAAI,IAAI,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE;IAC/C,oBAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,IAAI,SAAS,CAAC;wBAC3D,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,CAAC;qBAC1F;IACD,gBAAA,IAAI,IAAI,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE;IAC/C,oBAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,IAAI,SAAS,CAAC;wBAC1D,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,CAAC,EAAE,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE,CAAC,CAAC,CAAC;qBAC3F;iBACF;;IAGD,YAAA,IAAI,IAAI,CAAC,MAAM,CAAC,kBAAkB,EAAE,EAAE;oBACpC,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;oBACjE,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,CAAG,EAAA,QAAQ,cAAc,CAAC;IAC1C,gBAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAC;IAC9B,gBAAA,IAAI,CAAC,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAC;IACjC,gBAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;IACpC,oBAAA,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;IAClB,oBAAA,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;wBACjD,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;wBAClC,MAAM,KAAK,GAAG,aAAa,KAAK,CAAC,KAAK,MAAM,CAAC,CAAC;IAC9C,oBAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,IAAI,IAAI,CAAC,KAAK,CAAC,eAAe,IAAI,SAAS,KAAK,IAAI,CAAC,KAAK,CAAC,eAAe,IAAI,MAAM,CAAC,CAAC;IAC3I,oBAAA,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;IACvF,oBAAA,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;qBACxF;iBACF;;gBAGD,IAAI,aAAa,IAAI,IAAI,CAAC,MAAM,CAAC,kBAAkB,EAAE,EAAE;oBACrD,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,GAAG,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,GAAG,CAAC,CAAC;IACvF,gBAAA,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC;IAC5C,gBAAA,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC;oBAC5C,MAAM,SAAS,GAAG,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;IAEnD,gBAAA,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;oBAChB,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAC7B,gBAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI,SAAS,CAAC;IAC3D,gBAAA,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;oBACrB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;oBAC7B,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IACjC,gBAAA,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;IAClB,gBAAA,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;oBACrB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;oBAC7B,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;IACjC,gBAAA,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;IAClB,gBAAA,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;oBAEzB,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;IACnE,gBAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,gBAAgB,IAAI,SAAS,CAAC;oBAC9D,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,CAAG,EAAA,WAAW,cAAc,CAAC;IAC7C,gBAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,MAAM,CAAC;IAC5B,gBAAA,IAAI,CAAC,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAC;IACjC,gBAAA,MAAM,MAAM,GAAG,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC;oBACvD,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;oBACvC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;IACvC,gBAAA,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;iBACpB;;IAGD,YAAA,IAAI,IAAI,CAAC,MAAM,CAAC,kBAAkB,EAAE,EAAE;IACpC,gBAAA,MAAM,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IACrD,gBAAA,MAAM,KAAK,GAAG,MAAM,GAAG,OAAO,CAAC;oBAC/B,MAAM,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;IACtE,gBAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAC;oBAC9B,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,CAAG,EAAA,aAAa,cAAc,CAAC;IAC/C,gBAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,IAAI,SAAS,KAAK,IAAI,CAAC,KAAK,CAAC,aAAa,IAAI,SAAS,CAAC,CAAC;oBACpH,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAS,MAAA,EAAA,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,EAAE,EAAE,EAAE,aAAa,GAAG,EAAE,CAAC,CAAC;IACjF,gBAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,MAAM,CAAC;oBACrD,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAS,MAAA,EAAA,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,aAAa,GAAG,EAAE,CAAC,CAAC;iBACrF;aACF;;IAGD,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAChD,QAAA,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IAC9C,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;IAChD,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAClD,MAAM,IAAI,GAAG,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,IAAI,CAAC;YACzC,MAAM,KAAK,GAAG,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,SAAS,KAAK,IAAI,CAAC,KAAK,CAAC,UAAU,IAAI,SAAS,CAAC,CAAC;IACjG,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,KAAK,CAAC;IAC7B,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;YACrB,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;YAC3B,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;IAC1B,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;IAClB,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,KAAK,CAAC;IAC3B,QAAA,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,GAAG,IAAI,EAAE,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC;SAC7G;QAGO,aAAa,GAAA;IACnB,QAAA,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO;gBAAE,OAAO;IAEpC,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC;IAC9D,QAAe,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,iBAAiB;YAChE,MAAM,UAAU,GAAG,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;IAC7C,QAAA,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;IAE5D,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;;IAGhB,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,IAAI,MAAM,CAAC;IACtD,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;YACvB,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAC7B,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;IACrB,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;IACnD,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;IAC3C,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;;IAGlB,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;IACrB,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;IACpD,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;IAC9C,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;;IAGlB,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,CACvC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CACxF,CAAC;IACF,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;IACzB,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,IAAI,MAAM,CAAC;YAC1D,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;IAC3E,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI,MAAM,CAAC;YACxD,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;IAC7E,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,IAAI,MAAM,CAAC;IACpD,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,qBAAqB,CAAC;IACtC,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAC;IAC9B,QAAA,IAAI,CAAC,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAC;IACjC,QAAA,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;;IAG1F,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAC/D,IAAI,OAAO,GAAG,OAAO,CAAC;IACtB,QAAA,IAAI,KAAK,IAAI,CAAC,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;IAC9D,YAAA,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC;IAC7C,YAAA,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;IAC1D,YAAA,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;IAC9D,YAAA,OAAO,GAAG,CAAG,EAAA,KAAK,CAAI,CAAA,EAAA,OAAO,EAAE,CAAC;aACjC;IAED,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,IAAI,MAAM,CAAC;YAC1D,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAC1E,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI,MAAM,CAAC;YACxD,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;IAC5E,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,IAAI,MAAM,CAAC;IACpD,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,gBAAgB,CAAC;IACjC,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAC;IAC9B,QAAA,IAAI,CAAC,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAC;YACjC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IAE/E,QAAA,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;SACpB;QAEO,qBAAqB,GAAA;YAC3B,IAAI,CAAC,IAAI,CAAC,SAAS;gBAAE,OAAO;IAE5B,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,gBAAgB,CAAC;IAC9D,QAAe,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,iBAAiB;YAChE,MAAM,KAAK,GAAG,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;IACxC,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IAE/C,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;;YAGhB,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAC7B,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,IAAI,MAAM,CAAC;IACtD,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;IACvB,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;IACrB,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;IAC1B,QAAA,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC;IAClB,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;;YAGzB,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IAC5C,QAAA,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,qBAAqB,CAAC;IACtC,QAAA,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,KAAK,CAAC;IACxD,QAAA,MAAM,QAAQ,GAAG,SAAS,GAAG,CAAC,CAAC;YAC/B,MAAM,SAAS,GAAG,EAAE,CAAC;;IAGrB,QAAA,MAAM,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC;IACvB,QAAA,MAAM,IAAI,GAAG,CAAC,GAAG,SAAS,GAAG,CAAC,CAAC;;YAG/B,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;IAC/B,QAAA,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;;IAGnD,QAAA,IAAI,CAAC,GAAG,CAAC,WAAW,GAAG,SAAS,CAAC;IACjC,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;IACvB,QAAA,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;;YAGrD,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,SAAS,CAAC;IAC/B,QAAA,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,QAAQ,CAAC;IAC9B,QAAA,IAAI,CAAC,GAAG,CAAC,YAAY,GAAG,QAAQ,CAAC;IACjC,QAAA,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,SAAS,EAAE,IAAI,GAAG,QAAQ,GAAG,CAAC,EAAE,IAAI,GAAG,SAAS,GAAG,CAAC,CAAC,CAAC;IAExE,QAAA,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,CAAC;SACpB;IACF;;UCxjBY,KAAK,CAAA;IAqCR,IAAA,oBAAoB,CAAC,SAAsB,EAAA;;IAEjD,QAAA,IAAI,SAAS,CAAC,aAAa,CAAC,cAAc,CAAC,EAAE;IAC3C,YAAA,OAAO;aACR;;IAGD,QAAA,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;;YAGzC,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IACjD,QAAA,UAAU,CAAC,SAAS,GAAG,aAAa,CAAC;YAErC,MAAM,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;IACtD,QAAA,YAAY,CAAC,EAAE,GAAG,WAAW,CAAC;IAC9B,QAAA,YAAY,CAAC,SAAS,GAAG,UAAU,CAAC;IACpC,QAAA,YAAY,CAAC,WAAW,GAAG,OAAO,CAAC;IACnC,QAAA,UAAU,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;YAErC,MAAM,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;IACvD,QAAA,aAAa,CAAC,EAAE,GAAG,YAAY,CAAC;IAChC,QAAA,aAAa,CAAC,SAAS,GAAG,UAAU,CAAC;IACrC,QAAA,aAAa,CAAC,WAAW,GAAG,aAAa,CAAC;IAC1C,QAAA,UAAU,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;YAGtC,MAAM,wBAAwB,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;IAClE,QAAA,wBAAwB,CAAC,EAAE,GAAG,uBAAuB,CAAC;IACtD,QAAA,wBAAwB,CAAC,SAAS,GAAG,UAAU,CAAC;IAChD,QAAA,wBAAwB,CAAC,WAAW,GAAG,eAAe,CAAC;IACvD,QAAA,UAAU,CAAC,WAAW,CAAC,wBAAwB,CAAC,CAAC;YAEjD,MAAM,UAAU,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;IACpD,QAAA,UAAU,CAAC,EAAE,GAAG,SAAS,CAAC;IAC1B,QAAA,UAAU,CAAC,SAAS,GAAG,UAAU,CAAC;IAClC,QAAA,UAAU,CAAC,KAAK,GAAG,cAAc,CAAC;IAClC,QAAA,UAAU,CAAC,WAAW,GAAG,YAAY,CAAC;IACtC,QAAA,UAAU,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;YAEnC,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;IAC5C,QAAA,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC;IACxB,QAAA,IAAI,CAAC,WAAW,GAAG,wBAAwB,CAAC;IAC5C,QAAA,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAE7B,QAAA,SAAS,CAAC,WAAW,CAAC,UAAU,CAAC,CAAC;;YAGlC,MAAM,cAAc,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IACrD,QAAA,cAAc,CAAC,SAAS,GAAG,qBAAqB,CAAC;IACjD,QAAA,SAAS,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC;;IAGtC,QAAA,IAAI,CAAC,yBAAyB,CAAC,SAAS,CAAC,CAAC;SAC3C;IAEO,IAAA,yBAAyB,CAAC,SAAsB,EAAA;YACtD,MAAM,YAAY,GAAG,SAAS,CAAC,aAAa,CAAC,YAAY,CAAsB,CAAC;YAChF,MAAM,aAAa,GAAG,SAAS,CAAC,aAAa,CAAC,aAAa,CAAsB,CAAC;YAClF,MAAM,wBAAwB,GAAG,SAAS,CAAC,aAAa,CAAC,wBAAwB,CAAsB,CAAC;YACxG,MAAM,UAAU,GAAG,SAAS,CAAC,aAAa,CAAC,UAAU,CAAsB,CAAC;;IAG5E,QAAA,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;IACjC,QAAA,IAAI,CAAC,aAAa,GAAG,aAAa,CAAC;IACnC,QAAA,IAAI,CAAC,wBAAwB,GAAG,wBAAwB,CAAC;IACzD,QAAA,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;SAC9B;IAED,IAAA,WAAA,CAAY,SAAsB,EAAE,OAAA,GAAsB,EAAE,EAAE,SAAoB,EAAE,EAAA;;YAtG5E,IAAI,CAAA,IAAA,GAAiB,EAAE,CAAC;YAExB,IAAM,CAAA,MAAA,GAAc,EAAE,CAAC;;IAGvB,QAAA,IAAA,CAAA,MAAM,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;YACpD,IAAI,CAAA,IAAA,GAAG,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC;YACrE,IAAQ,CAAA,QAAA,GAAG,IAAI,CAAC;YAChB,IAAU,CAAA,UAAA,GAAG,KAAK,CAAC;YACnB,IAAmB,CAAA,mBAAA,GAAG,IAAI,CAAC;IAC3B,QAAA,IAAA,CAAA,SAAS,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;YAC7C,IAAS,CAAA,SAAA,GAAkB,IAAI,CAAC;;YAGhC,IAAY,CAAA,YAAA,GAA6B,IAAI,CAAC;YAC9C,IAAa,CAAA,aAAA,GAA6B,IAAI,CAAC;YAC/C,IAAwB,CAAA,wBAAA,GAA6B,IAAI,CAAC;YAC1D,IAAU,CAAA,UAAA,GAA6B,IAAI,CAAC;;YAGnC,IAAI,CAAA,IAAA,GAAG,EAAE,CAAC;YACV,IAAW,CAAA,WAAA,GAAG,EAAE,CAAC;YACjB,IAAQ,CAAA,QAAA,GAAG,EAAE,CAAC;YACd,IAAc,CAAA,cAAA,GAAG,CAAC,CAAC;IACnB,QAAA,IAAA,CAAA,YAAY,GAAG,IAAI,CAAC,WAAW,GAAG,CAAC,GAAG,IAAI,CAAC,QAAQ,GAAG,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC;YAC9E,IAAS,CAAA,SAAA,GAAG,CAAC,CAAC;YACd,IAAS,CAAA,SAAA,GAAG,EAAE,CAAC;IACf,QAAA,IAAA,CAAA,QAAQ,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC;;IA6ExE,QAAA,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC;;YAGrC,MAAM,cAAc,GAAG,SAAS,CAAC,aAAa,CAAC,sBAAsB,CAAgB,CAAC;;YAGtF,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,aAAa,CAAC,QAAQ,CAAsB,CAAC;IACrE,QAAA,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;gBAChB,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;gBAC/C,IAAI,cAAc,EAAE;IAClB,gBAAA,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBACzC;qBAAM;;IAEL,gBAAA,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBACpC;aACF;YAED,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IACzC,QAAA,IAAI,CAAC,GAAG;IAAE,YAAA,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;IAC7D,QAAA,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;YAEf,IAAI,CAAC,OAAO,GAAG;gBACb,KAAK,EAAE,OAAO,CAAC,KAAK,IAAI,SAAS,CAAC,WAAW,IAAI,GAAG;gBACpD,MAAM,EAAE,OAAO,CAAC,MAAM,KAAK,cAAc,GAAG,cAAc,CAAC,YAAY,GAAG,SAAS,CAAC,YAAY,CAAC,IAAI,GAAG;IACxG,YAAA,QAAQ,EAAE,CAAA,EAAA,GAAA,OAAO,CAAC,QAAQ,mCAAI,IAAI;IAClC,YAAA,UAAU,EAAE,CAAA,EAAA,GAAA,OAAO,CAAC,UAAU,mCAAI,KAAK;IACvC,YAAA,mBAAmB,EAAE,CAAA,EAAA,GAAA,OAAO,CAAC,mBAAmB,mCAAI,IAAI;IACxD,YAAA,QAAQ,EAAE,OAAO,CAAC,QAAQ,IAAI,EAAE;IAChC,YAAA,YAAY,EAAE,OAAO,CAAC,YAAY,IAAI,IAAI;IAC1C,YAAA,YAAY,EAAE,OAAO,CAAC,YAAY,IAAI,IAAI;IAC1C,YAAA,MAAM,EAAE,OAAO,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM;IACrC,YAAA,KAAK,EAAE,OAAO,CAAC,KAAK,IAAI,EAAE;aAC3B,CAAC;IAEF,QAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;YAClC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;YACtC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC;YAC1C,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC;YAC5D,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;YAC5C,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC;;YAG5C,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CACtB,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,OAAO,CAAC,KAAK,EAClB,IAAI,CAAC,OAAO,CAAC,MAAM,EACnB,IAAI,CAAC,mBAAmB,EACxB,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,QAAQ,CACd,CAAC;IAEF,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAClC,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,IAAI,EACT;gBACE,GAAG,IAAI,CAAC,MAAM;gBACd,KAAK,EAAE,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;gBACnC,MAAM,EAAE,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;gBACpC,WAAW,EAAE,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;aAC1C,EACD,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,MAAM,CACZ,CAAC;YAGF,IAAI,CAAC,OAAO,GAAG,IAAI,OAAO,CACxB,IAAI,CAAC,GAAG,EACR,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,mBAAmB,EACxB,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,OAAO,CAAC,KAAK,EAClB,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,YAAY,CAClB,CAAC;YAEF,IAAI,CAAC,WAAW,EAAE,CAAC;YACnB,IAAI,CAAC,UAAU,EAAE,CAAC;YAClB,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACzB,IAAI,CAAC,MAAM,EAAE,CAAC;SACf;QAEO,WAAW,GAAA;IACjB,QAAA,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,gBAAgB,IAAI,CAAC,CAAC,CAAC,CAAC;IAClE,QAAA,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;IACpD,QAAA,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;YACtD,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC;YACtE,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC;IACxE,QAAA,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;SAC1B;QAEO,UAAU,GAAA;YAChB,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;IACvF,QAAA,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAC/E,QAAA,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SAC3D;QAEO,iBAAiB,GAAA;IACvB,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;gBACrB,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;;oBAE/C,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;wBACxB,IAAI,CAAC,aAAa,CAAC;IACjB,wBAAA,KAAK,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK;IACzB,wBAAA,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM;IAC5B,qBAAA,CAAC,CAAC;;wBAEH,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC;IACtC,oBAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;wBAC3E,MAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;IAC7C,oBAAA,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,CAAC;wBAChE,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,UAAU,GAAG,CAAC,CAAC;;IAEnC,oBAAA,MAAM,SAAS,GAAG,IAAI,CAAC,SAAU,CAAC;IAClC,oBAAA,MAAM,SAAS,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;IACxE,oBAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;wBACxD,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,SAAS,GAAG,QAAQ,CAAC;IAC5C,oBAAA,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;qBACxB;IACH,aAAC,CAAC,CAAC;aACJ;IAED,QAAA,IAAI,IAAI,CAAC,aAAa,EAAE;gBACtB,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;oBAChD,IAAI,CAAC,aAAa,CAAC;IACjB,oBAAA,QAAQ,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ;IACjC,iBAAA,CAAC,CAAC;IACL,aAAC,CAAC,CAAC;aACJ;IAED,QAAA,IAAI,IAAI,CAAC,wBAAwB,EAAE;gBACjC,IAAI,CAAC,wBAAwB,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;oBAC3D,IAAI,CAAC,aAAa,CAAC;IACjB,oBAAA,mBAAmB,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,mBAAmB;IACvD,iBAAA,CAAC,CAAC;IACL,aAAC,CAAC,CAAC;aACJ;IAED,QAAA,IAAI,IAAI,CAAC,UAAU,EAAE;gBACnB,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAK;;oBAC7C,MAAM,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,mBAAmB,EAAE,KAAK,IAAI,CAAC;oBAClE,IAAI,QAAQ,EAAE;IACZ,oBAAA,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;wBACxC,CAAA,EAAA,GAAA,IAAI,CAAC,UAAU,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;qBAC7C;yBAAM;IACL,oBAAA,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;wBACvC,CAAA,EAAA,GAAA,IAAI,CAAC,UAAU,MAAE,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAA,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;qBAC1C;IACD,gBAAA,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;IACzB,aAAC,CAAC,CAAC;aACJ;SACF;IAEO,IAAA,WAAW,CAAC,CAAa,EAAA;IAC/B,QAAA,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;IACjC,QAAA,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;SACxB;IAEO,IAAA,iBAAiB,CAAC,CAAe,EAAA;IACvC,QAAA,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;SACxC;QAEO,MAAM,GAAA;IACZ,QAAA,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC;YAC5C,IAAI,SAAS,EAAE;IACb,YAAA,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,SAAS,CAAC,WAAW,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;IACjE,YAAA,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,SAAS,CAAC,YAAY,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;aACrE;;YAGD,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CACtB,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,OAAO,CAAC,KAAK,EAClB,IAAI,CAAC,OAAO,CAAC,MAAM,EACnB,IAAI,CAAC,mBAAmB,EACxB,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,QAAQ,CACd,CAAC;YAEF,IAAI,CAAC,OAAO,GAAG,IAAI,OAAO,CACxB,IAAI,CAAC,GAAG,EACR,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,mBAAmB,EACxB,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,OAAO,CAAC,KAAK,EAClB,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,YAAY,CAClB,CAAC;YAEF,IAAI,CAAC,WAAW,EAAE,CAAC;IACnB,QAAA,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;SACxB;;IAGM,IAAA,OAAO,CAAC,IAAkB,EAAA;IAC/B,QAAA,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;IAGjB,QAAA,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;IACjB,YAAA,MAAM,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC;IAC9C,YAAA,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;aAC9B;;YAGD,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CACtB,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,OAAO,CAAC,KAAK,EAClB,IAAI,CAAC,OAAO,CAAC,MAAM,EACnB,IAAI,CAAC,mBAAmB,EACxB,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,QAAQ,CACd,CAAC;YAEF,IAAI,CAAC,OAAO,GAAG,IAAI,OAAO,CACxB,IAAI,CAAC,GAAG,EACR,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,mBAAmB,EACxB,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,OAAO,CAAC,KAAK,EAClB,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,SAAS;YACd,IAAI,CAAC,YAAY,CAClB,CAAC;;IAGF,QAAA,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;gBACjB,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC;IACtC,YAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC;gBAC3E,MAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;IAC7C,YAAA,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,GAAG,YAAY,CAAC,CAAC;gBAC3D,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,UAAU,GAAG,CAAC,CAAC;;IAEnC,YAAA,MAAM,SAAS,GAAG,IAAI,CAAC,SAAU,CAAC;IAClC,YAAA,MAAM,SAAS,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;IACxE,YAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;gBACxD,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,SAAS,GAAG,QAAQ,CAAC;aAC/C;IACD,QAAA,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;SACxB;IAEM,IAAA,aAAa,CAAC,OAA4B,EAAA;IAC/C,QAAA,MAAM,sBAAsB,GAAG,IAAI,CAAC,mBAAmB,CAAC;YACxD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;YACrC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;YACtC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC;YAC1C,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC;;IAG5D,QAAA,IAAI,sBAAsB,KAAK,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC/E,MAAM,UAAU,GAAG,sBAAsB,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;gBACzF,MAAM,UAAU,GAAG,IAAI,CAAC,mBAAmB,GAAG,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;IAC3F,YAAA,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC,CAAC;gBAC9D,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,UAAU,GAAG,UAAU,CAAC;aAC7C;;YAGD,IAAI,CAAC,MAAM,GAAG,IAAI,MAAM,CACtB,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,OAAO,CAAC,KAAK,EAClB,IAAI,CAAC,OAAO,CAAC,MAAM,EACnB,IAAI,CAAC,mBAAmB,EACxB,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,QAAQ,CACd,CAAC;YAEF,IAAI,CAAC,OAAO,GAAG,IAAI,OAAO,CACxB,IAAI,CAAC,GAAG,EACR,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,QAAQ,EACb,IAAI,CAAC,UAAU,EACf,IAAI,CAAC,mBAAmB,EACxB,IAAI,CAAC,MAAM,EACX,IAAI,CAAC,OAAO,CAAC,KAAK,EAClB,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,SAAS,EACd,IAAI,CAAC,YAAY,CAClB,CAAC;YAEF,IAAI,CAAC,MAAM,EAAE,CAAC;SACf;QAEM,MAAM,CAAC,KAAa,EAAE,MAAc,EAAA;IACzC,QAAA,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;IAC3B,QAAA,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC;YAC7B,IAAI,CAAC,MAAM,EAAE,CAAC;SACf;QAEM,OAAO,GAAA;IACZ,QAAA,IAAI,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE;gBAC7B,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACpD;SACF;;IAIM,IAAA,UAAU,KAAK,OAAO,IAAI,CAAC,OAAO,CAAC,EAAE;IACrC,IAAA,WAAW,KAAK,OAAO,IAAI,CAAC,QAAQ,CAAC,EAAE;IAC/C;;UClbY,wBAAwB,CAAA;QAInC,WAAY,CAAA,KAA2B,EAAE,OAAsC,EAAA;IAC7E,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACnB,QAAA,IAAI,CAAC,aAAa,GAAG,OAAO,IAAI,EAAE,CAAC;SACpC;IAED,IAAA,OAAO,CAAC,IAA2B,EAAA;;YAEjC,MAAM,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK;gBACnC,IAAI,EAAE,OAAO,CAAC,CAAC,IAAI,KAAK,QAAQ,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC,IAAI;gBAC1E,IAAI,EAAE,CAAC,CAAC,IAAI;gBACZ,IAAI,EAAE,CAAC,CAAC,IAAI;gBACZ,GAAG,EAAE,CAAC,CAAC,GAAG;gBACV,KAAK,EAAE,CAAC,CAAC,KAAK;IACd,YAAA,SAAS,EAAE,CAAC,CAAC,SAAS,IAAI,EAAE;IAC7B,SAAA,CAAC,CAAC,CAAC;IACJ,QAAA,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;SACnC;IAED,IAAA,MAAM,CAAC,IAAyB,EAAA;;IAE9B,QAAA,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;SACtB;QAED,IAAI,GAAA;;IAEF,QAAA,OAAO,EAAE,CAAC;SACX;IAED,IAAA,YAAY,CAAC,OAAqC,EAAA;IAChD,QAAA,IAAI,CAAC,aAAa,GAAG,EAAE,GAAG,IAAI,CAAC,aAAa,EAAE,GAAG,OAAO,EAAE,CAAC;SAC5D;QAED,OAAO,GAAA;YACL,OAAO,IAAI,CAAC,aAAa,CAAC;SAC3B;QAED,UAAU,GAAA;YACR,OAAO;IACL,YAAA,YAAY,EAAE,MAAK,GAAG;IACtB,YAAA,OAAO,EAAE,OAAO,EAAE,CAAC;IACnB,YAAA,KAAK,EAAE,MAAM,EAAE;IACf,YAAA,MAAM,EAAE,MAAM,CAAC;IACf,YAAA,OAAO,EAAE,MAAM,KAAK;IACpB,YAAA,iBAAiB,EAAE,MAAM,IAAI;IAC7B,YAAA,iBAAiB,EAAE,MAAM,IAAI;aAC9B,CAAC;SACH;QAED,OAAO,GAAA;IACL,QAAA,OAAO,IAAI,CAAC;SACb;IAED,IAAA,UAAU,CAAC,OAAgB,EAAA;;SAE1B;IACF;;UC7DY,YAAY,CAAA;IAGvB,IAAA,WAAA,CAAY,KAA2B,EAAA;IACrC,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;SACpB;IAED,IAAA,YAAY,CAAC,OAAyB,EAAA;;SAErC;QAED,OAAO,GAAA;YACL,OAAO;IACL,YAAA,OAAO,EAAE,IAAI;IACb,YAAA,WAAW,EAAE,IAAI;IACjB,YAAA,UAAU,EAAE,EAAE;aACf,CAAC;SACH;QAED,gBAAgB,CAAC,QAAgB,EAAE,QAAkB,EAAA;;SAEpD;QAED,gBAAgB,GAAA;;SAEf;QAED,eAAe,GAAA;IACb,QAAA,OAAO,IAAI,CAAC;SACb;IAED,IAAA,eAAe,CAAC,KAAqB,EAAA;;SAEpC;QAED,cAAc,GAAA;;SAEb;QAED,UAAU,GAAA;;SAET;IAED,IAAA,gBAAgB,CAAC,IAAqB,EAAA;IACpC,QAAA,OAAO,IAAI,CAAC;SACb;IAED,IAAA,gBAAgB,CAAC,UAAkB,EAAA;IACjC,QAAA,OAAO,IAAI,CAAC;SACb;IACF;;UClDY,aAAa,CAAA;IAGxB,IAAA,WAAA,CAAY,KAA2B,EAAA;IACrC,QAAA,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;SACpB;IAED,IAAA,YAAY,CAAC,OAA0B,EAAA;;SAEtC;QAED,OAAO,GAAA;YACL,OAAO;IACL,YAAA,OAAO,EAAE,IAAI;IACb,YAAA,SAAS,EAAE,IAAI;aAChB,CAAC;SACH;QAED,KAAK,GAAA;IACH,QAAA,OAAO,EAAE,CAAC;SACX;QAED,MAAM,GAAA;YACJ,OAAO,CAAC,CAAC;SACV;QAED,OAAO,GAAA;IACL,QAAA,OAAO,KAAK,CAAC;SACd;IAED,IAAA,iBAAiB,CAAC,KAAa,EAAA;YAC7B,OAAO,IAAI,CAAC;SACb;IAED,IAAA,iBAAiB,CAAC,UAAkB,EAAA;YAClC,OAAO,IAAI,CAAC;SACb;IACF;;UC/BY,QAAQ,CAAA;QAMnB,WAAY,CAAA,SAAsB,EAAE,OAAqB,EAAA;;YAJjD,IAAM,CAAA,MAAA,GAAiB,EAAE,CAAC;;IAMhC,QAAA,MAAM,UAAU,GAAG;gBACjB,KAAK,EAAE,OAAO,CAAC,KAAK;gBACpB,MAAM,EAAE,OAAO,CAAC,MAAM;IACtB,YAAA,QAAQ,EAAE,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAI,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,SAAS,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,OAAO,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,IAAI;IAClD,YAAA,UAAU,EAAE,KAAK;IACjB,YAAA,QAAQ,EAAE,EAAE;gBACZ,YAAY,EAAE,CAAC;IACf,YAAA,YAAY,EAAE,CAAC;IACf,YAAA,MAAM,EAAE,EAAE,GAAG,EAAE,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,EAAE,EAAE;aACnD,CAAC;YAEF,IAAI,CAAC,KAAK,GAAG,IAAIA,KAAG,CAAC,SAAS,EAAE,UAAU,CAAC,CAAC;YAC5C,IAAI,CAAC,YAAY,GAAG,IAAI,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACjD,IAAI,CAAC,aAAa,GAAG,IAAI,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACpD;IAED,IAAA,wBAAwB,CAAC,OAAsC,EAAA;YAC7D,MAAM,SAAS,GAAG,IAAI,wBAAwB,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;IACpE,QAAA,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IAC5B,QAAA,OAAO,SAAS,CAAC;SAClB;IAED,IAAA,YAAY,CAAC,SAA0B,EAAA;YACrC,MAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;IAC7C,QAAA,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;gBACd,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;aAC9B;SACF;QAED,SAAS,GAAA;YACP,OAAO,IAAI,CAAC,YAAY,CAAC;SAC1B;QAED,UAAU,GAAA;YACR,OAAO,IAAI,CAAC,aAAa,CAAC;SAC3B;IAED,IAAA,YAAY,CAAC,OAAqB,EAAA;;;IAEhC,QAAA,MAAM,UAAU,GAAG;gBACjB,KAAK,EAAE,OAAO,CAAC,KAAK;gBACpB,MAAM,EAAE,OAAO,CAAC,MAAM;IACtB,YAAA,QAAQ,EAAE,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,CAAA,EAAA,GAAA,OAAO,CAAC,IAAI,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,SAAS,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,EAAA,CAAE,OAAO,MAAA,IAAA,IAAA,EAAA,KAAA,KAAA,CAAA,GAAA,EAAA,GAAI,IAAI;aACnD,CAAC;IACF,QAAA,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;SACtC;QAED,OAAO,GAAA;YACL,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC;YACrC,OAAO;gBACL,KAAK,EAAE,IAAI,CAAC,KAAK;gBACjB,MAAM,EAAE,IAAI,CAAC,MAAM;IACnB,YAAA,IAAI,EAAE;oBACJ,SAAS,EAAE,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE;IACjD,aAAA;aACF,CAAC;SACH;QAED,MAAM,CAAC,KAAa,EAAE,MAAc,EAAA;YAClC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;SAClC;QAED,MAAM,GAAA;IACJ,QAAA,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;SACtB;IACF;;IC/Ee,SAAA,WAAW,CAAC,SAAsB,EAAE,OAAqB,EAAA;IACvE,IAAA,OAAO,IAAI,QAAQ,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;IAC1C;;;;;;;;;;;;;"}